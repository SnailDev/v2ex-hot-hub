[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6f49/22f4/18_large.png?m=1650127482", "name": "shanghai", "avatar_normal": "https://cdn.v2ex.com/navatar/6f49/22f4/18_normal.png?m=1650127482", "title": "上海", "url": "https://www.v2ex.com/go/shanghai", "topics": 2871, "footer": "", "header": "", "title_alternative": "Shanghai", "avatar_mini": "https://cdn.v2ex.com/navatar/6f49/22f4/18_mini.png?m=1650127482", "stars": 2056, "aliases": [], "root": false, "id": 18, "parent_node_name": "cn"}, "member": {"id": 349575, "username": "chihiro2014", "url": "https://www.v2ex.com/u/chihiro2014", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/a101f4a233d8c1a4c9d37f8b5aafb595?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/a101f4a233d8c1a4c9d37f8b5aafb595?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/a101f4a233d8c1a4c9d37f8b5aafb595?s=73&d=retro", "created": 1536909641, "last_modified": 1632848479}, "last_reply_by": "leafre", "last_touched": 1655094037, "title": "xdm 问个问题上海户口有啥用", "url": "https://www.v2ex.com/t/859060", "created": 1655014956, "deleted": 0, "content": "最近看到政策，似乎上海放宽了入户需求。目前符合要求，但是没感觉户口有什么优势。\r\n不懂这块，有没有大佬解惑", "content_rendered": "<p>最近看到政策，似乎上海放宽了入户需求。目前符合要求，但是没感觉户口有什么优势。\n不懂这块，有没有大佬解惑</p>\n", "last_modified": 1655014956, "replies": 94, "id": 859060}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/e7b2/4b11/360_large.png?m=1641783557", "name": "windows", "avatar_normal": "https://cdn.v2ex.com/navatar/e7b2/4b11/360_normal.png?m=1641783557", "title": "Windows", "url": "https://www.v2ex.com/go/windows", "topics": 2733, "footer": "", "header": "Windows, not walls.", "title_alternative": "Windows", "avatar_mini": "https://cdn.v2ex.com/navatar/e7b2/4b11/360_mini.png?m=1641783557", "stars": 895, "aliases": [], "root": false, "id": 360, "parent_node_name": "os"}, "member": {"id": 563464, "username": "darklinden", "url": "https://www.v2ex.com/u/darklinden", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/b468abcec236c08ef839796de98a1f07?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/b468abcec236c08ef839796de98a1f07?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/b468abcec236c08ef839796de98a1f07?s=73&d=retro", "created": 1637995687, "last_modified": 1655034912}, "last_reply_by": "googl8812", "last_touched": 1655092931, "title": "吐槽： Windows 竟然没有 rsync...", "url": "https://www.v2ex.com/t/859114", "created": 1655035020, "deleted": 0, "content": "今天终于闲了会儿，突发奇想把媳妇闲置很久的本子拿来折腾。\r\n为了不挨打先备份资料，把闲置很久的小米硬盘路由拎出来挂了个 smb ，然后 Windows 下挂载网络磁盘\r\n复制粘贴简直要命，中间 wifi 抽风断了下，40g 的文件夹复制了 20g 过去，看着就蛋疼\r\n掏出 powershell ，rsync ，命令不认识，掏出 mingw64 ，rsync 不认识，网上一查，各种收费版，一个 power shell 版的 github 上 10 年前的，装了还报错...\r\n于是装个 python 然后写个遍历文件夹判断大小不同重新复制\r\n\r\nWindows 下同步文件夹都用什么？总不至于都是各自造的轮子吧？简直了", "content_rendered": "今天终于闲了会儿，突发奇想把媳妇闲置很久的本子拿来折腾。<br />为了不挨打先备份资料，把闲置很久的小米硬盘路由拎出来挂了个 smb ，然后 Windows 下挂载网络磁盘<br />复制粘贴简直要命，中间 wifi 抽风断了下，40g 的文件夹复制了 20g 过去，看着就蛋疼<br />掏出 powershell ，rsync ，命令不认识，掏出 mingw64 ，rsync 不认识，网上一查，各种收费版，一个 power shell 版的 github 上 10 年前的，装了还报错...<br />于是装个 python 然后写个遍历文件夹判断大小不同重新复制<br /><br />Windows 下同步文件夹都用什么？总不至于都是各自造的轮子吧？简直了", "last_modified": 1655061071, "replies": 75, "id": 859114}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1630643913", "name": "apple", "avatar_normal": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1630643913", "title": "Apple", "url": "https://www.v2ex.com/go/apple", "topics": 18697, "footer": "", "header": "设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。", "title_alternative": "Apple", "avatar_mini": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1630643913", "stars": 2191, "aliases": [], "root": false, "id": 184, "parent_node_name": "hardware"}, "member": {"id": 560342, "username": "HansZimmer", "url": "https://www.v2ex.com/u/HansZimmer", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/bf789f6a5c42c9eab00be1c730e4b3ed?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/bf789f6a5c42c9eab00be1c730e4b3ed?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/bf789f6a5c42c9eab00be1c730e4b3ed?s=73&d=retro", "created": 1635753008, "last_modified": 1635753008}, "last_reply_by": "tairan2006", "last_touched": 1655090717, "title": "苹果的刀法越来越精准了，大家的选择焦虑症是增加了还是降低了？", "url": "https://www.v2ex.com/t/859055", "created": 1655010629, "deleted": 0, "content": "苹果现在自研芯片打通了自家产品线后，刀法也越来越准了，看起来需求明确的话，选择产品会很容易，实际情况是不是这样？\r\n\r\n1. iPhone 产品线\r\n需要高刷，高性能，高拍照需求的选 Pro ，但需要忍受更大的手机重量\r\n\r\n2. iPad Pro 产品线\r\n同样需要高刷，高存储容量，高显示（ 12.9 mini LED ）的用户，可以选 Pro 系列，但价格很贵，基本可以摸到 MacBook Pro 14/16 这个产品线\r\n\r\n3. MacBook 产品线\r\n高性能用户选择 MacBook Pro ，代价就是重量更重，价格也贵很多\r\nMacBook Air 系列，现在更轻，显示更好，也更薄，定位很好，希望可以有个 12 寸或者更大的版本出来\r\n今年的 13 寸 MacBook Pro 感觉是个清库存的货色。。不太建议买\r\n\r\n4. iMac 产品线\r\n目前只有 24.5 寸的版本，希望可以扩展 27 甚至 32 版本的普通版\r\n然后 iMac Pro 系列可以出高刷和 mini LED 版本的\r\n\r\n5. Mac mini 和 Studio 系列\r\n目前 Studio 对于普通用户来说有点过于强大\r\n希望 M2 版本的 mac mini 可以缩小体积，并且增加 SD 卡槽\r\n\r\n其他的就不多展开了，苹果自家的显示器回归，特别是“平民款”的产品，是一个好事情。\r\n\r\n\r\n我觉得苹果策略是让普通用户或者专业用户从买一个凑合应对所有场景，到各个场景可以选择不同产品，达到卖更多和圈钱更多的目的。", "content_rendered": "<p>苹果现在自研芯片打通了自家产品线后，刀法也越来越准了，看起来需求明确的话，选择产品会很容易，实际情况是不是这样？</p>\n<ol>\n<li>\n<p>iPhone 产品线\n需要高刷，高性能，高拍照需求的选 Pro ，但需要忍受更大的手机重量</p>\n</li>\n<li>\n<p>iPad Pro 产品线\n同样需要高刷，高存储容量，高显示（ 12.9 mini LED ）的用户，可以选 Pro 系列，但价格很贵，基本可以摸到 MacBook Pro 14/16 这个产品线</p>\n</li>\n<li>\n<p>MacBook 产品线\n高性能用户选择 MacBook Pro ，代价就是重量更重，价格也贵很多\nMacBook Air 系列，现在更轻，显示更好，也更薄，定位很好，希望可以有个 12 寸或者更大的版本出来\n今年的 13 寸 MacBook Pro 感觉是个清库存的货色。。不太建议买</p>\n</li>\n<li>\n<p>iMac 产品线\n目前只有 24.5 寸的版本，希望可以扩展 27 甚至 32 版本的普通版\n然后 iMac Pro 系列可以出高刷和 mini LED 版本的</p>\n</li>\n<li>\n<p>Mac mini 和 Studio 系列\n目前 Studio 对于普通用户来说有点过于强大\n希望 M2 版本的 mac mini 可以缩小体积，并且增加 SD 卡槽</p>\n</li>\n</ol>\n<p>其他的就不多展开了，苹果自家的显示器回归，特别是“平民款”的产品，是一个好事情。</p>\n<p>我觉得苹果策略是让普通用户或者专业用户从买一个凑合应对所有场景，到各个场景可以选择不同产品，达到卖更多和圈钱更多的目的。</p>\n", "last_modified": 1655010650, "replies": 69, "id": 859055}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1651385949", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1651385949", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 49231, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1651385949", "stars": 7852, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 465213, "username": "oser", "url": "https://www.v2ex.com/u/oser", "website": "www.oser.space", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/e7b0/aacd/465213_mini.png?m=1646579699", "avatar_normal": "https://cdn.v2ex.com/avatar/e7b0/aacd/465213_normal.png?m=1646579699", "avatar_large": "https://cdn.v2ex.com/avatar/e7b0/aacd/465213_large.png?m=1646579699", "created": 1579070987, "last_modified": 1646579699}, "last_reply_by": "Dart", "last_touched": 1655093801, "title": "速蛙这是跑路了吗", "url": "https://www.v2ex.com/t/859149", "created": 1655046457, "deleted": 0, "content": "主备官网一个都打不开，以前 clash 的订阅链接也无法访问，tg 群貌似解散了，但是服务器好像没挂，而且 tg 通知群还在发消息，这是什么情况", "content_rendered": "<p>主备官网一个都打不开，以前 clash 的订阅链接也无法访问，tg 群貌似解散了，但是服务器好像没挂，而且 tg 通知群还在发消息，这是什么情况</p>\n", "last_modified": 1655046457, "replies": 65, "id": 859149}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 3218, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 845, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 59091, "username": "klo424", "url": "https://www.v2ex.com/u/klo424", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/13d9/41b7/59091_mini.png?m=1646267791", "avatar_normal": "https://cdn.v2ex.com/avatar/13d9/41b7/59091_normal.png?m=1646267791", "avatar_large": "https://cdn.v2ex.com/avatar/13d9/41b7/59091_large.png?m=1646267791", "created": 1395889389, "last_modified": 1646267791}, "last_reply_by": "ZeawinL", "last_touched": 1655093562, "title": "想买个手机，选哪个？", "url": "https://www.v2ex.com/t/859181", "created": 1655078873, "deleted": 0, "content": "好久没关注手机了，想买个好点的手机，现在用的米 6 当备用机。\r\n\r\n需求：能用 3 年以上，大存储，日常拍照，游戏，看电视剧。\r\n\r\n这几个选项（按心仪顺序排列）：\r\n1.华为 mate 40 pro ，一个是可以支持国产，一是信号好，拍照听说也不错，但现在官方停售了，要不等一等 mate50 ？\r\n2.SONY Xperia 1 IV 5G ，好像是新出的微单手机，可以不用买相机了？可以刷国产系统吗？\r\n3.IPhone 13 ，各方面都挺优秀，但我没用过 ios 系统，而且不怎么喜欢他的操作，最后的选择？\r\n\r\n其实我还是想等一等 mate 50 ，大家觉得如何？", "content_rendered": "<p>好久没关注手机了，想买个好点的手机，现在用的米 6 当备用机。</p>\n<p>需求：能用 3 年以上，大存储，日常拍照，游戏，看电视剧。</p>\n<p>这几个选项（按心仪顺序排列）：\n1.华为 mate 40 pro ，一个是可以支持国产，一是信号好，拍照听说也不错，但现在官方停售了，要不等一等 mate50 ？\n2.SONY Xperia 1 IV 5G ，好像是新出的微单手机，可以不用买相机了？可以刷国产系统吗？\n3.IPhone 13 ，各方面都挺优秀，但我没用过 ios 系统，而且不怎么喜欢他的操作，最后的选择？</p>\n<p>其实我还是想等一等 mate 50 ，大家觉得如何？</p>\n", "last_modified": 1655078873, "replies": 60, "id": 859181}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/0f84/0be9/959_large.png?m=1599117046", "name": "switch", "avatar_normal": "https://cdn.v2ex.com/navatar/0f84/0be9/959_normal.png?m=1599117046", "title": "Nintendo Switch", "url": "https://www.v2ex.com/go/switch", "topics": 401, "footer": "", "header": "任天堂 Switch（日语：ニンテンドースイッチ，英语：Nintendo Switch）是日本任天堂公司出品的电子游戏机，于 2017 年 3 月 3 日开始发售。", "title_alternative": "Nintendo Switch", "avatar_mini": "https://cdn.v2ex.com/navatar/0f84/0be9/959_mini.png?m=1599117046", "stars": 1226, "aliases": [], "root": false, "id": 959, "parent_node_name": "consoles"}, "member": {"id": 151087, "username": "ecloud", "url": "https://www.v2ex.com/u/ecloud", "website": "www.yecloud.net", "twitter": "yecloud", "psn": "", "github": "yecloud", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/c430/bf33/151087_mini.png?m=1654595603", "avatar_normal": "https://cdn.v2ex.com/avatar/c430/bf33/151087_normal.png?m=1654595603", "avatar_large": "https://cdn.v2ex.com/avatar/c430/bf33/151087_large.png?m=1654595603", "created": 1449976367, "last_modified": 1654595603}, "last_reply_by": "Planarians", "last_touched": 1655094153, "title": "我是否真的需要买台 NS？", "url": "https://www.v2ex.com/t/859189", "created": 1655082960, "deleted": 0, "content": "家里没有 windows 电脑，有三台 mac 两台 arm 。几乎不玩网游（除了 pkuxkx 还在玩）。对硬核大作不是太感冒。喜欢玩飞行类游戏、战略类游戏（ steam 上已经有了）和休闲类游戏。平均每天游戏时间大约在 1-2 小时。不想在手机上装任何游戏。\r\n\r\n是否可以考虑购入国行？", "content_rendered": "<p>家里没有 windows 电脑，有三台 mac 两台 arm 。几乎不玩网游（除了 pkuxkx 还在玩）。对硬核大作不是太感冒。喜欢玩飞行类游戏、战略类游戏（ steam 上已经有了）和休闲类游戏。平均每天游戏时间大约在 1-2 小时。不想在手机上装任何游戏。</p>\n<p>是否可以考虑购入国行？</p>\n", "last_modified": 1655082960, "replies": 58, "id": 859189}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1651385949", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1651385949", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 49231, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1651385949", "stars": 7852, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 119683, "username": "realpg", "url": "https://www.v2ex.com/u/realpg", "website": "", "twitter": "", "psn": "", "github": "realpg", "btc": "", "location": "帝都", "tagline": "Nothing", "bio": "Nothing", "avatar_mini": "https://cdn.v2ex.com/avatar/71ee/202d/119683_mini.png?m=1655059011", "avatar_normal": "https://cdn.v2ex.com/avatar/71ee/202d/119683_normal.png?m=1655059011", "avatar_large": "https://cdn.v2ex.com/avatar/71ee/202d/119683_large.png?m=1655059011", "created": 1432975869, "last_modified": 1655059011}, "last_reply_by": "Dart", "last_touched": 1655093868, "title": "哔了狗的 gorm. 很久没用 golang 了，生态这么操蛋么？", "url": "https://www.v2ex.com/t/859178", "created": 1655059703, "deleted": 0, "content": "我已经 6 年没说过脏话了，这次破防了，出口成脏敬请原谅。。\r\n\r\n\r\n\r\n\r\n最近用 golang 的一个项目，天生集成了 gorm 我无从选择。\r\n\r\n有一个需求，嗯，很简单，MYSQL 用一个外键。\r\n\r\n\r\n为什么要用外键？因为他的 orm ，据我初步看文档了解，如果不建立外键对应关系，是不能做 join 的。不让 join 基本 crud 都玩不转啊\r\n\r\n\r\n\r\n\r\n我看了文档，我不是没有英文阅读能力，为了省事，我看中文比较快，嗯，语法很简单\r\n\r\nhttps://gorm.io/zh_CN/docs/index.html\r\n\r\n数据库创建外键很简单\r\n\r\nhttps://i.imgur.com/Srtz8Wd.png\r\n\r\n嗯，我照着做了，不生效\r\n\r\n没准是哪个傻逼翻译中文时候翻译错了\r\n\r\n看英文官方文档，嗯，翻译没错，不生效\r\n\r\n我直接按照文档做了个示例，不生效\r\n\r\n看来这玩意 BUG 了\r\n\r\n我看看我的版本吧，看了下项目引用\r\n\r\nhttps://i.imgur.com/TDQwoQv.png\r\n\r\n1.22.5\r\n\r\n上官方网站\r\n\r\nhttps://i.imgur.com/BX7r8pI.png\r\n\r\n显示最新 1.23.6\r\n\r\n那就找找 changelog ，看看 1.22.5 到 1.23.6 有什么升级。是不是修复了这个 BUG\r\n\r\n嗯嗯，我傻逼了，找了一个小时没找到\r\n\r\n所有关于 changelog what's new 的，都指向一个吹牛逼 gorm v2 有啥新特性的地方\r\n\r\ngithub 呢，没有 release ，只有版本库的 tag ，也没有任何说明\r\n\r\n\r\n因为还有其他地方用着这个版本，竟然前人大佬写死了 1.22.5 ，暂时不敢升级\r\n\r\n\r\n找官方手册，找来找去没找到。找 stackoverflow 之类，找到了一个非官方解决方案\r\n\r\n\r\n用这个方案的关键字去搜索，哇，找到了一个 2018 年的 github issue\r\n\r\n\r\n这个大佬真贴心，原来 2018 年建外键的功能就不好使啊，而且 MYSQL POSTGRES SQLITE 都不好使，你敢信，他官方好像就主要支持这三种数据库！\r\n\r\n\r\nhttps://i.imgur.com/RWSe4sB.png\r\n\r\n\r\n请允许我引用一下\r\n\r\n\r\nYou can use gorm:\"foreignkey:\", but it doesn't create any foreign key, not like primary_key, that's quite counter-intuitive.\r\nYou need use gorm:\"type:int REFERENCES user(id) ON DELETE CASCADE\" for PostgteSQL#450.\r\nYou need use db.Model(Email{}).AddForeignKey(\"user_id\", \"user(id)\", \"CASCADE\", \"CASCADE\") for MySQL, because above tag doesn't work in MySQL.\r\nYou need use gorm:\"type:int REFERENCES user(id) ON DELETE CASCADE\" + db.Exec(\"PRAGMA foreign_keys = ON\") for SQLite because AddForeignKey() doesn't work for SQLite and 'foreign_keys = off' is default setting in SQLite#390.\r\nNone of above things are mentioned in document.\r\nI am still confusing what's the usage of tag gorm:\"foreignkey:XXX\", it doesn't create any foreign key or contribute cascade delete/insert/update/retrieve.\r\n\r\n\r\n2018 年 6 月，现在是 2022 年 6 月，这可真是高效，还没修复\r\n\r\n\r\n好在这个大佬给了一个方式，也就是我之前在 stackoverflow 搜索到的\r\n\r\n\r\nYou need use db.Model(Email{}).AddForeignKey(\"user_id\", \"user(id)\", \"CASCADE\", \"CASCADE\") for MySQL\r\n\r\n\r\n然后我惊奇的发现，GORM 官方把 AddForeignKey()删除了\r\n\r\n\r\n因为没有 changelog ，我也不知道他啥时候删除的\r\n\r\n\r\n这可真是高效 艹", "content_rendered": "我已经 6 年没说过脏话了，这次破防了，出口成脏敬请原谅。。<br /><br /><br /><br /><br />最近用 golang 的一个项目，天生集成了 gorm 我无从选择。<br /><br />有一个需求，嗯，很简单，MYSQL 用一个外键。<br /><br /><br />为什么要用外键？因为他的 orm ，据我初步看文档了解，如果不建立外键对应关系，是不能做 join 的。不让 join 基本 crud 都玩不转啊<br /><br /><br /><br /><br />我看了文档，我不是没有英文阅读能力，为了省事，我看中文比较快，嗯，语法很简单<br /><br /><a target=\"_blank\" href=\"https://gorm.io/zh_CN/docs/index.html\" rel=\"nofollow noopener\">https://gorm.io/zh_CN/docs/index.html</a><br /><br />数据库创建外键很简单<br /><br /><a target=\"_blank\" href=\"https://i.imgur.com/Srtz8Wd.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/Srtz8Wd.png\" class=\"embedded_image\" rel=\"noreferrer\"></a><br /><br />嗯，我照着做了，不生效<br /><br />没准是哪个傻逼翻译中文时候翻译错了<br /><br />看英文官方文档，嗯，翻译没错，不生效<br /><br />我直接按照文档做了个示例，不生效<br /><br />看来这玩意 BUG 了<br /><br />我看看我的版本吧，看了下项目引用<br /><br /><a target=\"_blank\" href=\"https://i.imgur.com/TDQwoQv.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/TDQwoQv.png\" class=\"embedded_image\" rel=\"noreferrer\"></a><br /><br />1.22.5<br /><br />上官方网站<br /><br /><a target=\"_blank\" href=\"https://i.imgur.com/BX7r8pI.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/BX7r8pI.png\" class=\"embedded_image\" rel=\"noreferrer\"></a><br /><br />显示最新 1.23.6<br /><br />那就找找 changelog ，看看 1.22.5 到 1.23.6 有什么升级。是不是修复了这个 BUG<br /><br />嗯嗯，我傻逼了，找了一个小时没找到<br /><br />所有关于 changelog what's new 的，都指向一个吹牛逼 gorm v2 有啥新特性的地方<br /><br />github 呢，没有 release ，只有版本库的 tag ，也没有任何说明<br /><br /><br />因为还有其他地方用着这个版本，竟然前人大佬写死了 1.22.5 ，暂时不敢升级<br /><br /><br />找官方手册，找来找去没找到。找 stackoverflow 之类，找到了一个非官方解决方案<br /><br /><br />用这个方案的关键字去搜索，哇，找到了一个 2018 年的 github issue<br /><br /><br />这个大佬真贴心，原来 2018 年建外键的功能就不好使啊，而且 MYSQL POSTGRES SQLITE 都不好使，你敢信，他官方好像就主要支持这三种数据库！<br /><br /><br /><a target=\"_blank\" href=\"https://i.imgur.com/RWSe4sB.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/RWSe4sB.png\" class=\"embedded_image\" rel=\"noreferrer\"></a><br /><br /><br />请允许我引用一下<br /><br /><br />You can use gorm:\"foreignkey:\", but it doesn't create any foreign key, not like primary_key, that's quite counter-intuitive.<br />You need use gorm:\"type:int REFERENCES user(id) ON DELETE CASCADE\" for PostgteSQL#450.<br />You need use db.Model(Email{}).AddForeignKey(\"user_id\", \"user(id)\", \"CASCADE\", \"CASCADE\") for MySQL, because above tag doesn't work in MySQL.<br />You need use gorm:\"type:int REFERENCES user(id) ON DELETE CASCADE\" + db.Exec(\"PRAGMA foreign_keys = ON\") for SQLite because AddForeignKey() doesn't work for SQLite and 'foreign_keys = off' is default setting in SQLite#390.<br />None of above things are mentioned in document.<br />I am still confusing what's the usage of tag gorm:\"foreignkey:XXX\", it doesn't create any foreign key or contribute cascade delete/insert/update/retrieve.<br /><br /><br />2018 年 6 月，现在是 2022 年 6 月，这可真是高效，还没修复<br /><br /><br />好在这个大佬给了一个方式，也就是我之前在 stackoverflow 搜索到的<br /><br /><br />You need use db.Model(Email{}).AddForeignKey(\"user_id\", \"user(id)\", \"CASCADE\", \"CASCADE\") for MySQL<br /><br /><br />然后我惊奇的发现，GORM 官方把 AddForeignKey()删除了<br /><br /><br />因为没有 changelog ，我也不知道他啥时候删除的<br /><br /><br />这可真是高效 艹", "last_modified": 1655060101, "replies": 51, "id": 859178}]