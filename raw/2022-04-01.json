[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1647188067", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1647188067", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 183046, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1647188067", "stars": 3447, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 66454, "username": "kisshere", "url": "https://www.v2ex.com/u/kisshere", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/6157/5077/66454_mini.png?m=1636418390", "avatar_normal": "https://cdn.v2ex.com/avatar/6157/5077/66454_normal.png?m=1636418390", "avatar_large": "https://cdn.v2ex.com/avatar/6157/5077/66454_large.png?m=1636418390", "created": 1403956444, "last_modified": 1636418390}, "last_reply_by": "tomari", "last_touched": 1648737496, "title": "有没有装 B，便宜，做工还好的手表？", "url": "https://www.v2ex.com/t/844000", "created": 1648687950, "deleted": 0, "content": "几千左右的价格", "content_rendered": "几千左右的价格", "last_modified": 1648687950, "replies": 115, "id": 844000}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6f49/22f4/18_large.png?m=1648461116", "name": "shanghai", "avatar_normal": "https://cdn.v2ex.com/navatar/6f49/22f4/18_normal.png?m=1648461116", "title": "上海", "url": "https://www.v2ex.com/go/shanghai", "topics": 2816, "footer": "", "header": "", "title_alternative": "Shanghai", "avatar_mini": "https://cdn.v2ex.com/navatar/6f49/22f4/18_mini.png?m=1648461116", "stars": 2015, "aliases": [], "root": false, "id": 18, "parent_node_name": "cn"}, "member": {"id": 328908, "username": "olin6520", "url": "https://www.v2ex.com/u/olin6520", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/79a82fcc8caa2923cd56046ea8de1e1f?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/79a82fcc8caa2923cd56046ea8de1e1f?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/79a82fcc8caa2923cd56046ea8de1e1f?s=73&d=retro", "created": 1531461297, "last_modified": 1531461297}, "last_reply_by": "someonetwo", "last_touched": 1648749792, "title": "上海浦东怎么买菜啊！", "url": "https://www.v2ex.com/t/844100", "created": 1648708007, "deleted": 0, "content": "坐标上海浦东金桥，想请教一下各位 v 友是怎么买菜的啊，家里快没菜了。", "content_rendered": "<p>坐标上海浦东金桥，想请教一下各位 v 友是怎么买菜的啊，家里快没菜了。</p>\n", "last_modified": 1648708007, "replies": 97, "id": 844100}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/38af/8613/176_large.png?m=1644885960", "name": "car", "avatar_normal": "https://cdn.v2ex.com/navatar/38af/8613/176_normal.png?m=1644885960", "title": "汽车", "url": "https://www.v2ex.com/go/car", "topics": 1289, "footer": "", "header": "关于买车、开车及汽车文化的技术讨论", "title_alternative": "Car", "avatar_mini": "https://cdn.v2ex.com/navatar/38af/8613/176_mini.png?m=1644885960", "stars": 1268, "aliases": [], "root": false, "id": 176, "parent_node_name": "life"}, "member": {"id": 564488, "username": "YYDASK", "url": "https://www.v2ex.com/u/YYDASK", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/3152ef7ef453d63e3b1a3a66de0c2ddf?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/3152ef7ef453d63e3b1a3a66de0c2ddf?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/3152ef7ef453d63e3b1a3a66de0c2ddf?s=73&d=retro", "created": 1638845993, "last_modified": 1648694289}, "last_reply_by": "ybyq5130123", "last_touched": 1648739468, "title": "各位大佬，对于买车，求分享经验", "url": "https://www.v2ex.com/t/844041", "created": 1648695244, "deleted": 0, "content": "家里的第一辆车，目前看上了雅阁，但有以下几点问题，想请教以下大家\r\n\r\n1 、对于型号和参数该怎么选呢？突然发现自己对买车就跟女生买电脑一样，只会看外观了，虽然知道贵的配置更好，但鉴于根本不懂哪些配置有用，哪些配置没用，怕成了买个 i9+3080 玩扫雷（主要也鉴于预算就 22 23 的样子，也想把钱花在刀刃上）\r\n\r\n2 、目前只在 XX 之家看论坛，看参数这些，价格也仅限于 XX 之家上面写的价格，但这个价格肯定不是提车价格吧，具体市场的价格该去哪里能了解到呢（主要怕去了 4 儿子会被忽悠交钱）\r\n\r\n3 、看别人说能砍价，能要东西，送这样送那样，这是我第一次买车，也是第一次进 4s 店，这砍价有啥诀窍吗？(平时买东西都是 X 宝，超市，都是不砍价的地方，所以没经验)。送的东西这些该如何要，要哪些？就怕买个 iPhone13 送根山寨数据线我还美滋滋。主要确实不懂\r\n\r\n4 、买车过程中需要注意什么，有哪些坑，还望大佬们分享下经验。\r\n\r\n感谢各位", "content_rendered": "<p>家里的第一辆车，目前看上了雅阁，但有以下几点问题，想请教以下大家</p>\n<p>1 、对于型号和参数该怎么选呢？突然发现自己对买车就跟女生买电脑一样，只会看外观了，虽然知道贵的配置更好，但鉴于根本不懂哪些配置有用，哪些配置没用，怕成了买个 i9+3080 玩扫雷（主要也鉴于预算就 22 23 的样子，也想把钱花在刀刃上）</p>\n<p>2 、目前只在 XX 之家看论坛，看参数这些，价格也仅限于 XX 之家上面写的价格，但这个价格肯定不是提车价格吧，具体市场的价格该去哪里能了解到呢（主要怕去了 4 儿子会被忽悠交钱）</p>\n<p>3 、看别人说能砍价，能要东西，送这样送那样，这是我第一次买车，也是第一次进 4s 店，这砍价有啥诀窍吗？(平时买东西都是 X 宝，超市，都是不砍价的地方，所以没经验)。送的东西这些该如何要，要哪些？就怕买个 iPhone13 送根山寨数据线我还美滋滋。主要确实不懂</p>\n<p>4 、买车过程中需要注意什么，有哪些坑，还望大佬们分享下经验。</p>\n<p>感谢各位</p>\n", "last_modified": 1648696825, "replies": 82, "id": 844041}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/70ef/df2e/17_large.png?m=1647187757", "name": "create", "avatar_normal": "https://cdn.v2ex.com/navatar/70ef/df2e/17_normal.png?m=1647187757", "title": "分享创造", "url": "https://www.v2ex.com/go/create", "topics": 17551, "footer": "", "header": "欢迎你在这里发布自己的最新作品！", "title_alternative": "Create", "avatar_mini": "https://cdn.v2ex.com/navatar/70ef/df2e/17_mini.png?m=1647187757", "stars": 4248, "aliases": [], "root": false, "id": 17, "parent_node_name": "geek"}, "member": {"id": 297712, "username": "xsir2020", "url": "https://www.v2ex.com/u/xsir2020", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/1dbe/193d/297712_mini.png?m=1537147346", "avatar_normal": "https://cdn.v2ex.com/avatar/1dbe/193d/297712_normal.png?m=1537147346", "avatar_large": "https://cdn.v2ex.com/avatar/1dbe/193d/297712_large.png?m=1537147346", "created": 1520407576, "last_modified": 1537147346}, "last_reply_by": "Tabjy", "last_touched": 1648747165, "title": "别总是想着 localhost 了，给大家个域名，让大家测试的时候更加有活力", "url": "https://www.v2ex.com/t/844029", "created": 1648693460, "deleted": 0, "content": "解析个 makelove.vip 到 127.0.0.1 让大家测试的时候更加有活力\r\n \r\n泛解析 makelove.vip   127.0.0.1\r\n\r\n\r\nPS C:\\Users\\aaa> ping www.makelove.vip\r\n\r\n正在 Ping www.makelove.vip [127.0.0.1] 具有 32 字节的数据:\r\n\r\n来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128\r\n\r\n来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128\r\n\r\n来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128", "content_rendered": "解析个 makelove.vip 到 127.0.0.1 让大家测试的时候更加有活力<br /> <br />泛解析 makelove.vip   127.0.0.1<br /><br /><br />PS C:\\Users\\aaa&gt; ping www.makelove.vip<br /><br />正在 Ping www.makelove.vip [127.0.0.1] 具有 32 字节的数据:<br /><br />来自 127.0.0.1 的回复: 字节=32 时间&lt;1ms TTL=128<br /><br />来自 127.0.0.1 的回复: 字节=32 时间&lt;1ms TTL=128<br /><br />来自 127.0.0.1 的回复: 字节=32 时间&lt;1ms TTL=128", "last_modified": 1648693480, "replies": 56, "id": 844029}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1648461058", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1648461058", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 48050, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1648461058", "stars": 7761, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 574665, "username": "kuls", "url": "https://www.v2ex.com/u/kuls", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/e6077a4e740c9b6f284b1727ab0f436c?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/e6077a4e740c9b6f284b1727ab0f436c?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/e6077a4e740c9b6f284b1727ab0f436c?s=73&d=retro", "created": 1646718549, "last_modified": 1648381372}, "last_reply_by": "Cielsky", "last_touched": 1648737098, "title": "有没有实际开发编程能力很强，但是不擅长面试的同学？", "url": "https://www.v2ex.com/t/844102", "created": 1648708315, "deleted": 0, "content": "自己从高中开始自学计算机，接触过很多东西。\r\n\r\n大学期间自己在实际开发中也受到过老师的赞同，实习时候也被主管很认可。但是就是面试不太行，老是忘记八股文，也不太会刷题。\r\n\r\n感觉以后得针对性八股文和算法。", "content_rendered": "自己从高中开始自学计算机，接触过很多东西。<br /><br />大学期间自己在实际开发中也受到过老师的赞同，实习时候也被主管很认可。但是就是面试不太行，老是忘记八股文，也不太会刷题。<br /><br />感觉以后得针对性八股文和算法。", "last_modified": 1648708315, "replies": 54, "id": 844102}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/38af/8613/176_large.png?m=1644885960", "name": "car", "avatar_normal": "https://cdn.v2ex.com/navatar/38af/8613/176_normal.png?m=1644885960", "title": "汽车", "url": "https://www.v2ex.com/go/car", "topics": 1289, "footer": "", "header": "关于买车、开车及汽车文化的技术讨论", "title_alternative": "Car", "avatar_mini": "https://cdn.v2ex.com/navatar/38af/8613/176_mini.png?m=1644885960", "stars": 1268, "aliases": [], "root": false, "id": 176, "parent_node_name": "life"}, "member": {"id": 366636, "username": "RiverMud", "url": "https://www.v2ex.com/u/RiverMud", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/0e14/5c25/366636_mini.png?m=1647419001", "avatar_normal": "https://cdn.v2ex.com/avatar/0e14/5c25/366636_normal.png?m=1647419001", "avatar_large": "https://cdn.v2ex.com/avatar/0e14/5c25/366636_large.png?m=1647419001", "avatar_xlarge": "https://cdn.v2ex.com/avatar/0e14/5c25/366636_xlarge.png?m=1647419001", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/0e14/5c25/366636_xlarge.png?m=1647419001", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/0e14/5c25/366636_xlarge.png?m=1647419001", "created": 1543473366, "last_modified": 1647419001}, "last_reply_by": "ShuoHui", "last_touched": 1648746246, "title": "哪里能查到大陆地区销售的支持无线 Carplay 的汽车车型列表？", "url": "https://www.v2ex.com/t/844077", "created": 1648702456, "deleted": 0, "content": "苹果官网有支持 Carplay 的车型列表，好像不是特别准确。而且根据我使用的感觉来看，Carplay 和无线 Carplay 简直就是两个产品。\r\n\r\n过段时间换车肯定是没有无线 Carplay 的车型不考虑，所以哪位知道哪里能查到支持无线 Carplay 的车型列表啊？", "content_rendered": "苹果官网有支持 Carplay 的车型列表，好像不是特别准确。而且根据我使用的感觉来看，Carplay 和无线 Carplay 简直就是两个产品。<br /><br />过段时间换车肯定是没有无线 Carplay 的车型不考虑，所以哪位知道哪里能查到支持无线 Carplay 的车型列表啊？", "last_modified": 1648702456, "replies": 53, "id": 844077}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1648461058", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1648461058", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 48050, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1648461058", "stars": 7761, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 565716, "username": "godleon", "url": "https://www.v2ex.com/u/godleon", "website": null, "twitter": "", "psn": "", "github": "aokleon", "btc": "", "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/30a8279a2701ec6a04ba64c9798ff487?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/30a8279a2701ec6a04ba64c9798ff487?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/30a8279a2701ec6a04ba64c9798ff487?s=73&d=retro", "created": 1639647628, "last_modified": 1647834389}, "last_reply_by": "resol341", "last_touched": 1648742267, "title": "Java 语言代码实现一个最优写法。", "url": "https://www.v2ex.com/t/844140", "created": 1648716546, "deleted": 0, "content": "# 需求\r\n\r\n JAVA 语言， 提供一个静态方法接收动态 Integer 参数，把接收到所有 Integer 不为 Null 的相加 返回总和。\r\n \r\n 支持 stream ，需要一个最优的写法！ 可以评论一下，看看大佬们的代码功底！让我这个菜鸟采纳一下~", "content_rendered": "<h1>需求</h1>\n<p>JAVA 语言， 提供一个静态方法接收动态 Integer 参数，把接收到所有 Integer 不为 Null 的相加 返回总和。</p>\n<p>支持 stream ，需要一个最优的写法！ 可以评论一下，看看大佬们的代码功底！让我这个菜鸟采纳一下~</p>\n", "last_modified": 1648716546, "replies": 43, "id": 844140}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1647188067", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1647188067", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 183046, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1647188067", "stars": 3447, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 560585, "username": "Features", "url": "https://www.v2ex.com/u/Features", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/0616/67df/560585_mini.png?m=1642066760", "avatar_normal": "https://cdn.v2ex.com/avatar/0616/67df/560585_normal.png?m=1642066760", "avatar_large": "https://cdn.v2ex.com/avatar/0616/67df/560585_large.png?m=1642066760", "avatar_xlarge": "https://cdn.v2ex.com/avatar/0616/67df/560585_xlarge.png?m=1642066760", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/0616/67df/560585_xlarge.png?m=1642066760", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/0616/67df/560585_xlarge.png?m=1642066760", "created": 1635920237, "last_modified": 1642066760}, "last_reply_by": "Features", "last_touched": 1648720606, "title": "为什么这段 SQL 代码在 Mysql 失效了， Mysql 不是阻塞的吗？", "url": "https://www.v2ex.com/t/844048", "created": 1648695844, "deleted": 0, "content": "判断表中是否有记录：\r\nSELECT * FROM `order` WHERE  `member_id` = 39  AND `sn` = 20220331783;\r\n无则插入\r\nINSERT INTO `order` SET `sn` = 20220331783 , `member_id` = 39;\r\n有则更新\r\nUPDATE `order` SET `sum` = `sum`+1;\r\n\r\n实际的结果是数据库中有多条相同的 member_id 和 sn\r\n为什么会这样呢？\r\nMysql 不是阻塞的吗？", "content_rendered": "判断表中是否有记录：<br />SELECT * FROM `order` WHERE  `member_id` = 39  AND `sn` = 20220331783;<br />无则插入<br />INSERT INTO `order` SET `sn` = 20220331783 , `member_id` = 39;<br />有则更新<br />UPDATE `order` SET `sum` = `sum`+1;<br /><br />实际的结果是数据库中有多条相同的 member_id 和 sn<br />为什么会这样呢？<br />Mysql 不是阻塞的吗？", "last_modified": 1648695844, "replies": 40, "id": 844048}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4299/8cf3/457_large.png?m=1583583838", "name": "gamedev", "avatar_normal": "https://cdn.v2ex.com/navatar/4299/8cf3/457_normal.png?m=1583583838", "title": "游戏开发", "url": "https://www.v2ex.com/go/gamedev", "topics": 292, "footer": "", "header": "无论你正在制作自己的 indie game，或是在大公司参与 AAA 大作，这里是大家讨论技术和理念的地方。", "title_alternative": "Game Development", "avatar_mini": "https://cdn.v2ex.com/navatar/4299/8cf3/457_mini.png?m=1583583838", "stars": 483, "aliases": [], "root": false, "id": 457, "parent_node_name": "programmer"}, "member": {"id": 498160, "username": "gantleman", "url": "https://www.v2ex.com/u/gantleman", "website": "", "twitter": "", "psn": "", "github": "gantleman", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/a047/de88/498160_mini.png?m=1648714048", "avatar_normal": "https://cdn.v2ex.com/avatar/a047/de88/498160_normal.png?m=1648714048", "avatar_large": "https://cdn.v2ex.com/avatar/a047/de88/498160_large.png?m=1648714048", "created": 1594138809, "last_modified": 1648714048}, "last_reply_by": "documentzhangx66", "last_touched": 1648758311, "title": "MMO 万人同屏实验成功发布！", "url": "https://www.v2ex.com/t/844129", "created": 1648714073, "deleted": 0, "content": "3DMMO 的万人同屏是一个让我激动不已的技术挑战！我是在 08 年关注到了 3DMMO 游戏服务器并行化的问题。并于同年就开始了一系列的技术尝试。软件工程和其他的工程一样。对于新的想法就是反复尝试，反复失败的过程。其实每个游戏服务器工程师都会开发一个自己的软件框架。一来容易维护二来使用方便。我只是比较幸运和执拗，喜欢用自己框架尝试新的想法。“念念不忘，必有回响”，进过一系列的技术改进，终于实现了 3DMMO 的万人同屏。\r\n\r\nluacluster 项目由两部分组成，服务器端的 luacluter 以及客户端的 uacluster_unity3d_demo 。虽然整合了 luajit, uvlib 等大量的第三方的开源库，但开发工作仍然非常的繁重。为了支持跨平台和兼容 unity 的坐标体系等，又做了很多非常复杂的实验。这个项目最大的难点在于，不能简单的把他归为分布式中的计算，存储或传输的任何一类问题。它是要在分布式的计算，存储和传输中寻找到一个恐怖的平衡点。\r\n\r\n在 2020 年我个人曾连续写过 3 篇文章《使用 redis 实现 5 万人同服的“相位技术”》 《 3D 游戏的万人同屏技术详解(1)》 《 3D 游戏的万人同屏技术详解(2)》。这 3 篇文章围绕着一个核心问题。就是如何评估游戏服务器的性能？因为对游戏服务器性能评估的标准模糊，导致了现在游戏服务器技术开发方向的迷失。只有重新确立服务器性能评估标准，才能找回游戏服务器的技术方向。要评估服务器的性能，我们就要给出相应的标准。web 服务器有唯一的通用标准就是在线人数。也就是服务器的承载能力。在完成同样功能下，使用最少的硬件，承载能力越高越稳定的服务器，他的软件性能就越好。\r\n\r\n但对于游戏服务器有着完全和 web 服务器不同的特点。无法使用简单的在线人数来衡量服务器性能。比如在 MMO 下虽然在同一个服务器内，但在不同地图的玩家之间，就几乎不会产生任何性能消耗。如果在极端情况下将每个玩家分别放入一个单独的地图。玩家之间不产生任何的互动。那么服务器的消耗将会非常的低。对应的服务器承载人数就会非常的高。但这种极端类型的服务器无法做出任何 MMO 游戏。所以在 MMO 下对服务器的评价标准，由最初的同服在线人数变为同地图在线人数。\r\n\r\n可是随着无缝大地图技术的出现，这种同地图在线人数的评价标准又无法满足需求了。因为无缝大地图可以将任意整张地图分割为无数小地图。并将每个小地图分别放入不同的服务器。以提高整张大地图的承载能力。但这样的分割算法导致了新的问题。如果这些玩家集中到地图的某个点，服务器就不能正常工作！这就是说虽然整张地图可以承载的人数很高。但这种高承载能力只是一个障眼法。因为地图上某个区块的服务器会因为玩家的聚集而随机的崩溃掉。\r\n\r\n虽然我们有无缝大地图的技术。但因为 AOI （游戏服务器内对象的可见范围）的承载能力很低。在整张大地图内导入过多的玩家会让服务器有崩溃的可能。最终使得服务器的承载能力受限于 AOI 的承载能力。从玩法上说可以在整张地图上导入很多玩家，但这些玩家之不能聚集在一起进行互动。使得整张地图承载能力的意义就非常小了。\r\n\r\n所以对于 MMO 服务器的承载能力判定标准，也就由地图在线人数进一步变成了 AOI 内在线人数，也就是同屏的承载能力。这不是因为产品需求产生的技术路线。并不是因为某个产品需要万人同屏所以我们去研究万人同屏。而是因为我们解决了同服问题，解决了同地图问题，然后遇到了同屏问题。而同屏的问题又变的非常复杂。因为客户端在同屏上遇到了和服务器一样的技术瓶颈，导致在客户端上实现万人同屏也非常困难。客户端和服务器的问题互相纠缠，最终导致我们大多数人都迷失了。而我厌倦了这种对技术方向无休无止的争论。选择了以万人同屏为目标，重新梳理了全部技术栈，形成软件框架并最终使用云服务器完成了测试工作。\r\n\r\n制约万人同屏的技术细节有那些呢？在服务器方面有如下几个问题：无法充分使用线程，异步场景和同步场景混乱，帧同步和状态同步混乱，对象的多个实体数据同步混乱等等。在客户端方面的问题：多线程通信技术不成熟，ECS 技术不成熟，渲染优化技术不成熟等等问题。我认为 MMO 万人同屏的实验成功是游戏软件领域重要的里程碑。将会解锁更多全新的游戏模式。\r\n\r\n当前已经完成了所有基本测试工作，正在整合了 Mongodb 的数据库用于硬盘存储部分功能。接下来会开发增量存储以及传输加密等等功能。这将是一个长期的开发计划，期望最终实现一个通用的分布式 MMO 游戏开发框架。\r\n\r\n行业内历年的数据摘要\r\n\r\n1. 2013 年 bigworld 做过一次压力测试。在同一个地图上，使用 96 台（共 128 核心）服务器，可以承载 10 万个机器人。但每个机器人的 AOI 范围内有 62 个客户端。\r\n\r\n2. 在 2019 年 kbengine 使用两台 8 核服务器，在同一个地图上可以承载 1 万人。AOI 范围内承载能力是 600 个客户端。\r\n\r\n3. 在 2021 年通过进一步改造 kbengine, 实现了并行空间的技术，同样两台 8 核服务器，可以将 AOI 范围内承载能力提升到 1000 个客户端。\r\n\r\n4. luacluter 使用 2 台 128 核服务器，将 AOI 范围内的承载能力提升到了 1 万个客户端。\r\n\r\n开源项目地址\r\n\r\n服务器开源地址： https://github.com/surparallel/luacluster\r\n\r\n客户端开源地址： https://github.com/surparallel/luacluster_unity3d_demo\r\n\r\n名词\r\n1. AOI （ Area Of Interest ） 游戏服务器内对象的可见范围，即服务器内每个对象需要维护的可见和被见列表内对象的范围。当游戏对象发生移动时对应的列表需要增加或删除。维护列表的算法决定了游戏服务器的性能上限。\r\n2. 无缝大地图（ seamless maps ）将一张超大的游戏地图按算法分割成多个小份，并分别由不同硬件服务器维护的算法。可以实现在一个超大地图上承载更多玩家。\r\n3. 并行空间 将一个地图块同时创建到多个硬件服务器中，以提高单个地图块承载人数的上限的算法。\r\n4. 万人同屏（ Unity includes a 10,000 NPC scene ） 在同客户端屏幕内展现 1 万个游戏对象。对于游戏服务器是将 1 万个游戏对象放入 AOI 范围内。\r\n\r\n原文链接： https://zhuanlan.zhihu.com/p/487028752", "content_rendered": "3DMMO 的万人同屏是一个让我激动不已的技术挑战！我是在 08 年关注到了 3DMMO 游戏服务器并行化的问题。并于同年就开始了一系列的技术尝试。软件工程和其他的工程一样。对于新的想法就是反复尝试，反复失败的过程。其实每个游戏服务器工程师都会开发一个自己的软件框架。一来容易维护二来使用方便。我只是比较幸运和执拗，喜欢用自己框架尝试新的想法。“念念不忘，必有回响”，进过一系列的技术改进，终于实现了 3DMMO 的万人同屏。<br /><br />luacluster 项目由两部分组成，服务器端的 luacluter 以及客户端的 uacluster_unity3d_demo 。虽然整合了 luajit, uvlib 等大量的第三方的开源库，但开发工作仍然非常的繁重。为了支持跨平台和兼容 unity 的坐标体系等，又做了很多非常复杂的实验。这个项目最大的难点在于，不能简单的把他归为分布式中的计算，存储或传输的任何一类问题。它是要在分布式的计算，存储和传输中寻找到一个恐怖的平衡点。<br /><br />在 2020 年我个人曾连续写过 3 篇文章《使用 redis 实现 5 万人同服的“相位技术”》 《 3D 游戏的万人同屏技术详解(1)》 《 3D 游戏的万人同屏技术详解(2)》。这 3 篇文章围绕着一个核心问题。就是如何评估游戏服务器的性能？因为对游戏服务器性能评估的标准模糊，导致了现在游戏服务器技术开发方向的迷失。只有重新确立服务器性能评估标准，才能找回游戏服务器的技术方向。要评估服务器的性能，我们就要给出相应的标准。web 服务器有唯一的通用标准就是在线人数。也就是服务器的承载能力。在完成同样功能下，使用最少的硬件，承载能力越高越稳定的服务器，他的软件性能就越好。<br /><br />但对于游戏服务器有着完全和 web 服务器不同的特点。无法使用简单的在线人数来衡量服务器性能。比如在 MMO 下虽然在同一个服务器内，但在不同地图的玩家之间，就几乎不会产生任何性能消耗。如果在极端情况下将每个玩家分别放入一个单独的地图。玩家之间不产生任何的互动。那么服务器的消耗将会非常的低。对应的服务器承载人数就会非常的高。但这种极端类型的服务器无法做出任何 MMO 游戏。所以在 MMO 下对服务器的评价标准，由最初的同服在线人数变为同地图在线人数。<br /><br />可是随着无缝大地图技术的出现，这种同地图在线人数的评价标准又无法满足需求了。因为无缝大地图可以将任意整张地图分割为无数小地图。并将每个小地图分别放入不同的服务器。以提高整张大地图的承载能力。但这样的分割算法导致了新的问题。如果这些玩家集中到地图的某个点，服务器就不能正常工作！这就是说虽然整张地图可以承载的人数很高。但这种高承载能力只是一个障眼法。因为地图上某个区块的服务器会因为玩家的聚集而随机的崩溃掉。<br /><br />虽然我们有无缝大地图的技术。但因为 AOI （游戏服务器内对象的可见范围）的承载能力很低。在整张大地图内导入过多的玩家会让服务器有崩溃的可能。最终使得服务器的承载能力受限于 AOI 的承载能力。从玩法上说可以在整张地图上导入很多玩家，但这些玩家之不能聚集在一起进行互动。使得整张地图承载能力的意义就非常小了。<br /><br />所以对于 MMO 服务器的承载能力判定标准，也就由地图在线人数进一步变成了 AOI 内在线人数，也就是同屏的承载能力。这不是因为产品需求产生的技术路线。并不是因为某个产品需要万人同屏所以我们去研究万人同屏。而是因为我们解决了同服问题，解决了同地图问题，然后遇到了同屏问题。而同屏的问题又变的非常复杂。因为客户端在同屏上遇到了和服务器一样的技术瓶颈，导致在客户端上实现万人同屏也非常困难。客户端和服务器的问题互相纠缠，最终导致我们大多数人都迷失了。而我厌倦了这种对技术方向无休无止的争论。选择了以万人同屏为目标，重新梳理了全部技术栈，形成软件框架并最终使用云服务器完成了测试工作。<br /><br />制约万人同屏的技术细节有那些呢？在服务器方面有如下几个问题：无法充分使用线程，异步场景和同步场景混乱，帧同步和状态同步混乱，对象的多个实体数据同步混乱等等。在客户端方面的问题：多线程通信技术不成熟，ECS 技术不成熟，渲染优化技术不成熟等等问题。我认为 MMO 万人同屏的实验成功是游戏软件领域重要的里程碑。将会解锁更多全新的游戏模式。<br /><br />当前已经完成了所有基本测试工作，正在整合了 Mongodb 的数据库用于硬盘存储部分功能。接下来会开发增量存储以及传输加密等等功能。这将是一个长期的开发计划，期望最终实现一个通用的分布式 MMO 游戏开发框架。<br /><br />行业内历年的数据摘要<br /><br />1. 2013 年 bigworld 做过一次压力测试。在同一个地图上，使用 96 台（共 128 核心）服务器，可以承载 10 万个机器人。但每个机器人的 AOI 范围内有 62 个客户端。<br /><br />2. 在 2019 年 kbengine 使用两台 8 核服务器，在同一个地图上可以承载 1 万人。AOI 范围内承载能力是 600 个客户端。<br /><br />3. 在 2021 年通过进一步改造 kbengine, 实现了并行空间的技术，同样两台 8 核服务器，可以将 AOI 范围内承载能力提升到 1000 个客户端。<br /><br />4. luacluter 使用 2 台 128 核服务器，将 AOI 范围内的承载能力提升到了 1 万个客户端。<br /><br />开源项目地址<br /><br />服务器开源地址： <a target=\"_blank\" href=\"https://github.com/surparallel/luacluster\" rel=\"nofollow noopener\">https://github.com/surparallel/luacluster</a><br /><br />客户端开源地址： <a target=\"_blank\" href=\"https://github.com/surparallel/luacluster_unity3d_demo\" rel=\"nofollow noopener\">https://github.com/surparallel/luacluster_unity3d_demo</a><br /><br />名词<br />1. AOI （ Area Of Interest ） 游戏服务器内对象的可见范围，即服务器内每个对象需要维护的可见和被见列表内对象的范围。当游戏对象发生移动时对应的列表需要增加或删除。维护列表的算法决定了游戏服务器的性能上限。<br />2. 无缝大地图（ seamless maps ）将一张超大的游戏地图按算法分割成多个小份，并分别由不同硬件服务器维护的算法。可以实现在一个超大地图上承载更多玩家。<br />3. 并行空间 将一个地图块同时创建到多个硬件服务器中，以提高单个地图块承载人数的上限的算法。<br />4. 万人同屏（ Unity includes a 10,000 NPC scene ） 在同客户端屏幕内展现 1 万个游戏对象。对于游戏服务器是将 1 万个游戏对象放入 AOI 范围内。<br /><br />原文链接： <a target=\"_blank\" href=\"https://zhuanlan.zhihu.com/p/487028752\" rel=\"nofollow noopener\">https://zhuanlan.zhihu.com/p/487028752</a>", "last_modified": 1648714073, "replies": 37, "id": 844129}]