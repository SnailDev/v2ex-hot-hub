[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 202919, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3796, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 450458, "username": "klown", "url": "https://www.v2ex.com/u/klown", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/511c/c8a9/450458_mini.png?m=1589204747", "avatar_normal": "https://cdn.v2ex.com/avatar/511c/c8a9/450458_normal.png?m=1589204747", "avatar_large": "https://cdn.v2ex.com/avatar/511c/c8a9/450458_large.png?m=1589204747", "created": 1572524873, "last_modified": 1589204747}, "last_reply_by": "klown", "last_touched": 1683791325, "title": "本人三线小牙医一枚，有什么牙齿或者口腔问题可以评论提问，有时间会过来给大家解答😄", "url": "https://www.v2ex.com/t/939058", "created": 1683735498, "deleted": 0, "content": "", "content_rendered": "", "last_modified": 1683735498, "replies": 153, "id": 939058}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 4309, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1117, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 312169, "username": "kaiseryang", "url": "https://www.v2ex.com/u/kaiseryang", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/97942b14f144788878e87e9cd6755586?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/97942b14f144788878e87e9cd6755586?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/97942b14f144788878e87e9cd6755586?s=73&d=retro", "created": 1524807628, "last_modified": 1524807628}, "last_reply_by": "ttwxdly", "last_touched": 1683792210, "title": "如果不考虑生活成本，大家最想居住的城市是哪里", "url": "https://www.v2ex.com/t/939083", "created": 1683768996, "deleted": 0, "content": "", "content_rendered": "", "last_modified": 1683768996, "replies": 117, "id": 939083}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 202919, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3796, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 439019, "username": "iPhone11", "url": "https://www.v2ex.com/u/iPhone11", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/22f4282be66c71a126ed01146129d960?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/22f4282be66c71a126ed01146129d960?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/22f4282be66c71a126ed01146129d960?s=73&d=retro", "created": 1567281125, "last_modified": 1567281125}, "last_reply_by": "msg7086", "last_touched": 1683792190, "title": "有人科普 v.ps 和 xTom 老板郭秀峰的瓜吗?好奇 竟然能引起千人众怒 我记得老板也在 v2 就是 smms ipsb 的作者", "url": "https://www.v2ex.com/t/939029", "created": 1683727659, "deleted": 0, "content": "@Showfom  大佬 这怎么回事,你还上信号旗新闻了\r\n\r\n\r\n看评论区总结了下\r\n\r\n**主要歧视中国人**\r\n\r\n1.移民澳洲 不承认是中国人 并且不允许别人叫他中文名字 因现在有了英文名字\r\n\r\n2.黑五清退了所有中国用户,发现中国 IP 注册就封号\r\n\r\n3.Paypal 过 6 个月争议期再要求 KYC 实名认证水电单,不提供则封号\r\n\r\n4.不能说 v.ps 不好,否则拉黑封号\r\n\r\n5.言而无信,多人证据实锤\r\n\r\n# 下图来自 tg 评论区  我不是作者啊  我纯吃瓜群众 \r\n\r\n![image.png]( https://i.imgur.com/1sqz56f.png)\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_8b314e96d34076d9d857b41ab3a19edf.png)\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_9fa67a85e5e0f75d4842d9bdda0f4ed6.png)\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_6e3b5518ff1d7e538a0222b5df0855e8.png)\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_9382cb4cf85f51c9506fa22ea85cedd4.png)\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_7926a0163936104254be4e2b8280402a.png)\r\n\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_0ecffcfd2a33bc2798d493e8e1197e60.png)\r\n\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_bae78de6b75f82bf468ab1f1aab87210.png)\r\n![image.png]( https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_6a1e720a1fdb210896fac87b20d0c04b.png)\r\n\r\n\r\n\r\n\r\n# 还有很多不发了,太多了,感觉和不久前发生的宝马冰淇淋事件一个样,前几天的瓜我今晚才吃到,瓜田里乱跳的猹", "content_rendered": "<p>@<a href=\"/member/Showfom\">Showfom</a>  大佬 这怎么回事,你还上信号旗新闻了</p>\n<p>看评论区总结了下</p>\n<p><strong>主要歧视中国人</strong></p>\n<p>1.移民澳洲 不承认是中国人 并且不允许别人叫他中文名字 因现在有了英文名字</p>\n<p>2.黑五清退了所有中国用户,发现中国 IP 注册就封号</p>\n<p>3.Paypal 过 6 个月争议期再要求 KYC 实名认证水电单,不提供则封号</p>\n<p>4.不能说 <a href=\"http://v.ps\" rel=\"nofollow\">v.ps</a> 不好,否则拉黑封号</p>\n<p>5.言而无信,多人证据实锤</p>\n<h1>下图来自 tg 评论区  我不是作者啊  我纯吃瓜群众</h1>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.imgur.com/1sqz56f.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_8b314e96d34076d9d857b41ab3a19edf.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_9fa67a85e5e0f75d4842d9bdda0f4ed6.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_6e3b5518ff1d7e538a0222b5df0855e8.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_9382cb4cf85f51c9506fa22ea85cedd4.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_7926a0163936104254be4e2b8280402a.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_0ecffcfd2a33bc2798d493e8e1197e60.png\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_bae78de6b75f82bf468ab1f1aab87210.png\"/>\n<img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://openai-75050.gzc.vod.tencent-cloud.com/openaiassets_6a1e720a1fdb210896fac87b20d0c04b.png\"/></p>\n<h1>还有很多不发了,太多了,感觉和不久前发生的宝马冰淇淋事件一个样,前几天的瓜我今晚才吃到,瓜田里乱跳的猹</h1>\n", "last_modified": 1683727659, "replies": 107, "id": 939029}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/9f53/d83e/931_large.png?m=1584400476", "name": "remodel", "avatar_normal": "https://cdn.v2ex.com/navatar/9f53/d83e/931_normal.png?m=1584400476", "title": "装修", "url": "https://www.v2ex.com/go/remodel", "topics": 187, "footer": "", "header": "房屋装饰与装修", "title_alternative": "装修", "avatar_mini": "https://cdn.v2ex.com/navatar/9f53/d83e/931_mini.png?m=1584400476", "stars": 227, "aliases": [], "root": false, "id": 931, "parent_node_name": "life"}, "member": {"id": 224910, "username": "noparking188", "url": "https://www.v2ex.com/u/noparking188", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "咸鱼，学渣", "avatar_mini": "https://cdn.v2ex.com/avatar/92a5/cf19/224910_mini.png?m=1555207193", "avatar_normal": "https://cdn.v2ex.com/avatar/92a5/cf19/224910_normal.png?m=1555207193", "avatar_large": "https://cdn.v2ex.com/avatar/92a5/cf19/224910_large.png?m=1555207193", "created": 1491575430, "last_modified": 1555207193}, "last_reply_by": "iovekkk", "last_touched": 1683792350, "title": "618 快到了，下个月交房，家电家具有没有推荐的，谢谢", "url": "https://www.v2ex.com/t/939117", "created": 1683773999, "deleted": 0, "content": "618 要到了，买的期房还了两年贷款下个月也要交房了，精装修的，打算简单搞搞买点家电家具九搬进去住了，省省钱。\r\n\r\n暂时整理了一些，欢迎各位老哥推荐。\r\n\r\n## 待购清单：\r\n\r\n![清单]( https://i.imgur.com/gWBBKC9.png)\r\n\r\n## 家电篇\r\n\r\n#### 电视\r\n\r\n小米 ES pro 86 英寸，准备 6500 ～ 6800 入手，有限预算内追求极致大。\r\n\r\n#### 冰箱\r\n冰箱还没决定好，看了张大妈各种文章觉得美的微晶挺好的，蹲上渠道价就完美了。\r\n\r\n#### 洗衣机、烘干机\r\n\r\n张大妈文章看了很多篇，还是理不清，随便挑了个小天鹅。\r\n\r\n- [ [小天鹅 TG100VT86WMAD5+TH100VTH35 ] 小天鹅（ LittleSwan ） 10kg 变频滚筒洗衣机+热泵烘干机家用 水魔方 除菌除螨 护色护形 京东小家 TG100VT86WMAD5 洗烘套装 [行情 报价 价格 评测] -京东 (jd.com)]( https://item.jd.com/100026319734.html)\r\n\r\n#### 空调\r\n空调直接京东闭眼挑了销量最高的格力的款：\r\n- [ [格力 KFR-35GW/NhGc1B ] 格力（ GREE ） 1.5 匹 云佳 新一级能效 变频冷暖 自清洁 壁挂式空调挂机 KFR-35GW/NhGc1B  [行情 报价 价格 评测] -京东 (jd.com)]( https://item.jd.com/100019386660.html)\r\n- [ [格力 KFR-72LW/NhGm1BAj ] 格力（ GREE ）空调 京东小家智能生态 3 匹 云逸-Ⅱ 1 级能效 客厅空调立式空调柜机 KFR-72LW/NhGm1BAj  [行情 报价 价格 评测] -京东 (jd.com)]( https://item.jd.com/100010607429.html)\r\n\r\n#### 燃气热水器\r\n燃气热水器京东闭眼挑了美的和万和的销量王：\r\n- [ [万和 JSQ30-S7D16 ] 万和（ Vanward ） 16 升零冷水燃气热水器天然气恒温仓小魔方分屏浴控三重防冻 JSQ30-S7D16  [行情 报价 价格 评测] -京东 (jd.com)]( https://item.jd.com/100020997674.html)\r\n- [ [美的 JSLQ27-16LNT ] 美的（ Midea ） 16 升燃气热水器 天然气 超一级能效 增压零冷水 水伺服 恒温节能 JSLQ27-16LNT  [行情 报价 价格 评测] -京东 (jd.com)]( https://item.jd.com/100044721883.html)\r\n\r\n## 家具篇\r\n\r\n除了主卧床和升降桌准备木小北，其它都是二木黑作的，感觉二木的更好看，款式多。\r\n\r\n次卧准备买一个价位三千的源氏木语储物床。\r\n\r\n#### 床垫\r\n\r\n看了腿毛的科普推荐，意向喜临门白骑士，蹲一个低价。\r\n\r\n#### 衣柜\r\n\r\n决定宜家博阿克塞这种，B 站看了视频觉得很灵活实用，还环保省钱，选了两个品牌到时候对比下。\r\n\r\n## 最后\r\n\r\n以上都用比价软件记好了历史最低价，蹲底价下单。", "content_rendered": "<p>618 要到了，买的期房还了两年贷款下个月也要交房了，精装修的，打算简单搞搞买点家电家具九搬进去住了，省省钱。</p>\n<p>暂时整理了一些，欢迎各位老哥推荐。</p>\n<h2>待购清单：</h2>\n<p><img alt=\"清单\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.imgur.com/gWBBKC9.png\"/></p>\n<h2>家电篇</h2>\n<h4>电视</h4>\n<p>小米 ES pro 86 英寸，准备 6500 ～ 6800 入手，有限预算内追求极致大。</p>\n<h4>冰箱</h4>\n<p>冰箱还没决定好，看了张大妈各种文章觉得美的微晶挺好的，蹲上渠道价就完美了。</p>\n<h4>洗衣机、烘干机</h4>\n<p>张大妈文章看了很多篇，还是理不清，随便挑了个小天鹅。</p>\n<ul>\n<li><a href=\"https://item.jd.com/100026319734.html\" rel=\"nofollow\"> [小天鹅 TG100VT86WMAD5+TH100VTH35 ] 小天鹅（ LittleSwan ） 10kg 变频滚筒洗衣机+热泵烘干机家用 水魔方 除菌除螨 护色护形 京东小家 TG100VT86WMAD5 洗烘套装 [行情 报价 价格 评测] -京东 (jd.com)</a></li>\n</ul>\n<h4>空调</h4>\n<p>空调直接京东闭眼挑了销量最高的格力的款：</p>\n<ul>\n<li><a href=\"https://item.jd.com/100019386660.html\" rel=\"nofollow\"> [格力 KFR-35GW/NhGc1B ] 格力（ GREE ） 1.5 匹 云佳 新一级能效 变频冷暖 自清洁 壁挂式空调挂机 KFR-35GW/NhGc1B  [行情 报价 价格 评测] -京东 (jd.com)</a></li>\n<li><a href=\"https://item.jd.com/100010607429.html\" rel=\"nofollow\"> [格力 KFR-72LW/NhGm1BAj ] 格力（ GREE ）空调 京东小家智能生态 3 匹 云逸-Ⅱ 1 级能效 客厅空调立式空调柜机 KFR-72LW/NhGm1BAj  [行情 报价 价格 评测] -京东 (jd.com)</a></li>\n</ul>\n<h4>燃气热水器</h4>\n<p>燃气热水器京东闭眼挑了美的和万和的销量王：</p>\n<ul>\n<li><a href=\"https://item.jd.com/100020997674.html\" rel=\"nofollow\"> [万和 JSQ30-S7D16 ] 万和（ Vanward ） 16 升零冷水燃气热水器天然气恒温仓小魔方分屏浴控三重防冻 JSQ30-S7D16  [行情 报价 价格 评测] -京东 (jd.com)</a></li>\n<li><a href=\"https://item.jd.com/100044721883.html\" rel=\"nofollow\"> [美的 JSLQ27-16LNT ] 美的（ Midea ） 16 升燃气热水器 天然气 超一级能效 增压零冷水 水伺服 恒温节能 JSLQ27-16LNT  [行情 报价 价格 评测] -京东 (jd.com)</a></li>\n</ul>\n<h2>家具篇</h2>\n<p>除了主卧床和升降桌准备木小北，其它都是二木黑作的，感觉二木的更好看，款式多。</p>\n<p>次卧准备买一个价位三千的源氏木语储物床。</p>\n<h4>床垫</h4>\n<p>看了腿毛的科普推荐，意向喜临门白骑士，蹲一个低价。</p>\n<h4>衣柜</h4>\n<p>决定宜家博阿克塞这种，B 站看了视频觉得很灵活实用，还环保省钱，选了两个品牌到时候对比下。</p>\n<h2>最后</h2>\n<p>以上都用比价软件记好了历史最低价，蹲底价下单。</p>\n", "last_modified": 1683773999, "replies": 84, "id": 939117}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c9e1/074f/104_large.png?m=1678761388", "name": "cloud", "avatar_normal": "https://cdn.v2ex.com/navatar/c9e1/074f/104_normal.png?m=1678761388", "title": "云计算", "url": "https://www.v2ex.com/go/cloud", "topics": 5056, "footer": "", "header": "关于云计算技术和平台的综合讨论区。", "title_alternative": "Cloud Computing", "avatar_mini": "https://cdn.v2ex.com/navatar/c9e1/074f/104_mini.png?m=1678761388", "stars": 3007, "aliases": [], "root": false, "id": 104, "parent_node_name": "webmaster"}, "member": {"id": 595319, "username": "MFWT", "url": "https://www.v2ex.com/u/MFWT", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/e8fd/8801/595319_mini.png?m=1679882347", "avatar_normal": "https://cdn.v2ex.com/avatar/e8fd/8801/595319_normal.png?m=1679882347", "avatar_large": "https://cdn.v2ex.com/avatar/e8fd/8801/595319_large.png?m=1679882347", "avatar_xlarge": "https://cdn.v2ex.com/avatar/e8fd/8801/595319_xlarge.png?m=1679882347", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/e8fd/8801/595319_xlarge.png?m=1679882347", "created": 1664105935, "last_modified": 1679882347}, "last_reply_by": "nightwitch", "last_touched": 1683791929, "title": "实录：公有云环境碰上 SSH 攻击的盛况", "url": "https://www.v2ex.com/t/939018", "created": 1683725627, "deleted": 0, "content": "## 背景\r\n香港主力加密代理小鸡，系统自带 Fail2Ban 。虽然说密码强度足够，也未泄露，而且机器对外只提供 SSH 登录和酸酸服务，炸了也不心疼  \r\n但是，还是感觉心里发毛，于是大约三天前上了密钥登录，关掉了密码登录  \r\n干完这件事之后，我一时兴起，决定看看登录日志，看看 SSH 失败登录的情况到底有多严重  \r\n不看不知道，一看吓一跳，只能说这机器活到现在，那个复杂的密码真的是辛苦他了.....\r\n\r\n## 简单统计\r\n统计周期：从 4/30 到今天（ 5/10 ），也就是十天左右的时间  \r\n1.  服务器记录了八万多行的登录日志，按平均一次登录尝试打 5 条 log 算，这十天遭受了**超过 1.5 万次**的 SSH 爆破\r\n2.  用 Python 做了脚本**（脚本在文末）**，简单分析了一下日志，导出并去重之后测出了**1644 个尝试用于登录的用户名**。这里从文件中列举几个常见的和不常见的：\r\n\r\n* 常见的：  \r\nroot 12345 abc aaa zzz user ftpuser ftpuser1 test nginx linux toor guest admin pi orangepi\r\n\r\n* 不常见的：  \r\njulia jon jvj jiankong miguel pablo riad niklas RYSN_zhongying matheus\r\n\r\n 还是那个日志，统计了连上来的**493 个 IP**，择取归属地数量前五的如下：\r\n>\r\n    us 99\r\n    cn 70\r\n    kr 48\r\n    au 33\r\n    de 25\r\n\r\n举两个例子，美国可能是因为 VPS 较为低价，人们大量购买（建站，加密代理之类的），但安全措施没有做足（简单用户名，简单密码，没有 Fail2Ban 等防护软件 —— 至于你说是不是 22 端口，我感觉关系不大，**毕竟 SSH 不防主动探测**，换个端口，可能消停两天又开始了），导致成为了别人的肉鸡\r\n\r\n至于中国 IP ，从具体属地等信息来看，不乏家宽 IP 。推测除了购买家宽代理之外，也有可能是用户电脑由于安装了各种流氓软件等等原因，成为了人家的肉鸡\r\n\r\n## 众生百态\r\n分析日志让人哑然失笑，此处列举几个登陆攻击的行为，与君共赏——\r\n\r\n### 这是不知所云（非 SSH 请求发到了 SSH 端口）\r\n>\r\n    sshd[895175]: error: kex_exchange_identification: banner line contains invalid characters\r\n    sshd[895175]: banner exchange: Connection from 213.*.*.98 port 64661: invalid format\r\n\r\n### 这是知难而退（服务器关闭了密码登录）\r\n>\r\n    sshd[894967]: Received disconnect from 134.*.*.178 port 58562:11: Bye Bye [preauth]\r\n    sshd[894967]: Disconnected from authenticating user root 134.*.*.178 port 58562 [preauth]\r\n    sshd[894969]: Received disconnect from 192.*.*.50 port 51560:11: Bye Bye [preauth]\r\n    sshd[894969]: Disconnected from authenticating user root 192.*.*.50 port 51560 [preauth]\r\n    sshd[894971]: Received disconnect from 200.*.*.234 port 51036:11: Bye Bye [preauth]\r\n    sshd[894971]: Disconnected from authenticating user root 200.*.*.234 port 51036 [preauth]\r\n\r\n### 这是爱如潮水（注意 IP 和时间）\r\n>\r\n    20:00:23 - sshd[895661]: Invalid user dockeradmin from 144.*.*.23 port 40902\r\n    20:00:23 - sshd[895666]: Invalid user ubnt from 144.*.*.23 port 40990\r\n    20:00:23 - sshd[895673]: Invalid user steam from 144.*.*.23 port 41008\r\n    .....\r\n    20:00:23 - sshd[895678]: Invalid user postgres from 144.*.*.23 port 40994\r\n    ......\r\n    20:00:23 - sshd[895659]: Connection closed by invalid user devops 144.*.*.23 port 40862 [preauth]\r\n    ......\r\n    20:00:23 - sshd[895668]: Connection closed by invalid user zjw 144.*.*.23 port 41004 [preauth]\r\n\r\n\r\n### 这是锲而不舍（同一用户名不同密码多次登录）\r\n>\r\n    sshd[912780]: Disconnecting authenticating user root 59.*.*.186 port 52862: Too many authentication failures [preauth]\r\n    sshd[912782]: error: maximum authentication attempts exceeded for root from 59.102.161.186 port 52911 ssh2 [preauth]\r\n\r\n\r\n### 这是老子！\r\n>\r\n    sshd[921821]: Accepted publickey for root from 2409:****:****:**** port 6**** ssh2: RSA SHA256:****....\r\n    sshd[921821]: pam_unix(sshd:session): session opened for user root(uid=0) by (uid=0)\r\n    systemd-logind[331]: New session **** of user root.\r\n\r\n\r\n## 后日谈\r\n我感觉，最根本的防止被爆破 SSH 成功的方法只有三个：\r\n\r\n1. 不允许非授权的 IP 连接\r\n2. 使用足够长的私钥（比如 4096Bit ）代替密码进行验证\r\n3. 不开放 SSH 登录端口（比如，通过 VPN 连入内网环境后再登录）\r\n\r\n虽然说这台机器只是酸酸机，但是鬼知道被爆破后会不会变成下一台肉鸡？\r\n世事难料，不如小心行船，方得万年平安  \r\n又或许，我可以允许任意用户名通过，然后连上来的用户都用 ASCII 播放一遍鸡你太美？\r\n\r\n后附统计脚本\r\n```python\r\n\r\nfilename = 'auth.log'\r\n\r\nfor line in open(filename, \"r\"):\r\n\r\n    if(line.find('sshd') == -1):\r\n        #非 SSHD 日志，跳过\r\n        continue\r\n\r\n    if(line.find('Invalid user') != -1):\r\n        #空格分隔后的日志，第五和第七位是用户名和 IP 信息\r\n        #实际检测请根据实际情况修改截断格式\r\n        print(line.split(\" \")[5] + \",\" + line.split(\" \")[7])\r\n\r\n\r\n```\r\n\r\n深山踏红叶，耳畔闻鹿鸣  \r\n全文完，感谢阅读", "content_rendered": "<h2>背景</h2>\n<p>香港主力加密代理小鸡，系统自带 Fail2Ban 。虽然说密码强度足够，也未泄露，而且机器对外只提供 SSH 登录和酸酸服务，炸了也不心疼<br/>\n但是，还是感觉心里发毛，于是大约三天前上了密钥登录，关掉了密码登录<br/>\n干完这件事之后，我一时兴起，决定看看登录日志，看看 SSH 失败登录的情况到底有多严重<br/>\n不看不知道，一看吓一跳，只能说这机器活到现在，那个复杂的密码真的是辛苦他了.....</p>\n<h2>简单统计</h2>\n<p>统计周期：从 4/30 到今天（ 5/10 ），也就是十天左右的时间  </p>\n<ol>\n<li>服务器记录了八万多行的登录日志，按平均一次登录尝试打 5 条 log 算，这十天遭受了<strong>超过 1.5 万次</strong>的 SSH 爆破</li>\n<li>用 Python 做了脚本<strong>（脚本在文末）</strong>，简单分析了一下日志，导出并去重之后测出了<strong>1644 个尝试用于登录的用户名</strong>。这里从文件中列举几个常见的和不常见的：</li>\n</ol>\n<ul>\n<li>\n<p>常见的：<br/>\nroot 12345 abc aaa zzz user ftpuser ftpuser1 test nginx linux toor guest admin pi orangepi</p>\n</li>\n<li>\n<p>不常见的：<br/>\njulia jon jvj jiankong miguel pablo riad niklas RYSN_zhongying matheus</p>\n</li>\n</ul>\n<p>还是那个日志，统计了连上来的<strong>493 个 IP</strong>，择取归属地数量前五的如下：</p>\n<blockquote>\n</blockquote>\n<pre><code>us 99\ncn 70\nkr 48\nau 33\nde 25\n</code></pre>\n<p>举两个例子，美国可能是因为 VPS 较为低价，人们大量购买（建站，加密代理之类的），但安全措施没有做足（简单用户名，简单密码，没有 Fail2Ban 等防护软件 —— 至于你说是不是 22 端口，我感觉关系不大，<strong>毕竟 SSH 不防主动探测</strong>，换个端口，可能消停两天又开始了），导致成为了别人的肉鸡</p>\n<p>至于中国 IP ，从具体属地等信息来看，不乏家宽 IP 。推测除了购买家宽代理之外，也有可能是用户电脑由于安装了各种流氓软件等等原因，成为了人家的肉鸡</p>\n<h2>众生百态</h2>\n<p>分析日志让人哑然失笑，此处列举几个登陆攻击的行为，与君共赏——</p>\n<h3>这是不知所云（非 SSH 请求发到了 SSH 端口）</h3>\n<blockquote>\n</blockquote>\n<pre><code>sshd[895175]: error: kex_exchange_identification: banner line contains invalid characters\nsshd[895175]: banner exchange: Connection from 213.*.*.98 port 64661: invalid format\n</code></pre>\n<h3>这是知难而退（服务器关闭了密码登录）</h3>\n<blockquote>\n</blockquote>\n<pre><code>sshd[894967]: Received disconnect from 134.*.*.178 port 58562:11: Bye Bye [preauth]\nsshd[894967]: Disconnected from authenticating user root 134.*.*.178 port 58562 [preauth]\nsshd[894969]: Received disconnect from 192.*.*.50 port 51560:11: Bye Bye [preauth]\nsshd[894969]: Disconnected from authenticating user root 192.*.*.50 port 51560 [preauth]\nsshd[894971]: Received disconnect from 200.*.*.234 port 51036:11: Bye Bye [preauth]\nsshd[894971]: Disconnected from authenticating user root 200.*.*.234 port 51036 [preauth]\n</code></pre>\n<h3>这是爱如潮水（注意 IP 和时间）</h3>\n<blockquote>\n</blockquote>\n<pre><code>20:00:23 - sshd[895661]: Invalid user dockeradmin from 144.*.*.23 port 40902\n20:00:23 - sshd[895666]: Invalid user ubnt from 144.*.*.23 port 40990\n20:00:23 - sshd[895673]: Invalid user steam from 144.*.*.23 port 41008\n.....\n20:00:23 - sshd[895678]: Invalid user postgres from 144.*.*.23 port 40994\n......\n20:00:23 - sshd[895659]: Connection closed by invalid user devops 144.*.*.23 port 40862 [preauth]\n......\n20:00:23 - sshd[895668]: Connection closed by invalid user zjw 144.*.*.23 port 41004 [preauth]\n</code></pre>\n<h3>这是锲而不舍（同一用户名不同密码多次登录）</h3>\n<blockquote>\n</blockquote>\n<pre><code>sshd[912780]: Disconnecting authenticating user root 59.*.*.186 port 52862: Too many authentication failures [preauth]\nsshd[912782]: error: maximum authentication attempts exceeded for root from 59.102.161.186 port 52911 ssh2 [preauth]\n</code></pre>\n<h3>这是老子！</h3>\n<blockquote>\n</blockquote>\n<pre><code>sshd[921821]: Accepted publickey for root from 2409:****:****:**** port 6**** ssh2: RSA SHA256:****....\nsshd[921821]: pam_unix(sshd:session): session opened for user root(uid=0) by (uid=0)\nsystemd-logind[331]: New session **** of user root.\n</code></pre>\n<h2>后日谈</h2>\n<p>我感觉，最根本的防止被爆破 SSH 成功的方法只有三个：</p>\n<ol>\n<li>不允许非授权的 IP 连接</li>\n<li>使用足够长的私钥（比如 4096Bit ）代替密码进行验证</li>\n<li>不开放 SSH 登录端口（比如，通过 VPN 连入内网环境后再登录）</li>\n</ol>\n<p>虽然说这台机器只是酸酸机，但是鬼知道被爆破后会不会变成下一台肉鸡？\n世事难料，不如小心行船，方得万年平安<br/>\n又或许，我可以允许任意用户名通过，然后连上来的用户都用 ASCII 播放一遍鸡你太美？</p>\n<p>后附统计脚本</p>\n<pre><code class=\"language-python\">\nfilename = 'auth.log'\n\nfor line in open(filename, \"r\"):\n\n    if(line.find('sshd') == -1):\n        #非 SSHD 日志，跳过\n        continue\n\n    if(line.find('Invalid user') != -1):\n        #空格分隔后的日志，第五和第七位是用户名和 IP 信息\n        #实际检测请根据实际情况修改截断格式\n        print(line.split(\" \")[5] + \",\" + line.split(\" \")[7])\n\n\n</code></pre>\n<p>深山踏红叶，耳畔闻鹿鸣<br/>\n全文完，感谢阅读</p>\n", "last_modified": 1683725627, "replies": 72, "id": 939018}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1682440993", "name": "career", "avatar_normal": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1682440993", "title": "职场话题", "url": "https://www.v2ex.com/go/career", "topics": 14317, "footer": "", "header": "这里，我们聊聊那些工作中遇到的开心和不开心的事。", "title_alternative": "Career", "avatar_mini": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1682440993", "stars": 2676, "aliases": [], "root": false, "id": 770, "parent_node_name": "work"}, "member": {"id": 102175, "username": "magic3584", "url": "https://www.v2ex.com/u/magic3584", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/9bee/a327/102175_mini.png?m=1680495865", "avatar_normal": "https://cdn.v2ex.com/avatar/9bee/a327/102175_normal.png?m=1680495865", "avatar_large": "https://cdn.v2ex.com/avatar/9bee/a327/102175_large.png?m=1680495865", "created": 1425387702, "last_modified": 1680495865}, "last_reply_by": "hotdogwc", "last_touched": 1683792373, "title": "投了一周没一个面试，准备去代驾了", "url": "https://www.v2ex.com/t/939001", "created": 1683720694, "deleted": 0, "content": "普通本科，非科班，9 年 iOS ，其中 1 年 RN + 1 年 flutter\r\n\r\n1 周打招呼几十个，只投出来 3 份简历，没有面试\r\n\r\n北漂没车，已经注册了滴滴代驾，等审核通过后就去买个折叠自行车\r\n\r\n社保代缴违法了准备断了，每月省下快 3k 够孩子上两个月幼儿园了\r\n\r\n不敢想几个月没工作心态会崩成啥，虽然还没做好准备，但是也没别的办法了\r\n\r\n难", "content_rendered": "<p>普通本科，非科班，9 年 iOS ，其中 1 年 RN + 1 年 flutter</p>\n<p>1 周打招呼几十个，只投出来 3 份简历，没有面试</p>\n<p>北漂没车，已经注册了滴滴代驾，等审核通过后就去买个折叠自行车</p>\n<p>社保代缴违法了准备断了，每月省下快 3k 够孩子上两个月幼儿园了</p>\n<p>不敢想几个月没工作心态会崩成啥，虽然还没做好准备，但是也没别的办法了</p>\n<p>难</p>\n", "last_modified": 1683720694, "replies": 68, "id": 939001}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 4309, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1117, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 241843, "username": "zqlcrow", "url": "https://www.v2ex.com/u/zqlcrow", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/5caf/ca5f/241843_mini.png?m=1677155149", "avatar_normal": "https://cdn.v2ex.com/avatar/5caf/ca5f/241843_normal.png?m=1677155149", "avatar_large": "https://cdn.v2ex.com/avatar/5caf/ca5f/241843_large.png?m=1677155149", "avatar_xlarge": "https://cdn.v2ex.com/avatar/5caf/ca5f/241843_xlarge.png?m=1677155149", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/5caf/ca5f/241843_xlarge.png?m=1677155149", "created": 1500513403, "last_modified": 1677155149}, "last_reply_by": "yvescheung", "last_touched": 1683791753, "title": "建行的工资卡，竟然被冻结了。", "url": "https://www.v2ex.com/t/939027", "created": 1683727109, "deleted": 0, "content": "今天刚刚看到吐槽建行冻结的，晚上发完工资，发现转不出来。   \r\n回访账户限额。   \r\n\r\n咨询了下，要拿身份证去网点解冻。。   \r\n\r\n\r\n我这是工资卡啊，连续几年了，每个月固定日期、代发工资转入的工资卡啊！   \r\n还是上市公司，由 xxxx 公司，转入的代发工资啊！    \r\n\r\n\r\n我在建行就一张卡，告诉我，怎么才能触发风控！   \r\n而且我根本不用这张卡消费，连因为稀奇古怪的消费导致的可能性都不存在！\r\n\r\n真的魔怔了。", "content_rendered": "<p>今天刚刚看到吐槽建行冻结的，晚上发完工资，发现转不出来。<br/>\n回访账户限额。   </p>\n<p>咨询了下，要拿身份证去网点解冻。。   </p>\n<p>我这是工资卡啊，连续几年了，每个月固定日期、代发工资转入的工资卡啊！<br/>\n还是上市公司，由 xxxx 公司，转入的代发工资啊！    </p>\n<p>我在建行就一张卡，告诉我，怎么才能触发风控！<br/>\n而且我根本不用这张卡消费，连因为稀奇古怪的消费导致的可能性都不存在！</p>\n<p>真的魔怔了。</p>\n", "last_modified": 1683727205, "replies": 58, "id": 939027}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1682440993", "name": "career", "avatar_normal": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1682440993", "title": "职场话题", "url": "https://www.v2ex.com/go/career", "topics": 14317, "footer": "", "header": "这里，我们聊聊那些工作中遇到的开心和不开心的事。", "title_alternative": "Career", "avatar_mini": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1682440993", "stars": 2676, "aliases": [], "root": false, "id": 770, "parent_node_name": "work"}, "member": {"id": 606951, "username": "liangxin1998", "url": "https://www.v2ex.com/u/liangxin1998", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/aca9/0257/606951_mini.png?m=1678552002", "avatar_normal": "https://cdn.v2ex.com/avatar/aca9/0257/606951_normal.png?m=1678552002", "avatar_large": "https://cdn.v2ex.com/avatar/aca9/0257/606951_large.png?m=1678552002", "avatar_xlarge": "https://cdn.v2ex.com/avatar/aca9/0257/606951_xlarge.png?m=1678552002", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/aca9/0257/606951_xlarge.png?m=1678552002", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/aca9/0257/606951_xlarge.png?m=1678552002", "created": 1671159699, "last_modified": 1678552002}, "last_reply_by": "bigbigroll", "last_touched": 1683792152, "title": "拖工资的企业还能待？", "url": "https://www.v2ex.com/t/939052", "created": 1683733431, "deleted": 0, "content": "我是前端岗位\r\n五一后新入职一家公司，这个公司前前后后大概 30-40 人左右。\r\n是做教育产品的，入职前了解到 25 号发工资，我都觉得有问题的了，当时候没想那么多。今天跟一个老员工吃饭的时候跟我说，他 3 月的工资还没发。我顿时就傻眼了，而且还在陆续招人，今天还来了个 java ～ \r\n我在想，tmd 是不是入坑了，这是企业的什么操作？ 还能不能待，因为我是跳槽的，真的骑虎难下了。各位 v 友给点意见哇～～", "content_rendered": "<p>我是前端岗位\n五一后新入职一家公司，这个公司前前后后大概 30-40 人左右。\n是做教育产品的，入职前了解到 25 号发工资，我都觉得有问题的了，当时候没想那么多。今天跟一个老员工吃饭的时候跟我说，他 3 月的工资还没发。我顿时就傻眼了，而且还在陆续招人，今天还来了个 java ～\n我在想，tmd 是不是入坑了，这是企业的什么操作？ 还能不能待，因为我是跳槽的，真的骑虎难下了。各位 v 友给点意见哇～～</p>\n", "last_modified": 1683791521, "replies": 54, "id": 939052}]