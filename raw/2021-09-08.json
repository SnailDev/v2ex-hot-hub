[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/1f0e/3dad/19_large.png?m=1588235467", "name": "beijing", "avatar_normal": "https://cdn.v2ex.com/navatar/1f0e/3dad/19_normal.png?m=1588235467", "title": "北京", "url": "https://www.v2ex.com/go/beijing", "topics": 3253, "footer": "", "header": "", "title_alternative": "Beijing", "avatar_mini": "https://cdn.v2ex.com/navatar/1f0e/3dad/19_mini.png?m=1588235467", "stars": 1911, "aliases": [], "root": false, "id": 19, "parent_node_name": "cn"}, "member": {"username": "AmosG", "website": null, "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/gravatar/d24d0136681c39b771a180e36a604bff?s=24&d=retro", "bio": null, "url": "https://www.v2ex.com/u/AmosG", "tagline": null, "twitter": null, "created": 1579572147, "avatar_large": "https://cdn.v2ex.com/gravatar/d24d0136681c39b771a180e36a604bff?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/d24d0136681c39b771a180e36a604bff?s=24&d=retro", "location": null, "btc": null, "id": 466176}, "last_reply_by": "ns20", "last_touched": 1631075455, "title": "从汽车礼让行人是否能看出一座城市是否有温度，听说北京最近很多人被开了未礼让行人的罚单", "url": "https://www.v2ex.com/t/800435", "created": 1631003402, "content": "在北京过马路遇到很多看到有人在斑马线上还加速过的，甚至见到过大巴司机通过声音巨大的喇叭对正在过绿灯的行人表达他的怒意，就在想，真有这么着急吗，连个人行道绿灯的时间都等不了，甚至感觉到对这座城市非常失望，不知道大家有没有过这样的经历，最近听说开始整治不礼让行人的行为了，让我感觉整治的很有必要，不知道大家有没有这样的感受。", "content_rendered": "<p>在北京过马路遇到很多看到有人在斑马线上还加速过的，甚至见到过大巴司机通过声音巨大的喇叭对正在过绿灯的行人表达他的怒意，就在想，真有这么着急吗，连个人行道绿灯的时间都等不了，甚至感觉到对这座城市非常失望，不知道大家有没有过这样的经历，最近听说开始整治不礼让行人的行为了，让我感觉整治的很有必要，不知道大家有没有这样的感受。</p>\n", "last_modified": 1631003402, "replies": 145, "id": 800435}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1630512279", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1630512279", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 45625, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1630512279", "stars": 7505, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"username": "SunshinePlanet", "website": "https://sunshine-planet.github.io/", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/avatar/bf0c/e182/469736_mini.png?m=1583555490", "bio": "", "url": "https://www.v2ex.com/u/SunshinePlanet", "tagline": "", "twitter": "", "created": 1581936281, "avatar_large": "https://cdn.v2ex.com/avatar/bf0c/e182/469736_mini.png?m=1583555490", "avatar_mini": "https://cdn.v2ex.com/avatar/bf0c/e182/469736_mini.png?m=1583555490", "location": "", "btc": "", "id": 469736}, "last_reply_by": "draymonder", "last_touched": 1631077108, "title": "国内以竞赛为最终目的的计算机学习圈子到底是啥样", "url": "https://www.v2ex.com/t/800469", "created": 1631012131, "content": "进入大学也一年了，在大一开学初就有专门老师在一直在游说新生们去参加 ACM，CTF 。\r\n那老师也一直在说刷一本通，一本通。那时候我还和那老师对线，他一直在那重复刷题，刷题，刷了题什么都懂； 这个观点。\r\n而我当时的观点是\r\n刚刚进入大学，大家的计算机基础参差不齐，这时候应该教大家先熟悉一下 windows，熟悉一下计算机硬件有哪些，是什么，干什么，怎么用之类的基础的东西。刷题是之后的事情，参加比赛也是之后的事情。\r\n\r\n那专门负责 ACM 的老师就一直在那重复“刷题，刷题，刷一本通。”最后管理员禁言，这事就这么过去了。\r\n至于我的那些参加了 ACM，CTF 的同学，也是用 DEV-C++ 在那写代码，我跟他们讲 GCC 是什么，用 VSCode 会更舒服，可以用断点来调试代码等等之类的在我看来很基础的东西，他们也一头雾水，跟我说除了 DEV 其他东西都不知道是什么。简单说就是跟只会用 office 的人没区别，就是软件换成了 DEV-C++（无意冒犯）\r\n\r\n第一年我们编程语言只学了 C 。当然了，上的很水，一本清华大学出版社的教材，老师就是一章一章念完，课程就结束了\r\n这个暑假我们有个 《 C++实验》的课，老师就是上文提到的负责 ACM 的老师。上课内容就是在 拼题 A [PTA]( https://pintia.cn/) 上面过题，学生看他投影仪大屏幕做题，下面抄答案，把上面的题刷完。\r\n上课期间，他还在一直说现在你们可以和大一一起刷一本通啊，大一新生已经刷了很多题了。之类的刷题的话。\r\n\r\n这是我自己身边的事实\r\n在网上，好像知乎上，贴吧里，好像只要内容有关 ACM，CTF 之类的，大家好像都是参加过的人，都是这些领域的大佬，或者，很努力在里面奋斗的。根本就没有唱反调的，告诉新人这个东西需要你有一定的计算机基础。  \r\n#因为我身边打 ACM 的同学真的就只会打 ACM 呀。。。", "content_rendered": "<p>进入大学也一年了，在大一开学初就有专门老师在一直在游说新生们去参加 ACM，CTF 。\n那老师也一直在说刷一本通，一本通。那时候我还和那老师对线，他一直在那重复刷题，刷题，刷了题什么都懂； 这个观点。\n而我当时的观点是\n刚刚进入大学，大家的计算机基础参差不齐，这时候应该教大家先熟悉一下 windows，熟悉一下计算机硬件有哪些，是什么，干什么，怎么用之类的基础的东西。刷题是之后的事情，参加比赛也是之后的事情。</p>\n<p>那专门负责 ACM 的老师就一直在那重复“刷题，刷题，刷一本通。”最后管理员禁言，这事就这么过去了。\n至于我的那些参加了 ACM，CTF 的同学，也是用 DEV-C++ 在那写代码，我跟他们讲 GCC 是什么，用 VSCode 会更舒服，可以用断点来调试代码等等之类的在我看来很基础的东西，他们也一头雾水，跟我说除了 DEV 其他东西都不知道是什么。简单说就是跟只会用 office 的人没区别，就是软件换成了 DEV-C++（无意冒犯）</p>\n<p>第一年我们编程语言只学了 C 。当然了，上的很水，一本清华大学出版社的教材，老师就是一章一章念完，课程就结束了\n这个暑假我们有个 《 C++实验》的课，老师就是上文提到的负责 ACM 的老师。上课内容就是在 拼题 A <a href=\"https://pintia.cn/\" rel=\"nofollow\">PTA</a> 上面过题，学生看他投影仪大屏幕做题，下面抄答案，把上面的题刷完。\n上课期间，他还在一直说现在你们可以和大一一起刷一本通啊，大一新生已经刷了很多题了。之类的刷题的话。</p>\n<p>这是我自己身边的事实\n在网上，好像知乎上，贴吧里，好像只要内容有关 ACM，CTF 之类的，大家好像都是参加过的人，都是这些领域的大佬，或者，很努力在里面奋斗的。根本就没有唱反调的，告诉新人这个东西需要你有一定的计算机基础。<br/>\n#因为我身边打 ACM 的同学真的就只会打 ACM 呀。。。</p>\n", "last_modified": 1631012131, "replies": 84, "id": 800469}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 2563, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 643, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"username": "Macv1994", "website": "https://2dogz.cn", "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/avatar/2d0a/8647/478624_mini.png?m=1625306452", "bio": "", "url": "https://www.v2ex.com/u/Macv1994", "tagline": "清风徐来，水波不兴~", "twitter": null, "created": 1585043463, "avatar_large": "https://cdn.v2ex.com/avatar/2d0a/8647/478624_mini.png?m=1625306452", "avatar_mini": "https://cdn.v2ex.com/avatar/2d0a/8647/478624_mini.png?m=1625306452", "location": "长沙", "btc": null, "id": 478624}, "last_reply_by": "sjhspp", "last_touched": 1631076743, "title": "怎么有效的反击楼上的噪音？", "url": "https://www.v2ex.com/t/800542", "created": 1631063887, "content": "楼上没素质的，经常早上四五点，晚上十二点多，搞得咣当响，今天早上又是 6 点多开始挪东西。沟通很多次了，每次都是好了一段时间，然后又开始了。", "content_rendered": "<p>楼上没素质的，经常早上四五点，晚上十二点多，搞得咣当响，今天早上又是 6 点多开始挪东西。沟通很多次了，每次都是好了一段时间，然后又开始了。</p>\n", "last_modified": 1631063887, "replies": 67, "id": 800542}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1585387643", "name": "go", "avatar_normal": "https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1585387643", "title": "Go", "url": "https://www.v2ex.com/go/go", "topics": 1991, "footer": "", "header": "Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。", "title_alternative": "The Go Programming Language", "avatar_mini": "https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1585387643", "stars": 2801, "aliases": [], "root": false, "id": 375, "parent_node_name": "programming"}, "member": {"username": "lgs821", "website": null, "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/gravatar/000d9e9b2e3fa62458e9cf9a5d917b03?s=24&d=retro", "bio": null, "url": "https://www.v2ex.com/u/lgs821", "tagline": null, "twitter": null, "created": 1361320606, "avatar_large": "https://cdn.v2ex.com/gravatar/000d9e9b2e3fa62458e9cf9a5d917b03?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/000d9e9b2e3fa62458e9cf9a5d917b03?s=24&d=retro", "location": null, "btc": null, "id": 34493}, "last_reply_by": "sarlanori", "last_touched": 1631076121, "title": "我撸了一个快速搭建私人网盘的轮子， ifilespace 文件管理", "url": "https://www.v2ex.com/t/800394", "created": 1630996410, "content": "## 介绍\r\n由于工作和生活中有文件存储、管理和分享的需求，而国内大多数网盘都限速严重，限制太多，所以考虑到自己搭建文件管理系统，找了市面上能找到的几个网盘系统，如 NextCloud 、Cloudreve 、EyeblueTank 、zfile 等系统，虽然他们都已经做的基本完善，并且功能也都挺丰富了，但使用起来总感觉不太适合自己，所以造了这个轮子，并提供手机客户端和桌面客户端的支持。\r\n\r\niFileSpace 是一个在线个人文件管理工具，在线网盘程序，可快速一键搭建私人云盘，支持本地存储和对象存储（目前支持阿里云 oss,华为云 obs,OneDrive ）, 如部署在公网服务器，可替代百度网盘等在线网盘，自主搭建，数据完全自主管理！也可部署在家庭软路由、nas 等个人存储设备中，作为局域网文件管理工具使用。支持多用户、多存储空间、webdav 、相册备份及后台权限管理。\r\n\r\n系统设计初衷就是在家中软路由或者 nas 上部署使用（通过内网穿透或者 ipv6 可实现公网访问），为方便文件的管理及备份，本地文件系统就采用了明文文件夹结构的文件存储，没有使用文件加密及分块存储。另外，系统也增加了对象存储的支持，并且上传及下载文件都不需要服务器的带宽及存储容量限制。\r\n\r\n### 功能\r\n```\r\n支持第三方存储（目前支持阿里云 oss，华为云 obs，OneDrive ）。\r\n第三方存储不受服务器带宽限制，客户端直传。\r\n支持 WebDav 。\r\n支持相册备份。\r\n文件及文件夹管理、分享。\r\n支持直链分享、密码分享、群组分享及用户间分享。\r\n支持视频、图像、音频、文本、Office 文档、PDF 在线预览。\r\n支持多用户，多存储空间，多存储策略。\r\n提供 IOS，Android 客户端。\r\n提供 windows,macos 桌面客户端，管理分享文件更方便。\r\n支持定时文件扫描，自动更新用户文件夹下文件、目录。\r\n单文件打包，部署更简单。\r\n提供 Docker 版。\r\nWeb 版支持自定义 Logo 及首页。\r\n```\r\n### 技术栈\r\n\r\n```\r\n服务端：Golang + Vue3 + AntDesign Vue\r\n手机端：Flutter\r\n桌面端：Electron + Vue3\r\n```\r\n\r\n\r\n系统打包后只有一个二进制文件，并提供 docker 版本，方便快速启动，部署门槛极低。\r\n\r\n系统已迭代了一些版本，基本功能已相对稳定，后续根据情况会考虑增加桌面端的图床支持以及离线下载等功能。\r\n\r\n欢迎大佬们指点。\r\n\r\n官方网址： https://ifile.space\r\n\r\n演示地址： https://demo.ifile.space 账号密码：demo", "content_rendered": "<h2>介绍</h2>\n<p>由于工作和生活中有文件存储、管理和分享的需求，而国内大多数网盘都限速严重，限制太多，所以考虑到自己搭建文件管理系统，找了市面上能找到的几个网盘系统，如 NextCloud 、Cloudreve 、EyeblueTank 、zfile 等系统，虽然他们都已经做的基本完善，并且功能也都挺丰富了，但使用起来总感觉不太适合自己，所以造了这个轮子，并提供手机客户端和桌面客户端的支持。</p>\n<p>iFileSpace 是一个在线个人文件管理工具，在线网盘程序，可快速一键搭建私人云盘，支持本地存储和对象存储（目前支持阿里云 oss,华为云 obs,OneDrive ）, 如部署在公网服务器，可替代百度网盘等在线网盘，自主搭建，数据完全自主管理！也可部署在家庭软路由、nas 等个人存储设备中，作为局域网文件管理工具使用。支持多用户、多存储空间、webdav 、相册备份及后台权限管理。</p>\n<p>系统设计初衷就是在家中软路由或者 nas 上部署使用（通过内网穿透或者 ipv6 可实现公网访问），为方便文件的管理及备份，本地文件系统就采用了明文文件夹结构的文件存储，没有使用文件加密及分块存储。另外，系统也增加了对象存储的支持，并且上传及下载文件都不需要服务器的带宽及存储容量限制。</p>\n<h3>功能</h3>\n<pre><code>支持第三方存储（目前支持阿里云 oss，华为云 obs，OneDrive ）。\n第三方存储不受服务器带宽限制，客户端直传。\n支持 WebDav 。\n支持相册备份。\n文件及文件夹管理、分享。\n支持直链分享、密码分享、群组分享及用户间分享。\n支持视频、图像、音频、文本、Office 文档、PDF 在线预览。\n支持多用户，多存储空间，多存储策略。\n提供 IOS，Android 客户端。\n提供 windows,macos 桌面客户端，管理分享文件更方便。\n支持定时文件扫描，自动更新用户文件夹下文件、目录。\n单文件打包，部署更简单。\n提供 Docker 版。\nWeb 版支持自定义 Logo 及首页。\n</code></pre>\n<h3>技术栈</h3>\n<pre><code>服务端：Golang + Vue3 + AntDesign Vue\n手机端：Flutter\n桌面端：Electron + Vue3\n</code></pre>\n<p>系统打包后只有一个二进制文件，并提供 docker 版本，方便快速启动，部署门槛极低。</p>\n<p>系统已迭代了一些版本，基本功能已相对稳定，后续根据情况会考虑增加桌面端的图床支持以及离线下载等功能。</p>\n<p>欢迎大佬们指点。</p>\n<p>官方网址： <a href=\"https://ifile.space\" rel=\"nofollow\">https://ifile.space</a></p>\n<p>演示地址： <a href=\"https://demo.ifile.space\" rel=\"nofollow\">https://demo.ifile.space</a> 账号密码：demo</p>\n", "last_modified": 1630996722, "replies": 54, "id": 800394}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1630652774", "name": "career", "avatar_normal": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1630652774", "title": "职场话题", "url": "https://www.v2ex.com/go/career", "topics": 12056, "footer": "", "header": "这里，我们聊聊那些工作中遇到的开心和不开心的事。", "title_alternative": "Career", "avatar_mini": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1630652774", "stars": 2149, "aliases": [], "root": false, "id": 770, "parent_node_name": "work"}, "member": {"username": "waiaan", "website": "", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/gravatar/9c5850dbe56430ca732fbe3569ddc3bb?s=24&d=retro", "bio": "", "url": "https://www.v2ex.com/u/waiaan", "tagline": "", "twitter": "", "created": 1481893530, "avatar_large": "https://cdn.v2ex.com/gravatar/9c5850dbe56430ca732fbe3569ddc3bb?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/9c5850dbe56430ca732fbe3569ddc3bb?s=24&d=retro", "location": "", "btc": "", "id": 206370}, "last_reply_by": "leokino", "last_touched": 1631077047, "title": "技术不值钱，只有深入了解行业或公司业务才有可能成为不可替代的人", "url": "https://www.v2ex.com/t/800457", "created": 1631007191, "content": "今日开会大领导大概说了这么个意思，深以为然。", "content_rendered": "<p>今日开会大领导大概说了这么个意思，深以为然。</p>\n", "last_modified": 1631007191, "replies": 53, "id": 800457}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1630643913", "name": "apple", "avatar_normal": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1630643913", "title": "Apple", "url": "https://www.v2ex.com/go/apple", "topics": 15723, "footer": "", "header": "设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。", "title_alternative": "Apple", "avatar_mini": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1630643913", "stars": 1914, "aliases": [], "root": false, "id": 184, "parent_node_name": "hardware"}, "member": {"username": "yshtcn", "website": null, "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/gravatar/bf2669bbaf6e299267f32cd418ba249c?s=24&d=retro", "bio": null, "url": "https://www.v2ex.com/u/yshtcn", "tagline": null, "twitter": null, "created": 1389375393, "avatar_large": "https://cdn.v2ex.com/gravatar/bf2669bbaf6e299267f32cd418ba249c?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/bf2669bbaf6e299267f32cd418ba249c?s=24&d=retro", "location": null, "btc": null, "id": 53976}, "last_reply_by": "axuhongbo", "last_touched": 1631076492, "title": "MAC 上有没有特别好的远程方案，适合剪辑，适量（非天价）付费也可接受。", "url": "https://www.v2ex.com/t/800523", "created": 1631057418, "content": "家里的带宽不错，一般出门带个 macbook 甚至 iPad 就可以用 windows 远程桌面连回家，撸代码，办公甚至轻量级的查看视频文件都可以。\r\n\r\n但是我的剪辑主要在 macbook 上的 FCP，但素材主要是在家中的 NAS 上。这就导致我出门剪不了片。\r\n现在的想法就是再买一台 M1 的 mac mini，然后连回家，远程剪辑。\r\n\r\n现在就是苦于没有好用 mac 远程软件，最好是直连，上行有 50M，而且是公网 IP 。\r\n我试过一个叫 RDM 的软件，支持 VNC，ARP 等协议，但是不能回传声音。\r\n另外远程剪辑的流畅性还是达不到（猜测是压缩不够）。\r\n\r\n请教各位有没有好用的方案。", "content_rendered": "<p>家里的带宽不错，一般出门带个 macbook 甚至 iPad 就可以用 windows 远程桌面连回家，撸代码，办公甚至轻量级的查看视频文件都可以。</p>\n<p>但是我的剪辑主要在 macbook 上的 FCP，但素材主要是在家中的 NAS 上。这就导致我出门剪不了片。\n现在的想法就是再买一台 M1 的 mac mini，然后连回家，远程剪辑。</p>\n<p>现在就是苦于没有好用 mac 远程软件，最好是直连，上行有 50M，而且是公网 IP 。\n我试过一个叫 RDM 的软件，支持 VNC，ARP 等协议，但是不能回传声音。\n另外远程剪辑的流畅性还是达不到（猜测是压缩不够）。</p>\n<p>请教各位有没有好用的方案。</p>\n", "last_modified": 1631057418, "replies": 45, "id": 800523}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1585387643", "name": "go", "avatar_normal": "https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1585387643", "title": "Go", "url": "https://www.v2ex.com/go/go", "topics": 1991, "footer": "", "header": "Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。", "title_alternative": "The Go Programming Language", "avatar_mini": "https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1585387643", "stars": 2801, "aliases": [], "root": false, "id": 375, "parent_node_name": "programming"}, "member": {"username": "flycloud", "website": null, "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/gravatar/c9aac211a51266f85bd2d077520dedad?s=24&d=retro", "bio": null, "url": "https://www.v2ex.com/u/flycloud", "tagline": null, "twitter": null, "created": 1524536002, "avatar_large": "https://cdn.v2ex.com/gravatar/c9aac211a51266f85bd2d077520dedad?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/c9aac211a51266f85bd2d077520dedad?s=24&d=retro", "location": null, "btc": null, "id": 311127}, "last_reply_by": "tuxz", "last_touched": 1631028861, "title": "golang 内存回收的疑问", "url": "https://www.v2ex.com/t/800407", "created": 1630998766, "content": "先贴代码：\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\t\"os\"\r\n\t\"os/signal\"\r\n\t\"syscall\"\r\n)\r\n\r\nfunc main() {\r\n\tdata := make(map[int32][]int32)\r\n\tfor i := 0; i < 1024; i++ {\r\n\t\tmsg := make([]int32, 1024 * 512, 1024 * 512)\r\n\t\tmsg[0] = 0\t//访问一下内存, 触发从内核真正分配内存\r\n\t\tdata[int32(i)] = msg\r\n\t}\r\n\tfmt.Println(len(data))\r\n    \r\n\tif true {\r\n\t\tsig := make(chan os.Signal, 1)\r\n\t\tsignal.Notify(sig, syscall.SIGINT, syscall.SIGTERM)\r\n\t\t<-sig\r\n\t}\r\n}\r\n```\r\n\r\n编译：\r\n```\r\nGODEBUG=madvdontneed=1 GOOS=linux GOARCH=amd64 go build\r\n```\r\n\r\n如上，分配了 1024 个内存占用 2MB 的 slice，放入了 map 中，总共 2GB 内存占用。程序启动后分配完就一直阻塞着，大概 3 分钟后内存占用从 2GB 多降低到 70MB 左右，表现上看是之前分配的 slice 被 gc 了。但是 map 没有删除操作，也没有置为 nil，难道 golang 的 gc 机制就是这样，发现后续没有再使用这个 map 就直接 gc 了，尽管还没有离开这个 map 所在的作用域？\r\n\r\n![image]( https://i.imgur.com/Kw0dAcn.png)", "content_rendered": "<p>先贴代码：</p>\n<pre><code>package main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"syscall\"\n)\n\nfunc main() {\n\tdata := make(map[int32][]int32)\n\tfor i := 0; i &lt; 1024; i++ {\n\t\tmsg := make([]int32, 1024 * 512, 1024 * 512)\n\t\tmsg[0] = 0\t//访问一下内存, 触发从内核真正分配内存\n\t\tdata[int32(i)] = msg\n\t}\n\tfmt.Println(len(data))\n    \n\tif true {\n\t\tsig := make(chan os.Signal, 1)\n\t\tsignal.Notify(sig, syscall.SIGINT, syscall.SIGTERM)\n\t\t&lt;-sig\n\t}\n}\n</code></pre>\n<p>编译：</p>\n<pre><code>GODEBUG=madvdontneed=1 GOOS=linux GOARCH=amd64 go build\n</code></pre>\n<p>如上，分配了 1024 个内存占用 2MB 的 slice，放入了 map 中，总共 2GB 内存占用。程序启动后分配完就一直阻塞着，大概 3 分钟后内存占用从 2GB 多降低到 70MB 左右，表现上看是之前分配的 slice 被 gc 了。但是 map 没有删除操作，也没有置为 nil，难道 golang 的 gc 机制就是这样，发现后续没有再使用这个 map 就直接 gc 了，尽管还没有离开这个 map 所在的作用域？</p>\n<p><img alt=\"image\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.imgur.com/Kw0dAcn.png\"/></p>\n", "last_modified": 1631001947, "replies": 39, "id": 800407}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1630652774", "name": "career", "avatar_normal": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1630652774", "title": "职场话题", "url": "https://www.v2ex.com/go/career", "topics": 12056, "footer": "", "header": "这里，我们聊聊那些工作中遇到的开心和不开心的事。", "title_alternative": "Career", "avatar_mini": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1630652774", "stars": 2149, "aliases": [], "root": false, "id": 770, "parent_node_name": "work"}, "member": {"username": "machtimes", "website": "http://machtimes.cn/", "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/gravatar/1fc37493acfe1166721c255f4dd9d71e?s=24&d=retro", "bio": "一个数据收集爱好者", "url": "https://www.v2ex.com/u/machtimes", "tagline": "一个数据收集爱好者", "twitter": null, "created": 1605792228, "avatar_large": "https://cdn.v2ex.com/gravatar/1fc37493acfe1166721c255f4dd9d71e?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/1fc37493acfe1166721c255f4dd9d71e?s=24&d=retro", "location": "GZ", "btc": null, "id": 518349}, "last_reply_by": "JoJoJoJ", "last_touched": 1631076926, "title": "[有个朋友] 有个朋友刚毕业，准备参加工作，但因患有大三阳，请问入职体检怎么搞呀", "url": "https://www.v2ex.com/t/800553", "created": 1631065383, "content": "不懂就问，就非常好奇，好像有这个毛病的人应该不在少数，请问入职体检是怎么做呀。\r\n1.正常入职体检，好像有规定不能因患有这个毛病，而拒绝他入职。这个实际是否可行？\r\n2.找人代检，这个可行性怎么样？如果被发现，是否会带来其他影响？", "content_rendered": "<p>不懂就问，就非常好奇，好像有这个毛病的人应该不在少数，请问入职体检是怎么做呀。\n1.正常入职体检，好像有规定不能因患有这个毛病，而拒绝他入职。这个实际是否可行？\n2.找人代检，这个可行性怎么样？如果被发现，是否会带来其他影响？</p>\n", "last_modified": 1631067760, "replies": 33, "id": 800553}]