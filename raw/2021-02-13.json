[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 168610, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680", "stars": 3161, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"username": "gcyrn", "website": "", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/avatar/b2ec/9d07/460254_mini.png?m=1600229640", "bio": "", "url": "https://www.v2ex.com/u/gcyrn", "tagline": "", "twitter": "", "created": 1576765300, "avatar_large": "https://cdn.v2ex.com/avatar/b2ec/9d07/460254_mini.png?m=1600229640", "avatar_mini": "https://cdn.v2ex.com/avatar/b2ec/9d07/460254_mini.png?m=1600229640", "location": "", "btc": "", "id": 460254}, "last_reply_by": "overthemoon", "last_touched": 1613191810, "title": "不开玩笑 能不能分享一条人生经验？", "url": "https://www.v2ex.com/t/753038", "created": 1613110605, "content": "我在 v2 的用户里可能算比较小的，好奇能得到什么答案。大事小事，各个方面都可以，想到什么说什么\r\n\r\n借此机会祝大家新年快乐", "content_rendered": "<p>我在 v2 的用户里可能算比较小的，好奇能得到什么答案。大事小事，各个方面都可以，想到什么说什么</p>\n<p>借此机会祝大家新年快乐</p>\n", "last_modified": 1613110637, "replies": 146, "id": 753038}, {"node": {"avatar_large": "/static/img/node_default_large.png", "name": "2021", "avatar_normal": "/static/img/node_default_normal.png", "title": "2021", "url": "https://www.v2ex.com/go/2021", "topics": 17, "footer": null, "header": null, "title_alternative": "2021", "avatar_mini": "/static/img/node_default_mini.png", "stars": 5, "aliases": [], "root": false, "id": 1088, "parent_node_name": null}, "member": {"username": "zealinux", "website": "", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/gravatar/97cec5ffbda3f47b2cd453cf10b78244?s=24&d=retro", "bio": "", "url": "https://www.v2ex.com/u/zealinux", "tagline": "", "twitter": "", "created": 1334275785, "avatar_large": "https://cdn.v2ex.com/gravatar/97cec5ffbda3f47b2cd453cf10b78244?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/97cec5ffbda3f47b2cd453cf10b78244?s=24&d=retro", "location": "", "btc": "", "id": 19404}, "last_reply_by": "xrr2016", "last_touched": 1613145468, "title": "有没有觉得今年的央视春晚越来越难看？", "url": "https://www.v2ex.com/t/753112", "created": 1613141157, "content": "2021 过年有什么其他可以推荐看看的？", "content_rendered": "<p>2021 过年有什么其他可以推荐看看的？</p>\n", "last_modified": 1613141157, "replies": 59, "id": 753112}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 168610, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680", "stars": 3161, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"username": "systemcall", "website": "", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/gravatar/8308afd35ba6e4fa8f8be5ebabd890ab?s=24&d=retro", "bio": "", "url": "https://www.v2ex.com/u/systemcall", "tagline": "", "twitter": "", "created": 1585015951, "avatar_large": "https://cdn.v2ex.com/gravatar/8308afd35ba6e4fa8f8be5ebabd890ab?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/8308afd35ba6e4fa8f8be5ebabd890ab?s=24&d=retro", "location": "", "btc": "", "id": 478517}, "last_reply_by": "cumt21g", "last_touched": 1613190859, "title": "想退学去做桌面运维，可行性怎样？", "url": "https://www.v2ex.com/t/753116", "created": 1613142536, "content": "大学没多大希望读下去了，就算读下去估计也不能毕业。而且学校本来也不怎么好，我这边最烂的本科吧  \r\n大学也花了很多钱了。也买了不少书和课来看，感觉没多大用处，学不会。学的 EE  \r\n想要去转行做桌面运维，但是我没有文凭。技术应该不会差太多吧，大概  \r\n装电脑还是会装的。毕竟也用了上十年的电脑了，就刚开始的一两年不熟悉电脑是找别人修电脑，后来都是自己修、自己装电脑，还是比较熟悉的吧。Linux 也用过好几年，虽然后来换成了 wsl  \r\n看日志都是人力看的，毕竟也没遇到过非常多的日志。脚本的话，以前用 Linux 的时候会一些  \r\n别的一些东西，比如网络、打印机之类的，多少也会一些维护吧  \r\n之前准备刷 leetcode，但是感觉自己的能力实在是太差了，花了几天也就看了几题，而且还是不能够自己写出来。差的太远了。硬件方面的话，感觉差的更远，连及格都差好远  \r\n如果这个做不了的话，大概就只能进厂了。也不会别的什么东西吧", "content_rendered": "<p>大学没多大希望读下去了，就算读下去估计也不能毕业。而且学校本来也不怎么好，我这边最烂的本科吧<br/>\n大学也花了很多钱了。也买了不少书和课来看，感觉没多大用处，学不会。学的 EE<br/>\n想要去转行做桌面运维，但是我没有文凭。技术应该不会差太多吧，大概<br/>\n装电脑还是会装的。毕竟也用了上十年的电脑了，就刚开始的一两年不熟悉电脑是找别人修电脑，后来都是自己修、自己装电脑，还是比较熟悉的吧。Linux 也用过好几年，虽然后来换成了 wsl<br/>\n看日志都是人力看的，毕竟也没遇到过非常多的日志。脚本的话，以前用 Linux 的时候会一些<br/>\n别的一些东西，比如网络、打印机之类的，多少也会一些维护吧<br/>\n之前准备刷 leetcode，但是感觉自己的能力实在是太差了，花了几天也就看了几题，而且还是不能够自己写出来。差的太远了。硬件方面的话，感觉差的更远，连及格都差好远<br/>\n如果这个做不了的话，大概就只能进厂了。也不会别的什么东西吧</p>\n", "last_modified": 1613142536, "replies": 49, "id": 753116}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 168610, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680", "stars": 3161, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"username": "Posh", "website": "", "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/avatar/3313/8774/466445_mini.png?m=1612570212", "bio": "", "url": "https://www.v2ex.com/u/Posh", "tagline": "", "twitter": null, "created": 1579731637, "avatar_large": "https://cdn.v2ex.com/avatar/3313/8774/466445_mini.png?m=1612570212", "avatar_mini": "https://cdn.v2ex.com/avatar/3313/8774/466445_mini.png?m=1612570212", "location": "", "btc": null, "id": 466445}, "last_reply_by": "NSAgold", "last_touched": 1613190796, "title": "局域网内联机的 pc 游戏推荐", "url": "https://www.v2ex.com/t/753046", "created": 1613116186, "content": "局域网多人联机，pc 游戏，谢谢万事顺遂的各位靓仔！", "content_rendered": "<p>局域网多人联机，pc 游戏，谢谢万事顺遂的各位靓仔！</p>\n", "last_modified": 1613116186, "replies": 48, "id": 753046}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 168610, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680", "stars": 3161, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"username": "mokeyjay", "website": "https://www.mokeyjay.com", "github": "mokeyjay", "psn": "mokeyjay_", "avatar_normal": "https://cdn.v2ex.com/avatar/3a8e/4c83/99324_mini.png?m=1580092922", "bio": "超能小紫(https://www.mokeyjay.com)站长 // Web全沾砖家 // ACG爱好者 // 专业学渣 // 余业萝莉控", "url": "https://www.v2ex.com/u/mokeyjay", "tagline": "", "twitter": "ttmokeyjay", "created": 1424589686, "avatar_large": "https://cdn.v2ex.com/avatar/3a8e/4c83/99324_mini.png?m=1580092922", "avatar_mini": "https://cdn.v2ex.com/avatar/3a8e/4c83/99324_mini.png?m=1580092922", "location": "深圳", "btc": "", "id": 99324}, "last_reply_by": "SenLief", "last_touched": 1613191993, "title": "目前 Google Photos 似乎并没有更好的替代品", "url": "https://www.v2ex.com/t/753074", "created": 1613127881, "content": "## 我的需求：  \r\n- 容量要尽可能大，毕竟这玩意儿可能一用就是一辈子  \r\n- 具有智能识别功能，这玩意儿用过就回不去了\r\n- 具备相册功能，方便归类\r\n\r\n## 列举几个“竞品”的缺点：  \r\n- OneDrive 在没有智能识别，也没有相册功能。而且跟备份的文件会混在一起，乱七八糟  \r\n- iCloud 对非苹果生态用户很不友好  \r\n- 自建 NAS 之类……我对自己的容灾能力实在是没有信心  \r\n\r\n---\r\n百度的一刻相册不考虑，原因相信大家都懂  \r\n综上所述，有没有比 Google Photos 更好的替代品？我觉得应该是没有了，唯一的缺点就是被墙", "content_rendered": "<h2>我的需求：</h2>\n<ul>\n<li>容量要尽可能大，毕竟这玩意儿可能一用就是一辈子  </li>\n<li>具有智能识别功能，这玩意儿用过就回不去了</li>\n<li>具备相册功能，方便归类</li>\n</ul>\n<h2>列举几个“竞品”的缺点：</h2>\n<ul>\n<li>OneDrive 在没有智能识别，也没有相册功能。而且跟备份的文件会混在一起，乱七八糟  </li>\n<li>iCloud 对非苹果生态用户很不友好  </li>\n<li>自建 NAS 之类……我对自己的容灾能力实在是没有信心  </li>\n</ul>\n<hr/>\n<p>百度的一刻相册不考虑，原因相信大家都懂<br/>\n综上所述，有没有比 Google Photos 更好的替代品？我觉得应该是没有了，唯一的缺点就是被墙</p>\n", "last_modified": 1613127881, "replies": 43, "id": 753074}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c74d/97b0/16_large.png?m=1611763055", "name": "share", "avatar_normal": "https://cdn.v2ex.com/navatar/c74d/97b0/16_normal.png?m=1611763055", "title": "分享发现", "url": "https://www.v2ex.com/go/share", "topics": 33627, "footer": "", "header": "分享你看到的好玩的，有信息量的，欢迎从这里获取灵感。", "title_alternative": "Share", "avatar_mini": "https://cdn.v2ex.com/navatar/c74d/97b0/16_mini.png?m=1611763055", "stars": 4409, "aliases": [], "root": false, "id": 16, "parent_node_name": "v2ex"}, "member": {"username": "Peanut666", "website": "", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/avatar/8475/681e/133302_mini.png?m=1536558052", "bio": "", "url": "https://www.v2ex.com/u/Peanut666", "tagline": "嘿", "twitter": "", "created": 1439782786, "avatar_large": "https://cdn.v2ex.com/avatar/8475/681e/133302_mini.png?m=1536558052", "avatar_mini": "https://cdn.v2ex.com/avatar/8475/681e/133302_mini.png?m=1536558052", "location": "四川成都", "btc": "", "id": 133302}, "last_reply_by": "cskeleton", "last_touched": 1613154133, "title": "昨晚中了淘宝清空购物车", "url": "https://www.v2ex.com/t/753055", "created": 1613119878, "content": "前 3 轮清空购物车我都没参加，逛淘宝无意间看到第 4 轮清空购物车还有 2 分钟，就在那个活动页面等着，然后到时间我点了一下，2 秒就弹窗我中奖了，1400 元，人直接愣住了，然后看红包有效期 2 小时，赶紧想买啥，最后买了白酒，哈哈哈", "content_rendered": "前 3 轮清空购物车我都没参加，逛淘宝无意间看到第 4 轮清空购物车还有 2 分钟，就在那个活动页面等着，然后到时间我点了一下，2 秒就弹窗我中奖了，1400 元，人直接愣住了，然后看红包有效期 2 小时，赶紧想买啥，最后买了白酒，哈哈哈", "last_modified": 1613119878, "replies": 38, "id": 753055}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 168610, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680", "stars": 3161, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"username": "jadeborner", "website": null, "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/gravatar/860b433cc31a89df79a5253fef3db7f6?s=24&d=retro", "bio": null, "url": "https://www.v2ex.com/u/jadeborner", "tagline": null, "twitter": null, "created": 1611626654, "avatar_large": "https://cdn.v2ex.com/gravatar/860b433cc31a89df79a5253fef3db7f6?s=24&d=retro", "avatar_mini": "https://cdn.v2ex.com/gravatar/860b433cc31a89df79a5253fef3db7f6?s=24&d=retro", "location": null, "btc": null, "id": 530473}, "last_reply_by": "aoxiansheng", "last_touched": 1613191972, "title": "听说很多人都受楼上噪音影响，所以我打算直接买个顶楼", "url": "https://www.v2ex.com/t/753154", "created": 1613185664, "content": "我现在关心的是顶楼的电梯噪音是不是很大？\r\n其他漏水啥的隐患还能接受。", "content_rendered": "<p>我现在关心的是顶楼的电梯噪音是不是很大？\n其他漏水啥的隐患还能接受。</p>\n", "last_modified": 1613185664, "replies": 31, "id": 753154}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/077e/29b1/249_large.png?m=1592121370", "name": "vim", "avatar_normal": "https://cdn.v2ex.com/navatar/077e/29b1/249_normal.png?m=1592121370", "title": "Vim", "url": "https://www.v2ex.com/go/vim", "topics": 672, "footer": "", "header": "", "title_alternative": "Vim", "avatar_mini": "https://cdn.v2ex.com/navatar/077e/29b1/249_mini.png?m=1592121370", "stars": 693, "aliases": [], "root": false, "id": 249, "parent_node_name": "editors"}, "member": {"username": "yazoox", "website": "", "github": "", "psn": "", "avatar_normal": "https://cdn.v2ex.com/avatar/7b39/2690/111562_mini.png?m=1586749266", "bio": "三人行，必有我师\r\n勤学与好问", "url": "https://www.v2ex.com/u/yazoox", "tagline": "", "twitter": "", "created": 1429328866, "avatar_large": "https://cdn.v2ex.com/avatar/7b39/2690/111562_mini.png?m=1586749266", "avatar_mini": "https://cdn.v2ex.com/avatar/7b39/2690/111562_mini.png?m=1586749266", "location": "Shanghai", "btc": "", "id": 111562}, "last_reply_by": "jdhao", "last_touched": 1613191575, "title": "有使用 vim 写代码的兄弟姐妹么？你们都安装了哪些插件？", "url": "https://www.v2ex.com/t/753095", "created": 1613135690, "content": "先祝大家新年快乐！\n\n如题！\n\n有直接使用 vim coding 的兄弟么？（ vim/neovim ）\n你们都使用了哪些插件？\n\n比如，\n插件管理器，vundle or vim-plug ？\n文件浏览，nerdtree ？\n状态栏，airline ？\n或者，什么，文件查找搜索，fzf ？ CtrlP?\n又或者什么代码提示 Coc 还是 LSP ？\n\n等等……\n\n分享一下。", "content_rendered": "<p>先祝大家新年快乐！</p>\n<p>如题！</p>\n<p>有直接使用 vim coding 的兄弟么？（ vim/neovim ）\n你们都使用了哪些插件？</p>\n<p>比如，\n插件管理器，vundle or vim-plug ？\n文件浏览，nerdtree ？\n状态栏，airline ？\n或者，什么，文件查找搜索，fzf ？ CtrlP?\n又或者什么代码提示 Coc 还是 LSP ？</p>\n<p>等等……</p>\n<p>分享一下。</p>\n", "last_modified": 1613135690, "replies": 26, "id": 753095}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/70ef/df2e/17_large.png?m=1596015931", "name": "create", "avatar_normal": "https://cdn.v2ex.com/navatar/70ef/df2e/17_normal.png?m=1596015931", "title": "分享创造", "url": "https://www.v2ex.com/go/create", "topics": 15725, "footer": "", "header": "欢迎你在这里发布自己的最新作品！", "title_alternative": "Create", "avatar_mini": "https://cdn.v2ex.com/navatar/70ef/df2e/17_mini.png?m=1596015931", "stars": 3824, "aliases": [], "root": false, "id": 17, "parent_node_name": "geek"}, "member": {"username": "smallbeef1998", "website": "https://gitee.com/veal98/CS-Wiki", "github": null, "psn": null, "avatar_normal": "https://cdn.v2ex.com/avatar/1fac/9b3f/523004_mini.png?m=1613132879", "bio": "", "url": "https://www.v2ex.com/u/smallbeef1998", "tagline": "尽人事，听天命", "twitter": null, "created": 1607479777, "avatar_large": "https://cdn.v2ex.com/avatar/1fac/9b3f/523004_mini.png?m=1613132879", "avatar_mini": "https://cdn.v2ex.com/avatar/1fac/9b3f/523004_mini.png?m=1613132879", "location": "", "btc": null, "id": 523004}, "last_reply_by": "smallbeef1998", "last_touched": 1613191345, "title": "面向校招/社招，开源社区系统 Echo，基于目前主流 Java Web 技术栈，并提供详细的开发文档和配套教程", "url": "https://www.v2ex.com/t/753088", "created": 1613134045, "content": "博主目前东南大学研究生在读，近一个月开发了一款社区系统，为接下来的校招做准备，同时开源出来和各位小伙伴一起交流学习。项目仍然存在很多不完善的地方，大家多多指教~\r\n- **仓库地址**： https://github.com/Veal98/Echo\r\n- **在线体验**：项目已经部署到腾讯云服务器，各位小伙伴们可直接线上体验：[http://1.15.127.74/]( http://1.15.127.74/)\r\n\r\n  已内置三种不同身份的用户：\r\n\r\n  |          | username | password |      特殊权限      |\r\n  | :------: | :------: | :------: | :----------------: |\r\n  |  管理员  |  admin   |  admin   | 数据统计、删除帖子 |\r\n  |   版主   |  master  |  master  | 置顶帖子、加精帖子 |\r\n  | 普通用户 |   user   |   user   |                    |\r\n\r\n\r\n- **文档地址**：文档通过 Docsify + Gitee Pages 生成，在线访问地址： https://veal98.gitee.io/echo\r\n\r\n## 💻 核心技术栈\r\n\r\n后端：\r\n\r\n- Spring\r\n- Spring Boot 2.1.5 RELEASE\r\n- Spring MVC\r\n- ORM：MyBatis\r\n- 数据库：MySQL 5.7\r\n- 分布式缓存：Redis\r\n- 本地缓存：Caffeine\r\n- 消息队列：Kafka 2.13-2.7.0\r\n- 搜索引擎：Elasticsearch 6.4.3\r\n- 安全：Spring Security\r\n- 邮件任务：Spring Mail\r\n- 分布式定时任务：Spring Quartz\r\n- 日志：SLF4J （日志接口） + Logback （日志实现）\r\n\r\n前端：\r\n\r\n- Thymeleaf\r\n- Bootstrap 4.x\r\n- Jquery\r\n- Ajax\r\n\r\n## 🎀 界面展示\r\n\r\n首页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211205641.png)\r\n\r\n登录页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211205558.png)\r\n\r\n帖子详情页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211205741.png)\r\n\r\n个人主页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211205820.png)\r\n\r\n朋友私信页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211205857.png)\r\n\r\n私信详情页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211205948.png)\r\n\r\n系统通知页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211210122.png)\r\n\r\n通知详情页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211210152.png)\r\n\r\n账号设置页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211210238.png)\r\n\r\n数据统计页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211210323.png)\r\n\r\n搜索详情页：\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210211210531.png)\r\n\r\n## 🎨 功能列表\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210208222403.png)\r\n\r\n- **注册**\r\n  - 用户注册成功，将用户信息存入 MySQL，但此时该用户状态为未激活\r\n  - 向用户发送激活邮件，用户点击链接则激活账号（ Spring Mail ）\r\n\r\n- **登录 | 登出**\r\n  - 进入登录界面，动态生成验证码，并将验证码短暂存入 Redis （ 60 秒）\r\n  - 用户登录成功（验证用户名、密码、验证码），生成登录凭证且设置状态为有效，并将登录凭证存入 Redis\r\n    注意：登录凭证存在有效期，在所有的请求执行之前，都会检查凭证是否有效和是否过期，只要该用户的凭证有效并在有效期时间内，本次请求就会一直持有该用户信息（使用 ThreadLocal 持有用户信息）\r\n  - 勾选记住我，则延长登录凭证有效时间\r\n  - 用户登录成功，将用户信息短暂存入 Redis （ 1 小时）\r\n  - 用户登出，将凭证状态设为无效，并更新 Redis 中该用户的登录凭证信息\r\n\r\n- **账号设置**\r\n  - 修改头像\r\n    - 将用户选择的头像图片文件上传至七牛云服务器\r\n  - 修改密码\r\n\r\n- **帖子模块**\r\n  - 发布帖子（过滤敏感词），将其存入 MySQL\r\n  - 分页显示所有的帖子\r\n    - 支持按照 “发帖时间” 显示\r\n    - 支持按照 “热度排行” 显示（ Spring Quartz ）\r\n  - 查看帖子详情\r\n  - 权限管理（ Spring Security + Thymeleaf Security ）\r\n    - 未登录用户无法发帖\r\n    - “版主” 可以看到帖子的置顶和加精按钮并执行相应操作\r\n    - “管理员” 可以看到帖子的删除按钮并执行相应操作\r\n    - “普通用户” 无法看到帖子的置顶、加精、删除按钮，也无法执行相应操作\r\n\r\n- **评论模块**\r\n  - 发布对帖子的评论（过滤敏感词），将其存入 MySQL\r\n  - 分页显示评论\r\n  - 发布对评论的回复（过滤敏感词）\r\n  - 权限管理（ Spring Security ）\r\n    - 未登录用户无法使用评论功能\r\n\r\n- **私信模块**\r\n  - 发送私信（过滤敏感词）\r\n  - 私信列表\r\n    - 查询当前用户的会话列表\r\n    - 每个会话只显示一条最新的私信\r\n    - 支持分页显示\r\n  - 私信详情\r\n    - 查询某个会话所包含的所有私信\r\n    - 访问私信详情时，将显示的私信设为已读状态\r\n    - 支持分页显示\r\n  - 权限管理（ Spring Security ）\r\n    - 未登录用户无法使用私信功能\r\n\r\n- **统一处理 404 / 500 异常**\r\n  - 普通请求异常\r\n  - 异步请求异常\r\n\r\n- **统一记录日志**\r\n\r\n- **点赞模块**\r\n  - 支持对帖子、评论 /回复点赞\r\n  - 第 1 次点赞，第 2 次取消点赞\r\n  - 首页统计帖子的点赞数量\r\n  - 详情页统计帖子和评论 /回复的点赞数量\r\n  - 详情页显示当前登录用户的点赞状态（赞过了则显示已赞）\r\n  - 统计我的获赞数量\r\n  - 权限管理（ Spring Security ）\r\n    - 未登录用户无法使用点赞相关功能\r\n\r\n- **关注模块**\r\n  - 关注功能\r\n  - 取消关注功能\r\n  - 统计用户的关注数和粉丝数\r\n  - 我的关注列表（查询某个用户关注的人），支持分页\r\n  - 我的粉丝列表（查询某个用户的粉丝），支持分页\r\n  - 权限管理（ Spring Security ）\r\n    - 未登录用户无法使用关注相关功能\r\n\r\n- **系统通知模块**\r\n  - 通知列表\r\n    - 显示评论、点赞、关注三种类型的通知\r\n  - 通知详情\r\n    - 分页显示某一类主题所包含的通知\r\n    - 进入某种类型的系统通知详情，则将该页的所有未读的系统通知状态设置为已读\r\n  - 未读数量\r\n    - 分别显示每种类型的系统通知的未读数量\r\n    - 显示所有系统通知的未读数量\r\n  - 导航栏显示所有消息的未读数量（未读私信 + 未读系统通知）\r\n  - 权限管理（ Spring Security ）\r\n    - 未登录用户无法使用系统通知功能\r\n\r\n- **搜索模块**\r\n  - 发布事件\r\n    - 发布帖子时，通过消息队列将帖子异步地提交到 Elasticsearch 服务器\r\n    - 为帖子增加评论时，通过消息队列将帖子异步地提交到 Elasticsearch 服务器\r\n  - 搜索服务\r\n    - 从 Elasticsearch 服务器搜索帖子\r\n    - 从 Elasticsearch 服务器删除帖子（当帖子从数据库中被删除时）\r\n  - 显示搜索结果\r\n\r\n- **网站数据统计**（管理员专属）\r\n  - 独立访客 UV\r\n    - 存入 Redis 的 HyperLogLog\r\n    - 支持单日查询和区间日期查询\r\n  - 日活跃用户 DAU\r\n    - 存入 Redis 的 Bitmap\r\n    - 支持单日查询和区间日期查询\r\n  - 权限管理（ Spring Security ）\r\n    - 只有管理员可以查看网站数据统计\r\n\r\n- **优化网站性能**\r\n  - 使用本地缓存 Caffeine 缓存热帖列表以及所有用户帖子的总数\r\n\r\n## 🔐 待实现及优化\r\n\r\n以下是我个人发现的本项目存在的问题，但是暂时没有头绪无法解决，集思广益，欢迎各位小伙伴提 PR 解决：\r\n\r\n- 注册模块无法正常跳转到操作提示界面（本地运行没有问题）\r\n- 评论功能的前端显示部分存在 Bug\r\n- 查询我的评论（未完善）\r\n\r\n以下是我觉得本项目还可以添加的功能，同样欢迎各位小伙伴提 issue 指出还可以增加哪些功能，或者直接提 PR 实现该功能：\r\n\r\n- 忘记密码（发送邮件找回密码）\r\n- 查询我的点赞\r\n- 管理员对帖子的二次点击取消置顶功能\r\n- 管理员对已删除帖子的恢复功能（本项目中的删除帖子并未将其从数据库中删除，只是将其状态设置为了拉黑）\r\n\r\n## 🌱 本地运行\r\n\r\n各位如果需要将项目部署在本地进行测试，以下环境请提前备好：\r\n\r\n- Java 8\r\n- MySQL 5.7\r\n- Redis\r\n- Kafka 2.13-2.7.0\r\n- Elasticsearch 6.4.3\r\n\r\n然后**修改配置文件中的信息为你自己的本地环境，直接运行是运行不了的**，而且相关私密信息我全部用 xxxxxxx 代替了。\r\n\r\n本地运行需要修改的配置文件信息如下：\r\n\r\n1 ）`application-develop.properties`：\r\n\r\n- MySQL\r\n- Spring Mail （邮箱需要开启 SMTP 服务）\r\n- Kafka：consumer.group-id （该字段见 Kafka 安装包中的 consumer.proerties，可自行修改, 修改完毕后需要重启 Kafka ）\r\n- Elasticsearch：cluster-name （该字段见 Elasticsearch 安装包中的 elasticsearch.yml ，可自行修改）\r\n- 七牛云（需要新建一个七牛云的对象存储空间，用来存放上传的头像图片）\r\n\r\n2 ）`logback-spring-develop.xml`：\r\n\r\n- LOG_PATH：日志存放的位置\r\n\r\n每次运行需要打开：\r\n\r\n- MySQL\r\n- Redis\r\n- Elasticsearch\r\n- Kafka\r\n\r\n另外，还需要事件建好数据库表，详细见下文。\r\n\r\n## 📜 数据库设计\r\n\r\n用户 `user`：\r\n\r\n```sql\r\nDROP TABLE IF EXISTS `user`;\r\nSET character_set_client = utf8mb4 ;\r\nCREATE TABLE `user` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `username` varchar(50) DEFAULT NULL,\r\n  `password` varchar(50) DEFAULT NULL,\r\n  `salt` varchar(50) DEFAULT NULL,\r\n  `email` varchar(100) DEFAULT NULL,\r\n  `type` int(11) DEFAULT NULL COMMENT '0-普通用户; 1-超级管理员; 2-版主;',\r\n  `status` int(11) DEFAULT NULL COMMENT '0-未激活; 1-已激活;',\r\n  `activation_code` varchar(100) DEFAULT NULL,\r\n  `header_url` varchar(200) DEFAULT NULL,\r\n  `create_time` timestamp NULL DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `index_username` (`username`(20)),\r\n  KEY `index_email` (`email`(20))\r\n) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8;\r\n```\r\n\r\n讨论帖 `discuss_post`：\r\n\r\n```sql\r\nDROP TABLE IF EXISTS `discuss_post`;\r\nSET character_set_client = utf8mb4 ;\r\nCREATE TABLE `discuss_post` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `user_id` int(11) DEFAULT NULL,\r\n  `title` varchar(100) DEFAULT NULL,\r\n  `content` text,\r\n  `type` int(11) DEFAULT NULL COMMENT '0-普通; 1-置顶;',\r\n  `status` int(11) DEFAULT NULL COMMENT '0-正常; 1-精华; 2-拉黑;',\r\n  `create_time` timestamp NULL DEFAULT NULL,\r\n  `comment_count` int(11) DEFAULT NULL,\r\n  `score` double DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `index_user_id` (`user_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r\n```\r\n\r\n评论（回复）`comment`：\r\n\r\n```sql\r\nCREATE TABLE `comment` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `user_id` int(11) DEFAULT NULL,\r\n  `entity_type` int(11) DEFAULT NULL COMMENT '评论目标的类别：1 帖子； 2 评论 ',\r\n  `entity_id` int(11) DEFAULT NULL COMMENT '评论目标的 id',\r\n  `target_id` int(11) DEFAULT NULL COMMENT '指明对谁进行评论',\r\n  `content` text,\r\n  `status` int(11) DEFAULT NULL COMMENT '状态：0 正常； 1 禁用',\r\n  `create_time` timestamp NULL DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `index_user_id` (`user_id`),\r\n  KEY `index_entity_id` (`entity_id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=247 DEFAULT CHARSET=utf8;\r\n```\r\n\r\n私信 `message`：\r\n\r\n```sql\r\nDROP TABLE IF EXISTS `message`;\r\nSET character_set_client = utf8mb4 ;\r\nCREATE TABLE `message` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `from_id` int(11) DEFAULT NULL,\r\n  `to_id` int(11) DEFAULT NULL,\r\n  `conversation_id` varchar(45) NOT NULL,\r\n  `content` text,\r\n  `status` int(11) DEFAULT NULL COMMENT '0-未读;1-已读;2-删除;',\r\n  `create_time` timestamp NULL DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `index_from_id` (`from_id`),\r\n  KEY `index_to_id` (`to_id`),\r\n  KEY `index_conversation_id` (`conversation_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r\n```\r\n\r\n## 🌌 理想的部署架构\r\n\r\n我每个都只部署了一台，以下是理想的部署架构：\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210211204207.png\"  />\r\n\r\n## 🎯 功能逻辑图\r\n\r\n画了一些不是那么严谨的图帮助各位小伙伴理清思绪。\r\n\r\n> 单向绿色箭头：\r\n>\r\n> - 前端模板 -> Controller：表示这个前端模板中有一个超链接是由这个 Controller 处理的\r\n> - Controller -> 前端模板：表示这个 Controller 会像该前端模板传递数据或者跳转\r\n>\r\n> 双向绿色箭头：表示 Controller 和前端模板之间进行参数的相互传递或使用\r\n>\r\n> 单向蓝色箭头：A -> B，表示 A 方法调用了 B 方法\r\n>\r\n> 单向红色箭头：数据库或缓存操作\r\n\r\n### 注册\r\n\r\n- 用户注册成功，将用户信息存入 MySQL，但此时该用户状态为未激活\r\n- 向用户发送激活邮件，用户点击链接则激活账号（ Spring Mail ）\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210204222249.png\" style=\"width:660px\" />\r\n\r\n### 登录 | 登出\r\n\r\n- 进入登录界面，动态生成验证码，并将验证码短暂存入 Redis （ 60 秒）\r\n\r\n- 用户登录成功（验证用户名、密码、验证码），生成登录凭证且设置状态为有效，并将登录凭证存入 Redis\r\n\r\n  注意：登录凭证存在有效期，在所有的请求执行之前，都会检查凭证是否有效和是否过期，只要该用户的凭证有效并在有效期时间内，本次请求就会一直持有该用户信息（使用 ThreadLocal 持有用户信息）\r\n\r\n- 勾选记住我，则延长登录凭证有效时间\r\n\r\n- 用户登录成功，将用户信息短暂存入 Redis （ 1 小时）\r\n\r\n- 用户登出，将凭证状态设为无效，并更新 Redis 中该用户的登录凭证信息\r\n\r\n下图是登录模块的功能逻辑图，并没有使用 Spring Security 提供的认证逻辑（我觉得这个模块是最复杂的，这张图其实很多细节还没有画全）\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210204233233.png)\r\n\r\n### 分页显示所有的帖子\r\n\r\n- 支持按照 “发帖时间” 显示\r\n- 支持按照 “热度排行” 显示（ Spring Quartz ）\r\n- 将热帖列表和所有帖子的总数存入本地缓存 Caffeine （利用分布式定时任务 Spring Quartz 每隔一段时间就刷新计算帖子的热度 /分数 — 见下文，而 Caffeine 里的数据更新不用我们操心，它天生就会自动的更新它拥有的数据，给它一个初始化方法就完事儿）\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210204222822.png\" style=\"width:660px\" />\r\n\r\n\r\n\r\n### 账号设置\r\n\r\n- 修改头像（异步请求）\r\n  - 将用户选择的头像图片文件上传至七牛云服务器\r\n- 修改密码\r\n\r\n此处只画出修改头像：\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210206121201.png\" style=\"width:700px\" />\r\n\r\n### 发布帖子（异步请求）\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210206122521.png\" style=\"width:660px\" />\r\n\r\n### 显示评论及相关信息\r\n\r\n> 评论部分前端的名称显示有些缺陷，有兴趣的小伙伴欢迎提 PR 解决~\r\n\r\n关于评论模块需要注意的就是评论表的设计，把握其中字段的含义，才能透彻了解这个功能的逻辑。\r\n\r\n评论 Comment 的目标类型（帖子，评论） entityType 和 entityId 以及对哪个用户进行评论 /回复 targetId 是由前端传递给 DiscussPostController 的\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207150925.png\" style=\"width:660px\" />\r\n\r\n一个帖子的详情页需要封装的信息大概如下：\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207151328.png\" style=\"width:660px\" />\r\n\r\n### 添加评论（事务管理）\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207122908.png\" style=\"width:660px\" />\r\n\r\n### 私信列表和详情页\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207161130.png\" style=\"width:700px\" />\r\n\r\n### 发送私信（异步请求）\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207161500.png\" style=\"width:660px\" />\r\n\r\n### 点赞（异步请求）\r\n\r\n将点赞相关信息存入 Redis 的数据结构 set 中。其中，key 命名为  `like:entity:entityType:entityId`，value 即点赞用户的 id 。比如 key =  `like:entity:2:246`  value =  `11` 表示用户 11 对实体类型 2 即评论进行了点赞，该评论的 id 是 246\r\n\r\n某个用户的获赞数量对应的存储在 Redis 中的 key 是 `like:user:userId`，value 就是这个用户的获赞数量\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207165837.png\" style=\"width:700px\" />\r\n\r\n### 我的获赞数量\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207170003.png\" style=\"width:660px\" />\r\n\r\n### 关注（异步请求）\r\n\r\n- 若 A 关注了 B，则 A 是 B 的粉丝 Follower，B 是 A 的目标 Followee\r\n- 关注的目标可以是用户、帖子、题目等，在实现时将这些目标抽象为实体（目前只做了关注用户）\r\n\r\n将某个用户关注的实体相关信息存储在 Redis 的数据结构 zset 中：key 是 `followee:userId:entityType` ，对应的 value 是 `zset(entityId, now)` ，以关注的时间进行排序。比如说 `followee:111:3` 对应的 value `(20, 2020-02-03-xxxx)`，表明用户 111 关注了实体类型为 3 即人(用户)，该帖子的 id 是 20，关注该帖子的时间是 2020-02-03-xxxx\r\n\r\n同样的，将某个实体拥有的粉丝相关信息也存储在 Redis 的数据结构 zset 中：key 是 `follower:entityType:entityId`，对应的 value 是 `zset(userId, now)`，以关注的时间进行排序\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207174046.png\" style=\"width:660px\" />\r\n\r\n### 关注列表\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210207175621.png\" style=\"width:660px\" />\r\n\r\n### 发送系统通知\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210207182917.png)\r\n\r\n### 显示系统通知\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210208153059.png)\r\n\r\n### 搜索\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210208161936.png)\r\n\r\n类似的，置顶、加精也会触发发帖事件，就不再图里面画出来了。\r\n\r\n### 置顶加精删除（异步请求）\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210208171729.png\" style=\"width:660px\" />\r\n\r\n### 网站数据统计\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210208170801.png)\r\n\r\n### 帖子热度计算\r\n\r\n每次发生点赞（给帖子点赞）、评论（给帖子评论）、加精的时候，就将这些帖子信息存入缓存 Redis 中，然后通过分布式的定时任务 Spring Quartz，每隔一段时间就从缓存中取出这些帖子进行计算分数。\r\n\r\n帖子分数 /热度计算公式：分数（热度） = 权重 + 发帖距离天数\r\n\r\n```java\r\n// 计算权重\r\ndouble w = (wonderful ? 75 : 0) + commentCount * 10 + likeCount * 2;\r\n// 分数 = 权重 + 发帖距离天数\r\ndouble score = Math.log10(Math.max(w, 1))\r\n        + (post.getCreateTime().getTime() - epoch.getTime()) / (1000 * 3600 * 24);\r\n```\r\n\r\n![]( https://gitee.com/veal98/images/raw/master/img/20210208173636.png)\r\n\r\n\r\n\r\n## 📖 配套教程\r\n\r\n想要自己从零开始实现这个项目或者深入理解的小伙伴，可以扫描下方二维码关注公众号『**飞天小牛肉**』，第一时间获取配套教程, 不仅会详细解释本项目涉及的各大技术点，还会汇总相关的常见面试题，目前尚在更新中。\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/20210204145531.png\" style=\"width:260px\" />\r\n\r\n并推荐我的开源教程类项目 [『 CS-Wiki 』]( https://gitee.com/veal98/CS-Wiki)，Gitee 推荐项目，目前已 0.9k star： 致力打造完善的 Java 后端知识体系，不仅仅帮助各位小伙伴快速且系统的准备面试(秋招 /社招)，更指引学习的方向\r\n\r\n## 📞 联系我\r\n\r\n有什么问题也可以添加我的微信，记得备注来意：格式 <u>（学校或公司 - 姓名或昵称 - 来意）</u>\r\n\r\n<img src=\"https://gitee.com/veal98/images/raw/master/img/微信图片_20210105121328.jpg\"  width=\"160px\">\r\n\r\n## 👏 鸣谢\r\n\r\n本项目参考[牛客网]( https://www.nowcoder.com/) — Java 高级工程师课程，感谢老师和平台", "content_rendered": "<p>博主目前东南大学研究生在读，近一个月开发了一款社区系统，为接下来的校招做准备，同时开源出来和各位小伙伴一起交流学习。项目仍然存在很多不完善的地方，大家多多指教~</p>\n<ul>\n<li>\n<p><strong>仓库地址</strong>： <a href=\"https://github.com/Veal98/Echo\" rel=\"nofollow\">https://github.com/Veal98/Echo</a></p>\n</li>\n<li>\n<p><strong>在线体验</strong>：项目已经部署到腾讯云服务器，各位小伙伴们可直接线上体验：<a href=\"http://1.15.127.74/\" rel=\"nofollow\">http://1.15.127.74/</a></p>\n<p>已内置三种不同身份的用户：</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>username</th>\n<th>password</th>\n<th>特殊权限</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>管理员</td>\n<td>admin</td>\n<td>admin</td>\n<td>数据统计、删除帖子</td>\n</tr>\n<tr>\n<td>版主</td>\n<td>master</td>\n<td>master</td>\n<td>置顶帖子、加精帖子</td>\n</tr>\n<tr>\n<td>普通用户</td>\n<td>user</td>\n<td>user</td>\n<td></td>\n</tr>\n</tbody></table></li>\n<li>\n<p><strong>文档地址</strong>：文档通过 Docsify + Gitee Pages 生成，在线访问地址： <a href=\"https://veal98.gitee.io/echo\" rel=\"nofollow\">https://veal98.gitee.io/echo</a></p>\n</li>\n</ul>\n<h2>💻 核心技术栈</h2>\n<p>后端：</p>\n<ul>\n<li>Spring</li>\n<li>Spring Boot 2.1.5 RELEASE</li>\n<li>Spring MVC</li>\n<li>ORM：MyBatis</li>\n<li>数据库：MySQL 5.7</li>\n<li>分布式缓存：Redis</li>\n<li>本地缓存：Caffeine</li>\n<li>消息队列：Kafka 2.13-2.7.0</li>\n<li>搜索引擎：Elasticsearch 6.4.3</li>\n<li>安全：Spring Security</li>\n<li>邮件任务：Spring Mail</li>\n<li>分布式定时任务：Spring Quartz</li>\n<li>日志：SLF4J （日志接口） + Logback （日志实现）</li>\n</ul>\n<p>前端：</p>\n<ul>\n<li>Thymeleaf</li>\n<li>Bootstrap 4.x</li>\n<li>Jquery</li>\n<li>Ajax</li>\n</ul>\n<h2>🎀 界面展示</h2>\n<p>首页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211205641.png\"/></p>\n<p>登录页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211205558.png\"/></p>\n<p>帖子详情页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211205741.png\"/></p>\n<p>个人主页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211205820.png\"/></p>\n<p>朋友私信页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211205857.png\"/></p>\n<p>私信详情页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211205948.png\"/></p>\n<p>系统通知页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211210122.png\"/></p>\n<p>通知详情页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211210152.png\"/></p>\n<p>账号设置页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211210238.png\"/></p>\n<p>数据统计页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211210323.png\"/></p>\n<p>搜索详情页：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211210531.png\"/></p>\n<h2>🎨 功能列表</h2>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210208222403.png\"/></p>\n<ul>\n<li>\n<p><strong>注册</strong></p>\n<ul>\n<li>用户注册成功，将用户信息存入 MySQL，但此时该用户状态为未激活</li>\n<li>向用户发送激活邮件，用户点击链接则激活账号（ Spring Mail ）</li>\n</ul>\n</li>\n<li>\n<p><strong>登录 | 登出</strong></p>\n<ul>\n<li>进入登录界面，动态生成验证码，并将验证码短暂存入 Redis （ 60 秒）</li>\n<li>用户登录成功（验证用户名、密码、验证码），生成登录凭证且设置状态为有效，并将登录凭证存入 Redis\n注意：登录凭证存在有效期，在所有的请求执行之前，都会检查凭证是否有效和是否过期，只要该用户的凭证有效并在有效期时间内，本次请求就会一直持有该用户信息（使用 ThreadLocal 持有用户信息）</li>\n<li>勾选记住我，则延长登录凭证有效时间</li>\n<li>用户登录成功，将用户信息短暂存入 Redis （ 1 小时）</li>\n<li>用户登出，将凭证状态设为无效，并更新 Redis 中该用户的登录凭证信息</li>\n</ul>\n</li>\n<li>\n<p><strong>账号设置</strong></p>\n<ul>\n<li>\n修改头像<ul>\n<li>将用户选择的头像图片文件上传至七牛云服务器</li>\n</ul>\n</li>\n<li>修改密码</li>\n</ul>\n</li>\n<li>\n<p><strong>帖子模块</strong></p>\n<ul>\n<li>发布帖子（过滤敏感词），将其存入 MySQL</li>\n<li>\n分页显示所有的帖子<ul>\n<li>支持按照 “发帖时间” 显示</li>\n<li>支持按照 “热度排行” 显示（ Spring Quartz ）</li>\n</ul>\n</li>\n<li>查看帖子详情</li>\n<li>\n权限管理（ Spring Security + Thymeleaf Security ）<ul>\n<li>未登录用户无法发帖</li>\n<li>“版主” 可以看到帖子的置顶和加精按钮并执行相应操作</li>\n<li>“管理员” 可以看到帖子的删除按钮并执行相应操作</li>\n<li>“普通用户” 无法看到帖子的置顶、加精、删除按钮，也无法执行相应操作</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>评论模块</strong></p>\n<ul>\n<li>发布对帖子的评论（过滤敏感词），将其存入 MySQL</li>\n<li>分页显示评论</li>\n<li>发布对评论的回复（过滤敏感词）</li>\n<li>\n权限管理（ Spring Security ）<ul>\n<li>未登录用户无法使用评论功能</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>私信模块</strong></p>\n<ul>\n<li>发送私信（过滤敏感词）</li>\n<li>\n私信列表<ul>\n<li>查询当前用户的会话列表</li>\n<li>每个会话只显示一条最新的私信</li>\n<li>支持分页显示</li>\n</ul>\n</li>\n<li>\n私信详情<ul>\n<li>查询某个会话所包含的所有私信</li>\n<li>访问私信详情时，将显示的私信设为已读状态</li>\n<li>支持分页显示</li>\n</ul>\n</li>\n<li>\n权限管理（ Spring Security ）<ul>\n<li>未登录用户无法使用私信功能</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>统一处理 404 / 500 异常</strong></p>\n<ul>\n<li>普通请求异常</li>\n<li>异步请求异常</li>\n</ul>\n</li>\n<li>\n<p><strong>统一记录日志</strong></p>\n</li>\n<li>\n<p><strong>点赞模块</strong></p>\n<ul>\n<li>支持对帖子、评论 /回复点赞</li>\n<li>第 1 次点赞，第 2 次取消点赞</li>\n<li>首页统计帖子的点赞数量</li>\n<li>详情页统计帖子和评论 /回复的点赞数量</li>\n<li>详情页显示当前登录用户的点赞状态（赞过了则显示已赞）</li>\n<li>统计我的获赞数量</li>\n<li>\n权限管理（ Spring Security ）<ul>\n<li>未登录用户无法使用点赞相关功能</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>关注模块</strong></p>\n<ul>\n<li>关注功能</li>\n<li>取消关注功能</li>\n<li>统计用户的关注数和粉丝数</li>\n<li>我的关注列表（查询某个用户关注的人），支持分页</li>\n<li>我的粉丝列表（查询某个用户的粉丝），支持分页</li>\n<li>\n权限管理（ Spring Security ）<ul>\n<li>未登录用户无法使用关注相关功能</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>系统通知模块</strong></p>\n<ul>\n<li>\n通知列表<ul>\n<li>显示评论、点赞、关注三种类型的通知</li>\n</ul>\n</li>\n<li>\n通知详情<ul>\n<li>分页显示某一类主题所包含的通知</li>\n<li>进入某种类型的系统通知详情，则将该页的所有未读的系统通知状态设置为已读</li>\n</ul>\n</li>\n<li>\n未读数量<ul>\n<li>分别显示每种类型的系统通知的未读数量</li>\n<li>显示所有系统通知的未读数量</li>\n</ul>\n</li>\n<li>导航栏显示所有消息的未读数量（未读私信 + 未读系统通知）</li>\n<li>\n权限管理（ Spring Security ）<ul>\n<li>未登录用户无法使用系统通知功能</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>搜索模块</strong></p>\n<ul>\n<li>\n发布事件<ul>\n<li>发布帖子时，通过消息队列将帖子异步地提交到 Elasticsearch 服务器</li>\n<li>为帖子增加评论时，通过消息队列将帖子异步地提交到 Elasticsearch 服务器</li>\n</ul>\n</li>\n<li>\n搜索服务<ul>\n<li>从 Elasticsearch 服务器搜索帖子</li>\n<li>从 Elasticsearch 服务器删除帖子（当帖子从数据库中被删除时）</li>\n</ul>\n</li>\n<li>显示搜索结果</li>\n</ul>\n</li>\n<li>\n<p><strong>网站数据统计</strong>（管理员专属）</p>\n<ul>\n<li>\n独立访客 UV<ul>\n<li>存入 Redis 的 HyperLogLog</li>\n<li>支持单日查询和区间日期查询</li>\n</ul>\n</li>\n<li>\n日活跃用户 DAU<ul>\n<li>存入 Redis 的 Bitmap</li>\n<li>支持单日查询和区间日期查询</li>\n</ul>\n</li>\n<li>\n权限管理（ Spring Security ）<ul>\n<li>只有管理员可以查看网站数据统计</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>优化网站性能</strong></p>\n<ul>\n<li>使用本地缓存 Caffeine 缓存热帖列表以及所有用户帖子的总数</li>\n</ul>\n</li>\n</ul>\n<h2>🔐 待实现及优化</h2>\n<p>以下是我个人发现的本项目存在的问题，但是暂时没有头绪无法解决，集思广益，欢迎各位小伙伴提 PR 解决：</p>\n<ul>\n<li>注册模块无法正常跳转到操作提示界面（本地运行没有问题）</li>\n<li>评论功能的前端显示部分存在 Bug</li>\n<li>查询我的评论（未完善）</li>\n</ul>\n<p>以下是我觉得本项目还可以添加的功能，同样欢迎各位小伙伴提 issue 指出还可以增加哪些功能，或者直接提 PR 实现该功能：</p>\n<ul>\n<li>忘记密码（发送邮件找回密码）</li>\n<li>查询我的点赞</li>\n<li>管理员对帖子的二次点击取消置顶功能</li>\n<li>管理员对已删除帖子的恢复功能（本项目中的删除帖子并未将其从数据库中删除，只是将其状态设置为了拉黑）</li>\n</ul>\n<h2>🌱 本地运行</h2>\n<p>各位如果需要将项目部署在本地进行测试，以下环境请提前备好：</p>\n<ul>\n<li>Java 8</li>\n<li>MySQL 5.7</li>\n<li>Redis</li>\n<li>Kafka 2.13-2.7.0</li>\n<li>Elasticsearch 6.4.3</li>\n</ul>\n<p>然后<strong>修改配置文件中的信息为你自己的本地环境，直接运行是运行不了的</strong>，而且相关私密信息我全部用 xxxxxxx 代替了。</p>\n<p>本地运行需要修改的配置文件信息如下：</p>\n<p>1 ）<code>application-develop.properties</code>：</p>\n<ul>\n<li>MySQL</li>\n<li>Spring Mail （邮箱需要开启 SMTP 服务）</li>\n<li>Kafka：consumer.group-id （该字段见 Kafka 安装包中的 consumer.proerties，可自行修改, 修改完毕后需要重启 Kafka ）</li>\n<li>Elasticsearch：cluster-name （该字段见 Elasticsearch 安装包中的 elasticsearch.yml ，可自行修改）</li>\n<li>七牛云（需要新建一个七牛云的对象存储空间，用来存放上传的头像图片）</li>\n</ul>\n<p>2 ）<code>logback-spring-develop.xml</code>：</p>\n<ul>\n<li>LOG_PATH：日志存放的位置</li>\n</ul>\n<p>每次运行需要打开：</p>\n<ul>\n<li>MySQL</li>\n<li>Redis</li>\n<li>Elasticsearch</li>\n<li>Kafka</li>\n</ul>\n<p>另外，还需要事件建好数据库表，详细见下文。</p>\n<h2>📜 数据库设计</h2>\n<p>用户 <code>user</code>：</p>\n<pre><code class=\"language-sql\">DROP TABLE IF EXISTS `user`;\nSET character_set_client = utf8mb4 ;\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `username` varchar(50) DEFAULT NULL,\n  `password` varchar(50) DEFAULT NULL,\n  `salt` varchar(50) DEFAULT NULL,\n  `email` varchar(100) DEFAULT NULL,\n  `type` int(11) DEFAULT NULL COMMENT '0-普通用户; 1-超级管理员; 2-版主;',\n  `status` int(11) DEFAULT NULL COMMENT '0-未激活; 1-已激活;',\n  `activation_code` varchar(100) DEFAULT NULL,\n  `header_url` varchar(200) DEFAULT NULL,\n  `create_time` timestamp NULL DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_username` (`username`(20)),\n  KEY `index_email` (`email`(20))\n) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8;\n</code></pre>\n<p>讨论帖 <code>discuss_post</code>：</p>\n<pre><code class=\"language-sql\">DROP TABLE IF EXISTS `discuss_post`;\nSET character_set_client = utf8mb4 ;\nCREATE TABLE `discuss_post` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `user_id` int(11) DEFAULT NULL,\n  `title` varchar(100) DEFAULT NULL,\n  `content` text,\n  `type` int(11) DEFAULT NULL COMMENT '0-普通; 1-置顶;',\n  `status` int(11) DEFAULT NULL COMMENT '0-正常; 1-精华; 2-拉黑;',\n  `create_time` timestamp NULL DEFAULT NULL,\n  `comment_count` int(11) DEFAULT NULL,\n  `score` double DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_user_id` (`user_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n</code></pre>\n<p>评论（回复）<code>comment</code>：</p>\n<pre><code class=\"language-sql\">CREATE TABLE `comment` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `user_id` int(11) DEFAULT NULL,\n  `entity_type` int(11) DEFAULT NULL COMMENT '评论目标的类别：1 帖子； 2 评论 ',\n  `entity_id` int(11) DEFAULT NULL COMMENT '评论目标的 id',\n  `target_id` int(11) DEFAULT NULL COMMENT '指明对谁进行评论',\n  `content` text,\n  `status` int(11) DEFAULT NULL COMMENT '状态：0 正常； 1 禁用',\n  `create_time` timestamp NULL DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_user_id` (`user_id`),\n  KEY `index_entity_id` (`entity_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=247 DEFAULT CHARSET=utf8;\n</code></pre>\n<p>私信 <code>message</code>：</p>\n<pre><code class=\"language-sql\">DROP TABLE IF EXISTS `message`;\nSET character_set_client = utf8mb4 ;\nCREATE TABLE `message` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `from_id` int(11) DEFAULT NULL,\n  `to_id` int(11) DEFAULT NULL,\n  `conversation_id` varchar(45) NOT NULL,\n  `content` text,\n  `status` int(11) DEFAULT NULL COMMENT '0-未读;1-已读;2-删除;',\n  `create_time` timestamp NULL DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_from_id` (`from_id`),\n  KEY `index_to_id` (`to_id`),\n  KEY `index_conversation_id` (`conversation_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n</code></pre>\n<h2>🌌 理想的部署架构</h2>\n<p>我每个都只部署了一台，以下是理想的部署架构：</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210211204207.png\"/>\n<h2>🎯 功能逻辑图</h2>\n<p>画了一些不是那么严谨的图帮助各位小伙伴理清思绪。</p>\n<blockquote>\n<p>单向绿色箭头：</p>\n<ul>\n<li>前端模板 -&gt; Controller：表示这个前端模板中有一个超链接是由这个 Controller 处理的</li>\n<li>Controller -&gt; 前端模板：表示这个 Controller 会像该前端模板传递数据或者跳转</li>\n</ul>\n<p>双向绿色箭头：表示 Controller 和前端模板之间进行参数的相互传递或使用</p>\n<p>单向蓝色箭头：A -&gt; B，表示 A 方法调用了 B 方法</p>\n<p>单向红色箭头：数据库或缓存操作</p>\n</blockquote>\n<h3>注册</h3>\n<ul>\n<li>用户注册成功，将用户信息存入 MySQL，但此时该用户状态为未激活</li>\n<li>向用户发送激活邮件，用户点击链接则激活账号（ Spring Mail ）</li>\n</ul>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210204222249.png\"/>\n<h3>登录 | 登出</h3>\n<ul>\n<li>\n<p>进入登录界面，动态生成验证码，并将验证码短暂存入 Redis （ 60 秒）</p>\n</li>\n<li>\n<p>用户登录成功（验证用户名、密码、验证码），生成登录凭证且设置状态为有效，并将登录凭证存入 Redis</p>\n<p>注意：登录凭证存在有效期，在所有的请求执行之前，都会检查凭证是否有效和是否过期，只要该用户的凭证有效并在有效期时间内，本次请求就会一直持有该用户信息（使用 ThreadLocal 持有用户信息）</p>\n</li>\n<li>\n<p>勾选记住我，则延长登录凭证有效时间</p>\n</li>\n<li>\n<p>用户登录成功，将用户信息短暂存入 Redis （ 1 小时）</p>\n</li>\n<li>\n<p>用户登出，将凭证状态设为无效，并更新 Redis 中该用户的登录凭证信息</p>\n</li>\n</ul>\n<p>下图是登录模块的功能逻辑图，并没有使用 Spring Security 提供的认证逻辑（我觉得这个模块是最复杂的，这张图其实很多细节还没有画全）</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210204233233.png\"/></p>\n<h3>分页显示所有的帖子</h3>\n<ul>\n<li>支持按照 “发帖时间” 显示</li>\n<li>支持按照 “热度排行” 显示（ Spring Quartz ）</li>\n<li>将热帖列表和所有帖子的总数存入本地缓存 Caffeine （利用分布式定时任务 Spring Quartz 每隔一段时间就刷新计算帖子的热度 /分数 — 见下文，而 Caffeine 里的数据更新不用我们操心，它天生就会自动的更新它拥有的数据，给它一个初始化方法就完事儿）</li>\n</ul>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210204222822.png\"/>\n<h3>账号设置</h3>\n<ul>\n<li>\n修改头像（异步请求）<ul>\n<li>将用户选择的头像图片文件上传至七牛云服务器</li>\n</ul>\n</li>\n<li>修改密码</li>\n</ul>\n<p>此处只画出修改头像：</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210206121201.png\"/>\n<h3>发布帖子（异步请求）</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210206122521.png\"/>\n<h3>显示评论及相关信息</h3>\n<blockquote>\n<p>评论部分前端的名称显示有些缺陷，有兴趣的小伙伴欢迎提 PR 解决~</p>\n</blockquote>\n<p>关于评论模块需要注意的就是评论表的设计，把握其中字段的含义，才能透彻了解这个功能的逻辑。</p>\n<p>评论 Comment 的目标类型（帖子，评论） entityType 和 entityId 以及对哪个用户进行评论 /回复 targetId 是由前端传递给 DiscussPostController 的</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207150925.png\"/>\n<p>一个帖子的详情页需要封装的信息大概如下：</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207151328.png\"/>\n<h3>添加评论（事务管理）</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207122908.png\"/>\n<h3>私信列表和详情页</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207161130.png\"/>\n<h3>发送私信（异步请求）</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207161500.png\"/>\n<h3>点赞（异步请求）</h3>\n<p>将点赞相关信息存入 Redis 的数据结构 set 中。其中，key 命名为  <code>like:entity:entityType:entityId</code>，value 即点赞用户的 id 。比如 key =  <code>like:entity:2:246</code>  value =  <code>11</code> 表示用户 11 对实体类型 2 即评论进行了点赞，该评论的 id 是 246</p>\n<p>某个用户的获赞数量对应的存储在 Redis 中的 key 是 <code>like:user:userId</code>，value 就是这个用户的获赞数量</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207165837.png\"/>\n<h3>我的获赞数量</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207170003.png\"/>\n<h3>关注（异步请求）</h3>\n<ul>\n<li>若 A 关注了 B，则 A 是 B 的粉丝 Follower，B 是 A 的目标 Followee</li>\n<li>关注的目标可以是用户、帖子、题目等，在实现时将这些目标抽象为实体（目前只做了关注用户）</li>\n</ul>\n<p>将某个用户关注的实体相关信息存储在 Redis 的数据结构 zset 中：key 是 <code>followee:userId:entityType</code> ，对应的 value 是 <code>zset(entityId, now)</code> ，以关注的时间进行排序。比如说 <code>followee:111:3</code> 对应的 value <code>(20, 2020-02-03-xxxx)</code>，表明用户 111 关注了实体类型为 3 即人(用户)，该帖子的 id 是 20，关注该帖子的时间是 2020-02-03-xxxx</p>\n<p>同样的，将某个实体拥有的粉丝相关信息也存储在 Redis 的数据结构 zset 中：key 是 <code>follower:entityType:entityId</code>，对应的 value 是 <code>zset(userId, now)</code>，以关注的时间进行排序</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207174046.png\"/>\n<h3>关注列表</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207175621.png\"/>\n<h3>发送系统通知</h3>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210207182917.png\"/></p>\n<h3>显示系统通知</h3>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210208153059.png\"/></p>\n<h3>搜索</h3>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210208161936.png\"/></p>\n<p>类似的，置顶、加精也会触发发帖事件，就不再图里面画出来了。</p>\n<h3>置顶加精删除（异步请求）</h3>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210208171729.png\"/>\n<h3>网站数据统计</h3>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210208170801.png\"/></p>\n<h3>帖子热度计算</h3>\n<p>每次发生点赞（给帖子点赞）、评论（给帖子评论）、加精的时候，就将这些帖子信息存入缓存 Redis 中，然后通过分布式的定时任务 Spring Quartz，每隔一段时间就从缓存中取出这些帖子进行计算分数。</p>\n<p>帖子分数 /热度计算公式：分数（热度） = 权重 + 发帖距离天数</p>\n<pre><code class=\"language-java\">// 计算权重\ndouble w = (wonderful ? 75 : 0) + commentCount * 10 + likeCount * 2;\n// 分数 = 权重 + 发帖距离天数\ndouble score = Math.log10(Math.max(w, 1))\n        + (post.getCreateTime().getTime() - epoch.getTime()) / (1000 * 3600 * 24);\n</code></pre>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210208173636.png\"/></p>\n<h2>📖 配套教程</h2>\n<p>想要自己从零开始实现这个项目或者深入理解的小伙伴，可以扫描下方二维码关注公众号『<strong>飞天小牛肉</strong>』，第一时间获取配套教程, 不仅会详细解释本项目涉及的各大技术点，还会汇总相关的常见面试题，目前尚在更新中。</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/20210204145531.png\"/>\n<p>并推荐我的开源教程类项目 <a href=\"https://gitee.com/veal98/CS-Wiki\" rel=\"nofollow\">『 CS-Wiki 』</a>，Gitee 推荐项目，目前已 0.9k star： 致力打造完善的 Java 后端知识体系，不仅仅帮助各位小伙伴快速且系统的准备面试(秋招 /社招)，更指引学习的方向</p>\n<h2>📞 联系我</h2>\n<p>有什么问题也可以添加我的微信，记得备注来意：格式 &lt;u&gt;（学校或公司 - 姓名或昵称 - 来意）&lt;/u&gt;</p>\n<img class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://gitee.com/veal98/images/raw/master/img/微信图片_20210105121328.jpg\"/>\n<h2>👏 鸣谢</h2>\n<p>本项目参考<a href=\"https://www.nowcoder.com/\" rel=\"nofollow\">牛客网</a> — Java 高级工程师课程，感谢老师和平台</p>\n", "last_modified": 1613134045, "replies": 24, "id": 753088}]