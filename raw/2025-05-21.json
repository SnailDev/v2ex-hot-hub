[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/1fc2/1400/864_large.png?m=1658911802", "name": "promotions", "avatar_normal": "https://cdn.v2ex.com/navatar/1fc2/1400/864_normal.png?m=1658911802", "title": "推广", "url": "https://www.v2ex.com/go/promotions", "topics": 9142, "footer": "", "header": "来自厂商的推广活动类主题，会被归类到这个节点。希望有情怀的产商们在发布推广内容时，主动选择发布到本节点下。点击 <a href=\"/help/node\">这里</a> 阅读 V2EX 的节点使用指南。", "title_alternative": "Promotions", "avatar_mini": "https://cdn.v2ex.com/navatar/1fc2/1400/864_mini.png?m=1658911802", "stars": 1009, "aliases": [], "root": false, "id": 864, "parent_node_name": ""}, "member": {"id": 363524, "username": "zhuzhiqiang", "url": "https://www.v2ex.com/u/zhuzhiqiang", "website": "", "twitter": "", "psn": "", "github": "zhuzhiqiang18", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/ff00/db47/363524_mini.png?m=1747801441", "avatar_normal": "https://cdn.v2ex.com/avatar/ff00/db47/363524_normal.png?m=1747801441", "avatar_large": "https://cdn.v2ex.com/avatar/ff00/db47/363524_large.png?m=1747801441", "created": 1542333398, "last_modified": 1747801441}, "last_reply_by": "g475266696", "last_touched": 1747829270, "title": "兄弟们薅羊毛了，新的企业信息查询平台，注册送 5 年 SVIP。", "url": "https://www.v2ex.com/t/1133226", "created": 1747801461, "deleted": 0, "content": "![1747801332851.png]( http://imgc.mybaicai.top/i/2025/05/21/682d54fc62ddf.png)\r\n[注册链接]( https://riskbird.com/#/?inviteCode=A6BA5E3F7B6CBAE1)", "content_rendered": "<p><img alt=\"1747801332851.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"http://imgc.mybaicai.top/i/2025/05/21/682d54fc62ddf.png\"/>\n<a href=\"https://riskbird.com/#/?inviteCode=A6BA5E3F7B6CBAE1\" rel=\"nofollow\">注册链接</a></p>\n", "last_modified": 1747801501, "replies": 358, "id": 1133226}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1747623425", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1747623425", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 7978, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1747623425", "stars": 1843, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 644820, "username": "eb55xyz", "url": "https://www.v2ex.com/u/eb55xyz", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/42fd47b9c9160c315d3075f66cbaabdb?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/42fd47b9c9160c315d3075f66cbaabdb?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/42fd47b9c9160c315d3075f66cbaabdb?s=73&d=retro", "created": 1692689148, "last_modified": 1692689148}, "last_reply_by": "gogozs", "last_touched": 1747823453, "title": "这个世界无时无刻不再刷新我的三观", "url": "https://www.v2ex.com/t/1133186", "created": 1747793902, "deleted": 0, "content": "孩子 3 岁到了上幼儿园的年纪，我们是农村户口，属于外来人员。社保年限都够，居住证也都有，按理说应该符合入学条件。然而，当我们满怀期待地去给孩子选幼儿园时，却被告知基本上没啥可能。当前区域的幼儿园招生名额早已被内部瓜分，不够的情况正逐步向外扩散。\r\n\r\n<br>\r\n直接电话咨询压根得不到真实答案，咨询了两个公立幼儿园，话里话外的意思都是不招生，但又暗示可以找人进。打听下来，进去的介绍费居然要 5 万，一个幼儿园就 5 万！这简直就是赤裸裸的金钱交易。没办法，我们只能退而求其次，让孩子上私立幼儿园。\r\n<br>\r\n第二个事是孩子上小学，同样遭遇了重重阻碍。外来人员的孩子想要顺利入学，居然也得花 10 来万找人找关系。这 10 万块钱，难道就能买到孩子的教育公平吗？这背后隐藏的是怎样的教育乱象和利益链条？\r\n\r\n<br>\r\n第三个事更是让我大跌眼镜。孩子的托育托管之类的机构，我原本以为这种机构都是正规途径招生，谁曾想也是学校与机构暗箱操作。他们提供没上托管、没上托育、没报培训班的名单，然后通过各种手段引导家长选择所谓的“优质”机构，这其中的猫腻和利益输送，让人不寒而栗。\r\n\r\n<br>\r\n这个世界无时无刻不在刷新我的三观，教育本应是公平公正的，却在现实中变得如此功利和金钱至上。我们这些普通家长，为了孩子能接受良好的教育，不得不陷入这种无奈的境地。", "content_rendered": "<p>孩子 3 岁到了上幼儿园的年纪，我们是农村户口，属于外来人员。社保年限都够，居住证也都有，按理说应该符合入学条件。然而，当我们满怀期待地去给孩子选幼儿园时，却被告知基本上没啥可能。当前区域的幼儿园招生名额早已被内部瓜分，不够的情况正逐步向外扩散。</p>\n<br/>\n直接电话咨询压根得不到真实答案，咨询了两个公立幼儿园，话里话外的意思都是不招生，但又暗示可以找人进。打听下来，进去的介绍费居然要 5 万，一个幼儿园就 5 万！这简直就是赤裸裸的金钱交易。没办法，我们只能退而求其次，让孩子上私立幼儿园。\n<br/>\n第二个事是孩子上小学，同样遭遇了重重阻碍。外来人员的孩子想要顺利入学，居然也得花 10 来万找人找关系。这 10 万块钱，难道就能买到孩子的教育公平吗？这背后隐藏的是怎样的教育乱象和利益链条？\n<br/>\n第三个事更是让我大跌眼镜。孩子的托育托管之类的机构，我原本以为这种机构都是正规途径招生，谁曾想也是学校与机构暗箱操作。他们提供没上托管、没上托育、没报培训班的名单，然后通过各种手段引导家长选择所谓的“优质”机构，这其中的猫腻和利益输送，让人不寒而栗。\n<br/>\n这个世界无时无刻不在刷新我的三观，教育本应是公平公正的，却在现实中变得如此功利和金钱至上。我们这些普通家长，为了孩子能接受良好的教育，不得不陷入这种无奈的境地。", "last_modified": 1747793902, "replies": 276, "id": 1133186}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1739135407", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1739135407", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 230197, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1739135407", "stars": 4343, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 480068, "username": "ansnail", "url": "https://www.v2ex.com/u/ansnail", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/1501/f964/480068_mini.png?m=1745458381", "avatar_normal": "https://cdn.v2ex.com/avatar/1501/f964/480068_normal.png?m=1745458381", "avatar_large": "https://cdn.v2ex.com/avatar/1501/f964/480068_large.png?m=1745458381", "avatar_xlarge": "https://cdn.v2ex.com/avatar/1501/f964/480068_xlarge.png?m=1745458381", "created": 1585581815, "last_modified": 1745458381}, "last_reply_by": "P945", "last_touched": 1747825412, "title": "怎么说服老婆换手机，她目前还在用 iPhone 7P", "url": "https://www.v2ex.com/t/1133184", "created": 1747793615, "deleted": 0, "content": "转眼间她的手机已经用了 10 年了，我真想给她换一个新的。毕竟有时候手机会比较卡，比如我给她视频，虽然已经接通了，手机还在响铃声。不过她已经习惯了日常使用，看抖音、小红书也都能正常浏览。她对这个手机的投资就是偶尔上拼多多换个手机壳。\r\n\r\n我已经跟她说过好多次了，都被她严肃地拒绝了，她说手机还能用。知道有的哥们建议直接买，但以我对她的了解，她真的会生气，不是开玩笑的那种。\r\n\r\n她平时对自己挺节俭的，但对我、孩子和老人花钱都不含糊。家里也不缺手机的钱，她就是觉得没必要买新的。", "content_rendered": "<p>转眼间她的手机已经用了 10 年了，我真想给她换一个新的。毕竟有时候手机会比较卡，比如我给她视频，虽然已经接通了，手机还在响铃声。不过她已经习惯了日常使用，看抖音、小红书也都能正常浏览。她对这个手机的投资就是偶尔上拼多多换个手机壳。</p>\n<p>我已经跟她说过好多次了，都被她严肃地拒绝了，她说手机还能用。知道有的哥们建议直接买，但以我对她的了解，她真的会生气，不是开玩笑的那种。</p>\n<p>她平时对自己挺节俭的，但对我、孩子和老人花钱都不含糊。家里也不缺手机的钱，她就是觉得没必要买新的。</p>\n", "last_modified": 1747793615, "replies": 151, "id": 1133184}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1695370146", "name": "career", "avatar_normal": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1695370146", "title": "职场话题", "url": "https://www.v2ex.com/go/career", "topics": 20232, "footer": "", "header": "这里，我们聊聊那些工作中遇到的开心和不开心的事。", "title_alternative": "Career", "avatar_mini": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1695370146", "stars": 3444, "aliases": [], "root": false, "id": 770, "parent_node_name": "work"}, "member": {"id": 666405, "username": "bello123", "url": "https://www.v2ex.com/u/bello123", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/89986a52d24da40d9638445cf0462d5b?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/89986a52d24da40d9638445cf0462d5b?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/89986a52d24da40d9638445cf0462d5b?s=73&d=retro", "created": 1702266115, "last_modified": 1747798581}, "last_reply_by": "Daus123", "last_touched": 1747825065, "title": "我被公司辞退了", "url": "https://www.v2ex.com/t/1133220", "created": 1747799039, "deleted": 0, "content": "6 年经验前端被公司辞退了，没通知、没预兆，需求还在噼里啪啦写呢，就被叫去会议室，HR 和上级一脸搞了套早就准备好的说辞：\r\n\r\n什么“人效问题”，\r\n什么“你存在感太低”，\r\n什么“你不能挑大梁”\r\n\r\n我真想问一句：我需求一个接一个干完的时候，你们怎么没说存在感低？我加班上线的时候怎么没说我不能挑大梁？\r\n\r\n一开始只愿赔我一个多月工资，我说不接受，HR 一副“你还想要啥”的表情。最后扯来扯去给了 N ，离职原因还让我写“个人原因”，不然‘恐吓’我说啥后面找工作背调怎么怎么样。\r\n\r\n这就是很多公司真实的一面：\r\n装修做得像硅谷，年会搞得像春晚，平时一个 PPT 一个 OKR 讲得天花乱坠，背地里一边 PUA 员工一边干人裁人，刀落得干净利落，还要你笑着说谢谢。\r\n\r\n现在 ai 工具啥都能做，前端找工作越来越难了。。", "content_rendered": "<p>6 年经验前端被公司辞退了，没通知、没预兆，需求还在噼里啪啦写呢，就被叫去会议室，HR 和上级一脸搞了套早就准备好的说辞：</p>\n<p>什么“人效问题”，\n什么“你存在感太低”，\n什么“你不能挑大梁”</p>\n<p>我真想问一句：我需求一个接一个干完的时候，你们怎么没说存在感低？我加班上线的时候怎么没说我不能挑大梁？</p>\n<p>一开始只愿赔我一个多月工资，我说不接受，HR 一副“你还想要啥”的表情。最后扯来扯去给了 N ，离职原因还让我写“个人原因”，不然‘恐吓’我说啥后面找工作背调怎么怎么样。</p>\n<p>这就是很多公司真实的一面：\n装修做得像硅谷，年会搞得像春晚，平时一个 PPT 一个 OKR 讲得天花乱坠，背地里一边 PUA 员工一边干人裁人，刀落得干净利落，还要你笑着说谢谢。</p>\n<p>现在 ai 工具啥都能做，前端找工作越来越难了。。</p>\n", "last_modified": 1747799039, "replies": 103, "id": 1133220}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/093f/65e0/59_large.png?m=1747623725", "name": "random", "avatar_normal": "https://cdn.v2ex.com/navatar/093f/65e0/59_normal.png?m=1747623725", "title": "随想", "url": "https://www.v2ex.com/go/random", "topics": 4038, "footer": "", "header": "有的时候，可以停下来找找灵感，然后再继续。", "title_alternative": "Random", "avatar_mini": "https://cdn.v2ex.com/navatar/093f/65e0/59_mini.png?m=1747623725", "stars": 1277, "aliases": [], "root": false, "id": 59, "parent_node_name": "v2ex"}, "member": {"id": 289368, "username": "PhilFreecess", "url": "https://www.v2ex.com/u/PhilFreecess", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/6e61/ef32/289368_mini.png?m=1734478559", "avatar_normal": "https://cdn.v2ex.com/avatar/6e61/ef32/289368_normal.png?m=1734478559", "avatar_large": "https://cdn.v2ex.com/avatar/6e61/ef32/289368_large.png?m=1734478559", "avatar_xlarge": "https://cdn.v2ex.com/avatar/6e61/ef32/289368_xlarge.png?m=1734478559", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/6e61/ef32/289368_xlarge.png?m=1734478559", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/6e61/ef32/289368_xlarge.png?m=1734478559", "created": 1517667931, "last_modified": 1734478559}, "last_reply_by": "MrBearin", "last_touched": 1747823806, "title": "上班这件事在我的视角里愈发荒诞起来", "url": "https://www.v2ex.com/t/1133156", "created": 1747789051, "deleted": 0, "content": "昨天临近下班叫去开会，几位个同事坐我旁边，一位领导对着大屏幕上的 PPT 侃侃而谈，用他中气十足还带有磁性的嗓音分析着报告中的优缺点，并给出修改建议，时而点到我的名字，我装模作样地点着头，发出赞同的声音。我确实是听到了他声带发出振动的声音，但我的大脑却并没有处理他所说的话，因为时间已经过了五点。\r\n\r\n下班的欲望勾出了我的魂儿，我的思绪被生拉硬拽到了一片没有道德约束的荒芜之地，这里的男女，茹毛饮血，衣不蔽体，不会言语，不让自己饿死才是唯一要事，于是他们厮杀，以命相拼只为饱腹，当看到这几个在会议室里对着一块发光屏幕的无毛猴子时，脑子里想的是，“今天的食物有着落啦！”。\r\n\r\n也许他们会在深夜里就着大屏幕发出的光，把我们的骨头啃食干净，然后把那块大屏幕当做诱饵，去引来更多擅长解释 PPT 的高手，于是那块索尼的电视就成了这群野蛮人的信仰，成了象征粮食和希望的石碑。\r\n\r\n最后只剩我的一副半框眼镜落在角落的白骨堆里，映着 PPT 上那堆不知所云的文字。", "content_rendered": "昨天临近下班叫去开会，几位个同事坐我旁边，一位领导对着大屏幕上的 PPT 侃侃而谈，用他中气十足还带有磁性的嗓音分析着报告中的优缺点，并给出修改建议，时而点到我的名字，我装模作样地点着头，发出赞同的声音。我确实是听到了他声带发出振动的声音，但我的大脑却并没有处理他所说的话，因为时间已经过了五点。<br /><br />下班的欲望勾出了我的魂儿，我的思绪被生拉硬拽到了一片没有道德约束的荒芜之地，这里的男女，茹毛饮血，衣不蔽体，不会言语，不让自己饿死才是唯一要事，于是他们厮杀，以命相拼只为饱腹，当看到这几个在会议室里对着一块发光屏幕的无毛猴子时，脑子里想的是，“今天的食物有着落啦！”。<br /><br />也许他们会在深夜里就着大屏幕发出的光，把我们的骨头啃食干净，然后把那块大屏幕当做诱饵，去引来更多擅长解释 PPT 的高手，于是那块索尼的电视就成了这群野蛮人的信仰，成了象征粮食和希望的石碑。<br /><br />最后只剩我的一副半框眼镜落在角落的白骨堆里，映着 PPT 上那堆不知所云的文字。", "last_modified": 1747789051, "replies": 99, "id": 1133156}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/642e/92ef/48_large.png?m=1559027807", "name": "tv", "avatar_normal": "https://cdn.v2ex.com/navatar/642e/92ef/48_normal.png?m=1559027807", "title": "剧集", "url": "https://www.v2ex.com/go/tv", "topics": 895, "footer": "", "header": "", "title_alternative": "TV", "avatar_mini": "https://cdn.v2ex.com/navatar/642e/92ef/48_mini.png?m=1559027807", "stars": 896, "aliases": [], "root": false, "id": 48, "parent_node_name": "life"}, "member": {"id": 602122, "username": "life90", "url": "https://www.v2ex.com/u/life90", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/e71d/60a1/602122_mini.png?m=1747789846", "avatar_normal": "https://cdn.v2ex.com/avatar/e71d/60a1/602122_normal.png?m=1747789846", "avatar_large": "https://cdn.v2ex.com/avatar/e71d/60a1/602122_large.png?m=1747789846", "avatar_xlarge": "https://cdn.v2ex.com/avatar/e71d/60a1/602122_xlarge.png?m=1747789846", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/e71d/60a1/602122_xlarge.png?m=1747789846", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/e71d/60a1/602122_xlarge.png?m=1747789846", "created": 1668668016, "last_modified": 1747789846}, "last_reply_by": "shiroyuri", "last_touched": 1747823421, "title": "推荐一部正常恋爱过程的电视剧", "url": "https://www.v2ex.com/t/1133164", "created": 1747790437, "deleted": 0, "content": "现在无脑的恋爱剧太多，以至于很多人分不清正常的恋爱应该是怎样的？\r\n剧名叫 幻想情侣 梦幻情侣\r\n两个人之间有责任，有纠结，但女主人很直球。看起来很爽不拖沓。有误会也能当面解释清楚。\r\n虽然是喜剧，有些逻辑硬伤。但不妨碍每个人设都有自己丰满的个性。整整 16 集说了三四队人的爱情纠结。b 站有人上传了原片合集，可以直接看。推荐不要快进，有很多伏笔，一语双关。", "content_rendered": "现在无脑的恋爱剧太多，以至于很多人分不清正常的恋爱应该是怎样的？<br />剧名叫 幻想情侣 梦幻情侣<br />两个人之间有责任，有纠结，但女主人很直球。看起来很爽不拖沓。有误会也能当面解释清楚。<br />虽然是喜剧，有些逻辑硬伤。但不妨碍每个人设都有自己丰满的个性。整整 16 集说了三四队人的爱情纠结。b 站有人上传了原片合集，可以直接看。推荐不要快进，有很多伏笔，一语双关。", "last_modified": 1747793185, "replies": 95, "id": 1133164}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1733731195", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1733731195", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 66765, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1733731195", "stars": 9325, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 342945, "username": "wuxier", "url": "https://www.v2ex.com/u/wuxier", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/dfc4a5c1b9aa23223c17c81dff484628?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/dfc4a5c1b9aa23223c17c81dff484628?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/dfc4a5c1b9aa23223c17c81dff484628?s=73&d=retro", "created": 1534752646, "last_modified": 1747790698}, "last_reply_by": "kenberkeley", "last_touched": 1747824934, "title": "想替换掉 Jenkins，有啥好的推荐吗？", "url": "https://www.v2ex.com/t/1133168", "created": 1747790851, "deleted": 0, "content": "目前正在使用 Jenkins 进行 cicd ，最近想要换个一个 cicd 工具，看来好几个基本都是推荐的 gitlab runner ，不知道有没有其他推荐的", "content_rendered": "目前正在使用 Jenkins 进行 cicd ，最近想要换个一个 cicd 工具，看来好几个基本都是推荐的 gitlab runner ，不知道有没有其他推荐的", "last_modified": 1747790851, "replies": 72, "id": 1133168}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/72b3/2a1f/57_large.png?m=1575483197", "name": "c", "avatar_normal": "https://cdn.v2ex.com/navatar/72b3/2a1f/57_normal.png?m=1575483197", "title": "C", "url": "https://www.v2ex.com/go/c", "topics": 954, "footer": "", "header": "", "title_alternative": "C", "avatar_mini": "https://cdn.v2ex.com/navatar/72b3/2a1f/57_mini.png?m=1575483197", "stars": 1060, "aliases": [], "root": false, "id": 57, "parent_node_name": "programming"}, "member": {"id": 81681, "username": "mikewang", "url": "https://www.v2ex.com/u/mikewang", "website": "", "twitter": "", "psn": "", "github": "MikeWang000000", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/b728/8030/81681_mini.png?m=1683726911", "avatar_normal": "https://cdn.v2ex.com/avatar/b728/8030/81681_normal.png?m=1683726911", "avatar_large": "https://cdn.v2ex.com/avatar/b728/8030/81681_large.png?m=1683726911", "created": 1416026416, "last_modified": 1683726911}, "last_reply_by": "Alias4ck", "last_touched": 1747824666, "title": "坑爹的 GBK：大家都应该去用 UTF-8", "url": "https://www.v2ex.com/t/1133223", "created": 1747800696, "deleted": 0, "content": "最近在把我用 C 写的一批 Linux 工具移植到 Windows 上，在字符编码上遇到了大坑。\r\n\r\n---\r\n\r\n举个简单的例子：数文件层级。\r\n\r\n在 Linux 上，我们数斜杠数量就好。\r\n\r\n在 Windows 上，再加上反斜杠，应该就好了。——我是这样想的。\r\n\r\n```c\r\n#include <stdio.h>\r\n\r\nint main(int argc, char *argv[]) {\r\n    int level;\r\n    const char *p;\r\n\r\n    if (argc < 2) {\r\n        return 1;\r\n    }\r\n\r\n    for (level = 0, p = argv[1]; *p; p++) {\r\n        if (*p == '/' || *p == '\\\\') {\r\n            level++;\r\n        }\r\n    }\r\n\r\n    printf(\"%d\\n\", level);\r\n\r\n    return 0;\r\n}\r\n```\r\n\r\n用 MinGW 的 GCC 编译一下，然后跑几个用例：\r\n\r\n```batch\r\ngcc -o getlevel.exe getlevel.c\r\n```\r\n\r\n```\r\nC:\\>getlevel C:\\浙江省\\宁波市\\北仑区\\小港街道.txt\r\n4\r\n\r\nC:\\>getlevel C:\\浙江省\\宁波市\\北仑区\\大碶街道.txt\r\n5\r\n\r\n```\r\n\r\n天塌了，这么简单的代码竟然出了 bug 。\r\n\r\n---\r\n\r\n原来 `碶` 的 编码是 `{0xb4, 0x5c}`，其中 `0x5c` 和反斜杠的 ASCII 编码一模一样。\r\n\r\nGBK 的第一字节兼容 ASCII ，但第二字节的范围是 `0x40` ~ `0xfe`，与 ASCII 的 `0x00` ~ `0x7f` 重叠。BUG 就这么诞生了。\r\n\r\nUTF-8 没有这个问题的原因是：只要字节范围在 `0x00` ~ `0x7f`，那么就一定是 ASCII ，因为后续字节都避开了这个范围。虽然中文编码比 GB 系列长了，但是这个设计确实省了很多事。包括 `strstr()` `strcmp()` 之类的都不会出现奇奇怪怪的 bug 。\r\n\r\n---\r\n\r\n或许我应该使用 `wmain()` 然后获取 `wchar_t`，但是 `wmain()` 是 Windows 特有的东西，这样做就没法和 Linux 公用同一套代码了。目前加上了 `mbtowc()` 作为修复。原本简洁的代码变得十分复杂：（\r\n\r\n说到这又不得不吐槽下 Windows 的各种奇怪 API 了，不知道它是如何存活到现在的...", "content_rendered": "<p>最近在把我用 C 写的一批 Linux 工具移植到 Windows 上，在字符编码上遇到了大坑。</p>\n<hr/>\n<p>举个简单的例子：数文件层级。</p>\n<p>在 Linux 上，我们数斜杠数量就好。</p>\n<p>在 Windows 上，再加上反斜杠，应该就好了。——我是这样想的。</p>\n<pre><code class=\"language-c\">#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n    int level;\n    const char *p;\n\n    if (argc &lt; 2) {\n        return 1;\n    }\n\n    for (level = 0, p = argv[1]; *p; p++) {\n        if (*p == '/' || *p == '\\\\') {\n            level++;\n        }\n    }\n\n    printf(\"%d\\n\", level);\n\n    return 0;\n}\n</code></pre>\n<p>用 MinGW 的 GCC 编译一下，然后跑几个用例：</p>\n<pre><code class=\"language-batch\">gcc -o getlevel.exe getlevel.c\n</code></pre>\n<pre><code>C:\\&gt;getlevel C:\\浙江省\\宁波市\\北仑区\\小港街道.txt\n4\n\nC:\\&gt;getlevel C:\\浙江省\\宁波市\\北仑区\\大碶街道.txt\n5\n\n</code></pre>\n<p>天塌了，这么简单的代码竟然出了 bug 。</p>\n<hr/>\n<p>原来 <code>碶</code> 的 编码是 <code>{0xb4, 0x5c}</code>，其中 <code>0x5c</code> 和反斜杠的 ASCII 编码一模一样。</p>\n<p>GBK 的第一字节兼容 ASCII ，但第二字节的范围是 <code>0x40</code> ~ <code>0xfe</code>，与 ASCII 的 <code>0x00</code> ~ <code>0x7f</code> 重叠。BUG 就这么诞生了。</p>\n<p>UTF-8 没有这个问题的原因是：只要字节范围在 <code>0x00</code> ~ <code>0x7f</code>，那么就一定是 ASCII ，因为后续字节都避开了这个范围。虽然中文编码比 GB 系列长了，但是这个设计确实省了很多事。包括 <code>strstr()</code> <code>strcmp()</code> 之类的都不会出现奇奇怪怪的 bug 。</p>\n<hr/>\n<p>或许我应该使用 <code>wmain()</code> 然后获取 <code>wchar_t</code>，但是 <code>wmain()</code> 是 Windows 特有的东西，这样做就没法和 Linux 公用同一套代码了。目前加上了 <code>mbtowc()</code> 作为修复。原本简洁的代码变得十分复杂：（</p>\n<p>说到这又不得不吐槽下 Windows 的各种奇怪 API 了，不知道它是如何存活到现在的...</p>\n", "last_modified": 1747800706, "replies": 62, "id": 1133223}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c74d/97b0/16_large.png?m=1727584731", "name": "share", "avatar_normal": "https://cdn.v2ex.com/navatar/c74d/97b0/16_normal.png?m=1727584731", "title": "分享发现", "url": "https://www.v2ex.com/go/share", "topics": 43474, "footer": "", "header": "分享你看到的好玩的，有信息量的，欢迎从这里获取灵感。", "title_alternative": "Share", "avatar_mini": "https://cdn.v2ex.com/navatar/c74d/97b0/16_mini.png?m=1727584731", "stars": 6069, "aliases": [], "root": false, "id": 16, "parent_node_name": "v2ex"}, "member": {"id": 327405, "username": "lynan", "url": "https://www.v2ex.com/u/lynan", "website": "https://thelynan.com", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/e948/e05f/327405_mini.png?m=1744162878", "avatar_normal": "https://cdn.v2ex.com/avatar/e948/e05f/327405_normal.png?m=1744162878", "avatar_large": "https://cdn.v2ex.com/avatar/e948/e05f/327405_large.png?m=1744162878", "avatar_xlarge": "https://cdn.v2ex.com/avatar/e948/e05f/327405_xlarge.png?m=1744162878", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/e948/e05f/327405_xlarge.png?m=1744162878", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/e948/e05f/327405_xlarge.png?m=1744162878", "created": 1530867418, "last_modified": 1744162878}, "last_reply_by": "337136897", "last_touched": 1747816376, "title": "突发奇想：用半导体制冷散热器来做一个“制冷杯垫”？", "url": "https://www.v2ex.com/t/1133174", "created": 1747791477, "deleted": 0, "content": "如题，做成杯垫可以保持杯子里的冰水一直是冰水吧，cool cool 的", "content_rendered": "<p>如题，做成杯垫可以保持杯子里的冰水一直是冰水吧，cool cool 的</p>\n", "last_modified": 1747791498, "replies": 53, "id": 1133174}]