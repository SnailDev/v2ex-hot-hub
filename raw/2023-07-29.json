[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1689070442", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1689070442", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 57651, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1689070442", "stars": 8505, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 73175, "username": "xuyong3250", "url": "https://www.v2ex.com/u/xuyong3250", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/8f4a561725fd8aedd7f08989d7a88b48?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/8f4a561725fd8aedd7f08989d7a88b48?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/8f4a561725fd8aedd7f08989d7a88b48?s=73&d=retro", "created": 1410013486, "last_modified": 1410013486}, "last_reply_by": "ashuai", "last_touched": 1690629512, "title": "如何使用公网域名+服务器反代 NAS 内网服务。", "url": "https://www.v2ex.com/t/960677", "created": 1690553465, "deleted": 0, "content": "目前有腾讯云的一个轻量云服务器，已经注册好域名以及备案。家中有一台 nas ，部署了一些服务，其中一些服务是 https 的。\r\n\r\n目前是想使用公网各种子域名来访问 NAS 的各种服务。云服务器只作为转发的跳板。尝试了 frp+nginx 的方案，会有 502 的错误，麻烦各位问一下这种情况一般什么解决方案最省心。", "content_rendered": "<p>目前有腾讯云的一个轻量云服务器，已经注册好域名以及备案。家中有一台 nas ，部署了一些服务，其中一些服务是 https 的。</p>\n<p>目前是想使用公网各种子域名来访问 NAS 的各种服务。云服务器只作为转发的跳板。尝试了 frp+nginx 的方案，会有 502 的错误，麻烦各位问一下这种情况一般什么解决方案最省心。</p>\n", "last_modified": 1690553465, "replies": 49, "id": 960677}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/3cef/96dc/949_large.png?m=1614702882", "name": "nas", "avatar_normal": "https://cdn.v2ex.com/navatar/3cef/96dc/949_normal.png?m=1614702882", "title": "NAS", "url": "https://www.v2ex.com/go/nas", "topics": 1293, "footer": "", "header": "关于网络存储设备的讨论", "title_alternative": "NAS", "avatar_mini": "https://cdn.v2ex.com/navatar/3cef/96dc/949_mini.png?m=1614702882", "stars": 1702, "aliases": [], "root": false, "id": 949, "parent_node_name": "hardware"}, "member": {"id": 486495, "username": "leohk", "url": "https://www.v2ex.com/u/leohk", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/50396eb2c29f73b8ad555e84406c2976?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/50396eb2c29f73b8ad555e84406c2976?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/50396eb2c29f73b8ad555e84406c2976?s=73&d=retro", "created": 1587959276, "last_modified": 1690548985}, "last_reply_by": "01802", "last_touched": 1690631746, "title": "nas 已入手，入门机型，真香！", "url": "https://www.v2ex.com/t/960662", "created": 1690549136, "deleted": 0, "content": "两周前发求助帖，咨询 nas 购买的建议，一众 v 友们发来了各种科普，最终，在各种衡量下，选择了比省钱方案还实惠的新方案，买了威联通 462c ，现在已经开始看片了。\r\n\r\n详细配置：\r\n* 威联通 462c\r\n* 西数红盘 4T*4\r\n* Juplink 2.5G USB 网卡\r\n* 六类网线\r\n\r\n本来我的要求也不高，目前这套配置两个需求都满足了。首先，影音播放直接在 nas 里部署了 plex 服务器，原本在 mac 上就用 plex ，所以用起来丝毫不陌生。而且 plex 几乎支持全平台，还能加载字幕，现在电脑、手机、iPad 都能看片，而且播放进度是各平台统一的，非常自在。遇到的唯一问题是，安卓 tv 上的 plex 无法登陆，plex.tv/link 验证码没反应，目前还没找到解决办法。\r\n至于备份素材，在千兆路由器下，mac 无线传输在 30-50mb/s ，通过 2.5GbE 网卡，可以达到 80-110mb/s 之间，虽然说速度依然没有移动硬盘快，4tb 素材传了两个晚上，但导出的影片文件完全可以无线备份，大体积素材再有线连接统一备份，而且现在 Raid5 下，安全性也比单一移动硬盘好很多。\r\n\r\n上次求助的主要原因是，没有搞明白有线与无线的区别，现在才明白 2.5GbE 是有线标准，无线主要看路由器与接受端（笔记本、手机等）的性能。也正是在大家的普及，才明白 ssd 缓存对我而言作用也不大，尤其要感谢 @dilu 的评论，他告诉我说老款机型也能满足我需求，但老款实在不会买，所以最后从官旗店入手了 462c 。\r\n\r\n站上 nas 高手如云，发总结帖也不能放过求助的机会。当前想问的是：\r\n1. 要不要把家里的千兆路由器换成 2.5GbE 的？无线速度能提高到 100mb/s 吗，有线速度能达到 200mb/s 吗？\r\n2. 新手把硬盘做成静态卷了，现在想挂载网盘到 nas ，发现需要存储池，那么静态卷要改成存储池，是不是只有全盘格式化？\r\n3. 求求推荐一个好用的本地自动备份 app ，目前在用 free file sync 。\r\n\r\n🔗上次的求助帖： https://www.v2ex.com/t/955653#reply55", "content_rendered": "两周前发求助帖，咨询 nas 购买的建议，一众 v 友们发来了各种科普，最终，在各种衡量下，选择了比省钱方案还实惠的新方案，买了威联通 462c ，现在已经开始看片了。<br /><br />详细配置：<br />* 威联通 462c<br />* 西数红盘 4T*4<br />* Juplink 2.5G USB 网卡<br />* 六类网线<br /><br />本来我的要求也不高，目前这套配置两个需求都满足了。首先，影音播放直接在 nas 里部署了 plex 服务器，原本在 mac 上就用 plex ，所以用起来丝毫不陌生。而且 plex 几乎支持全平台，还能加载字幕，现在电脑、手机、iPad 都能看片，而且播放进度是各平台统一的，非常自在。遇到的唯一问题是，安卓 tv 上的 plex 无法登陆，<a target=\"_blank\" href=\"http://plex.tv/link\" rel=\"nofollow noopener\">plex.tv/link</a> 验证码没反应，目前还没找到解决办法。<br />至于备份素材，在千兆路由器下，mac 无线传输在 30-50mb/s ，通过 2.5GbE 网卡，可以达到 80-110mb/s 之间，虽然说速度依然没有移动硬盘快，4tb 素材传了两个晚上，但导出的影片文件完全可以无线备份，大体积素材再有线连接统一备份，而且现在 Raid5 下，安全性也比单一移动硬盘好很多。<br /><br />上次求助的主要原因是，没有搞明白有线与无线的区别，现在才明白 2.5GbE 是有线标准，无线主要看路由器与接受端（笔记本、手机等）的性能。也正是在大家的普及，才明白 ssd 缓存对我而言作用也不大，尤其要感谢 @<a target=\"_blank\" href=\"/member/dilu\" rel=\"nofollow noopener\">dilu</a> 的评论，他告诉我说老款机型也能满足我需求，但老款实在不会买，所以最后从官旗店入手了 462c 。<br /><br />站上 nas 高手如云，发总结帖也不能放过求助的机会。当前想问的是：<br />1. 要不要把家里的千兆路由器换成 2.5GbE 的？无线速度能提高到 100mb/s 吗，有线速度能达到 200mb/s 吗？<br />2. 新手把硬盘做成静态卷了，现在想挂载网盘到 nas ，发现需要存储池，那么静态卷要改成存储池，是不是只有全盘格式化？<br />3. 求求推荐一个好用的本地自动备份 app ，目前在用 free file sync 。<br /><br />🔗上次的求助帖： <a target=\"_blank\" href=\"https://www.v2ex.com/t/955653#reply55\" rel=\"nofollow noopener\">https://www.v2ex.com/t/955653#reply55</a>", "last_modified": 1690549173, "replies": 46, "id": 960662}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c74d/97b0/16_large.png?m=1650127281", "name": "share", "avatar_normal": "https://cdn.v2ex.com/navatar/c74d/97b0/16_normal.png?m=1650127281", "title": "分享发现", "url": "https://www.v2ex.com/go/share", "topics": 39099, "footer": "", "header": "分享你看到的好玩的，有信息量的，欢迎从这里获取灵感。", "title_alternative": "Share", "avatar_mini": "https://cdn.v2ex.com/navatar/c74d/97b0/16_mini.png?m=1650127281", "stars": 5443, "aliases": [], "root": false, "id": 16, "parent_node_name": "v2ex"}, "member": {"id": 537011, "username": "wxlwsy", "url": "https://www.v2ex.com/u/wxlwsy", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/59144d2f0212cf38addf4f885a9b10ec?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/59144d2f0212cf38addf4f885a9b10ec?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/59144d2f0212cf38addf4f885a9b10ec?s=73&d=retro", "created": 1615385293, "last_modified": 1679128306}, "last_reply_by": "kimwang", "last_touched": 1690631089, "title": "最近好像摆地摊的越来越多了", "url": "https://www.v2ex.com/t/960727", "created": 1690596843, "deleted": 0, "content": "城管就在旁边,不知道是啥原因,没有赶走,这颗少见. \r\n大部分是中年夫妻店,卖熟食烧烤卤菜居多.\r\n还有一部分卖水果的.\r\n最近出现了一些妹子卖廉价首饰的, 还有卖三明治的(路边摊卖这玩意有人买?).预计是做不长的.\r\n年轻男的倒是少,只看见一个手机贴膜.\r\n另外一个现象就是理发店变多了,卷的厉害.一条街 100 来米居然有 4 家理发店.\r\n\r\n发这个没啥意思,就是感叹地摊变多了,至少多了一倍. 已经有些影响小区出入通道了.", "content_rendered": "<p>城管就在旁边,不知道是啥原因,没有赶走,这颗少见.\n大部分是中年夫妻店,卖熟食烧烤卤菜居多.\n还有一部分卖水果的.\n最近出现了一些妹子卖廉价首饰的, 还有卖三明治的(路边摊卖这玩意有人买?).预计是做不长的.\n年轻男的倒是少,只看见一个手机贴膜.\n另外一个现象就是理发店变多了,卷的厉害.一条街 100 来米居然有 4 家理发店.</p>\n<p>发这个没啥意思,就是感叹地摊变多了,至少多了一倍. 已经有些影响小区出入通道了.</p>\n", "last_modified": 1690596843, "replies": 37, "id": 960727}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/03af/dbd6/63_large.png?m=1644490200", "name": "java", "avatar_normal": "https://cdn.v2ex.com/navatar/03af/dbd6/63_normal.png?m=1644490200", "title": "Java", "url": "https://www.v2ex.com/go/java", "topics": 5545, "footer": "", "header": "Sun 公司发明，被广泛使用的一门编程语言。", "title_alternative": "Java", "avatar_mini": "https://cdn.v2ex.com/navatar/03af/dbd6/63_mini.png?m=1644490200", "stars": 5345, "aliases": [], "root": false, "id": 63, "parent_node_name": "programming"}, "member": {"id": 602839, "username": "kachu673", "url": "https://www.v2ex.com/u/kachu673", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/3f5b31b2a220e0eff1484ee0d4895003?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/3f5b31b2a220e0eff1484ee0d4895003?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/3f5b31b2a220e0eff1484ee0d4895003?s=73&d=retro", "created": 1669002607, "last_modified": 1688229400}, "last_reply_by": "lululau", "last_touched": 1690632133, "title": "Spring 开发，流程冗余", "url": "https://www.v2ex.com/t/960762", "created": 1690607164, "deleted": 0, "content": "使用 SpringBoot 开发项目，少不了要写 Controller 、Service 、Mapper ，虽然 MP 可以一定程度上简化后两者的开发，但必要时候仍要将三个过程全部走完。所以我想请教各位网友：\r\n1. 其他框架有没有简化这个步骤的？（我不在意代码的耦合，以及各种代码入侵）\r\n2. 能推荐一些快速开发的框架吗？\r\n3. 如果可以，我喜欢用 php 来开发（我觉得个人开发者掌握 php 是非常有必要的）\r\n4. 当然，使用 js 、python 、go 、cpp 的框架我也都可以接受。", "content_rendered": "<p>使用 SpringBoot 开发项目，少不了要写 Controller 、Service 、Mapper ，虽然 MP 可以一定程度上简化后两者的开发，但必要时候仍要将三个过程全部走完。所以我想请教各位网友：</p>\n<ol>\n<li>其他框架有没有简化这个步骤的？（我不在意代码的耦合，以及各种代码入侵）</li>\n<li>能推荐一些快速开发的框架吗？</li>\n<li>如果可以，我喜欢用 php 来开发（我觉得个人开发者掌握 php 是非常有必要的）</li>\n<li>当然，使用 js 、python 、go 、cpp 的框架我也都可以接受。</li>\n</ol>\n", "last_modified": 1690607164, "replies": 34, "id": 960762}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1689070442", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1689070442", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 57651, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1689070442", "stars": 8505, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 254353, "username": "FaiChou", "url": "https://www.v2ex.com/u/FaiChou", "website": "https://faichou.com", "twitter": "FaiChou_zh", "psn": "", "github": "FaiChou", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/e7d0/b1a7/254353_mini.png?m=1684739460", "avatar_normal": "https://cdn.v2ex.com/avatar/e7d0/b1a7/254353_normal.png?m=1684739460", "avatar_large": "https://cdn.v2ex.com/avatar/e7d0/b1a7/254353_large.png?m=1684739460", "avatar_xlarge": "https://cdn.v2ex.com/avatar/e7d0/b1a7/254353_xlarge.png?m=1684739460", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/e7d0/b1a7/254353_xlarge.png?m=1684739460", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/e7d0/b1a7/254353_xlarge.png?m=1684739460", "created": 1505371596, "last_modified": 1684739460}, "last_reply_by": "ThirdFlame", "last_touched": 1690630735, "title": "使用这个公钥是否能解密此加密信息？", "url": "https://www.v2ex.com/t/960808", "created": 1690623316, "deleted": 0, "content": "使用私钥 rsa 加密内容：\r\n\r\n```\r\ngl9E9ye5acVdn5MusJj0pay6y+i6qDna8DTSNHkkPjBsEE9DJ34cKhrCiNuRWIxY4+DQmrrQPMzibgCvP+3unWelxwmzMRzmSQQDTm9Z+oBiHGCcqWXtz47H/b1uoC4T6ZXkTrtuYAOVlRDn+2xKPcO9qpq5gS+cU6SPSRcRP/cAthqnLQ0FJJjY2vOqsoKda5IStxLjRSJPXs5zmJFVH/ii7J/u1vp8R6sUUNLhJmahFlODgOoEPDTW50k6O5LS8MYniZLvI/Czj9bt1z850rXGl3wHvfwmhIWH8umR5NqaPJ8/kDJXGk5ejHoljRN2GJ4iL48hvJawsoCNHpktrlqRtE6geQF74gB5hLzSvY2ZUcRo1fx7DxpPnRqfx7ctf6m7nC0vohax4NvdYJ7TWnK+oDGCJFFJRNg+L/DJlcckjWmL3nGoFYgHSfVwZXfTLOcKOtx8Pvd2Udjx+9t2/T4DqJNmhVzBvX/tEqBlv+deAbk8DaGx4FcBWm1b5j2qMUqA33OVIYLOzgFFzdMF8OqEvAPwqyg1pHjt9iPzWXWVjzFA2Z1yVou2TwZ6Z9QqrjaGyK6KfpT+h241FgCVrZgbg8g/JWU7wFHQjiEjJTSTZu6FeweQpRUuUy/A8LS0Wabh0eZQ0hcPcRBwf2gGOlmbfCojrfZNHbjRkh0Rz6YAq3T5q5VdfsKXBUMJcTilfUGRzIivVAFmM5Lx5WzgV7LsPSIuEq5sNFEypk5rrKplTirq3qE6maI3+KKbUccAs2ak6zGLtfFnJasXivwYPrivUnTDz9cV1dVFYKe72/aGnNby2TxWvNpbDu60T8BlX1CFwFj+JQyDqFu+EvgBTQ==\r\n```\r\n\r\n对应的公钥：\r\n\r\n```\r\n-----BEGIN PUBLIC KEY-----\r\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCGhpgMD1okxLnUMCDNLCJwP/P0\r\nUHVlKQWLHPiPCbhgITZHcZim4mgxSWWb0SLDNZL9ta1HlErR6k02xrFyqtYzjDu2\r\nrGInUC0BCZOsln0a7wDwyOA43i5NO8LsNory6fEKbx7aT3Ji8TZCDAfDMbhxvxOf\r\ndPMBDjxP5X3zr7cWgwIDAQAB\r\n-----END PUBLIC KEY-----\r\n```\r\n\r\n\r\n如果解密出的结果像是下面这样，应该是对的：\r\n\r\n```\r\n{\"2658844581501957149\":{\"file_name\":\"wwdc2023-10117_hd.mp4\",\"file_size\":\"100597894\",\"pick_code\":\"b12x4iiejvkkq83a\",\"url\":{\"url\":\"http:\\/\\/xxx.xxx.com\\/xxx\\/wwdc2023-10117_hd.mp4?t=1690607362&u=101248331&s=1048576&d=658578066-b12x4iiejvkkq83a-0&c=2&f=1&k=ddb3d920081771b2f40ee75164c5bb1b&us=52428800&uc=10&v=1\",\"client\":2,\"desc\":null,\"isp\":null,\"oss_id\":\"fhnfile\\/xxx\",\"ooid\":\"\"}}}\r\n```\r\n\r\n注意由于加密内容数据比较大，需要分段解密。\r\n\r\n不管用什么方法，python/go/java 还是网上的在线解密工具，只要能解密出来即可。\r\n\r\n我用 swift 写了分段解密，结果解密失败，用网上在线的解密工具也是失败，不知道网上的工具是不是由于不支持分段解密才失败的。\r\n\r\n下面是我用 Swift 写的方法：\r\n\r\n```swift\r\nimport Security\r\nfunc convertPublicKey(pemString: String) -> SecKey? {\r\n    // 1. Remove headers, newlines and spaces\r\n    let keyString = pemString\r\n        .replacingOccurrences(of: \"-----BEGIN PUBLIC KEY-----\", with: \"\")\r\n        .replacingOccurrences(of: \"-----END PUBLIC KEY-----\", with: \"\")\r\n        .replacingOccurrences(of: \"\\n\", with: \"\")\r\n        .replacingOccurrences(of: \" \", with: \"\")\r\n\r\n    // 2. Convert base64 string to Data\r\n    guard let keyData = Data(base64Encoded: keyString) else {\r\n        return nil\r\n    }\r\n\r\n    // 3. Create key dictionary\r\n    let keyDict: [CFString: Any] = [\r\n        kSecAttrKeyType: kSecAttrKeyTypeRSA,\r\n        kSecAttrKeyClass: kSecAttrKeyClassPublic,\r\n        kSecAttrKeySizeInBits: NSNumber(value: 2048),\r\n        kSecReturnPersistentRef: true\r\n    ]\r\n\r\n    // 4. Create SecKey from Data\r\n    var error: Unmanaged<CFError>?\r\n    guard let key = SecKeyCreateWithData(keyData as CFData, keyDict as CFDictionary, &error) else {\r\n        // Handle the error here\r\n        return nil\r\n    }\r\n\r\n    return key\r\n}\r\nlet rsaKeyInSwift = convertPublicKey(pemString: rsaPublicKey)\r\nfunc rsaDecrypt(data: Data) -> Data? {\r\n    let blockSize = SecKeyGetBlockSize(rsaKeyInSwift!)\r\n    var decryptedData = Data()\r\n    for i in stride(from: 0, to: data.count, by: blockSize) {\r\n        let endIndex = min(i + blockSize, data.count)\r\n        let chunk = data[i..<endIndex]\r\n        print(chunk)\r\n        var error: Unmanaged<CFError>?\r\n        guard let decryptedChunk = SecKeyCreateDecryptedData(\r\n            rsaKeyInSwift!,\r\n            .rsaEncryptionPKCS1,\r\n            chunk as CFData,\r\n            &error\r\n        ) else {\r\n            print(\"Decryption error:\", error.debugDescription)\r\n            return nil\r\n        }\r\n        decryptedData.append(decryptedChunk as Data)\r\n    }\r\n\r\n    return decryptedData\r\n}\r\n```\r\n\r\n报错：\r\n\r\n```\r\nDecryption error: Optional(Swift.Unmanaged<__C.CFErrorRef>(_value: Error Domain=NSOSStatusErrorDomain Code=-50 \"RSAdecrypt wrong input (err -27)\" UserInfo={numberOfErrorsDeep=0, NSDescription=RSAdecrypt wrong input (err -27)}))\r\n\r\n```\r\n\r\n在网上找到了一个开源的项目，它用 go 语言自己实现了 rsa 解密算法，不清楚为什么它不用标准库来解密。我用标准库实现的（ Swift 版本）无法解密。所以不清楚是不是我的代码问题还是其他问题。\r\n\r\n下面是 go 语言开源版本：\r\n\r\n```go\r\nfunc rsaDecrypt(input []byte) []byte {\r\n\toutput := make([]byte, 0)\r\n\tcipherSize, blockSize := len(input), rsaServerKey.Size()\r\n\tfor offset := 0; offset < cipherSize; offset += blockSize {\r\n\t\tsliceSize := blockSize\r\n\t\tif offset+sliceSize > cipherSize {\r\n\t\t\tsliceSize = cipherSize - offset\r\n\t\t}\r\n\r\n\t\tn := big.NewInt(0).SetBytes(input[offset : offset+sliceSize])\r\n\t\tm := big.NewInt(0).Exp(n, big.NewInt(int64(rsaServerKey.E)), rsaServerKey.N)\r\n\t\tb := m.Bytes()\r\n\t\tindex := bytes.IndexByte(b, '\\x00')\r\n\t\tif index < 0 {\r\n\t\t\treturn nil\r\n\t\t}\r\n\t\toutput = append(output, b[index+1:]...)\r\n\t}\r\n\treturn output\r\n}\r\n```\r\n\r\n由于不熟悉 go 语言，大概看了下算法，也是计算 `(n^e) mod N`。\r\n\r\n所以请大家用这个公钥解密上面的内容，能否解密出来？", "content_rendered": "<p>使用私钥 rsa 加密内容：</p>\n<pre><code>gl9E9ye5acVdn5MusJj0pay6y+i6qDna8DTSNHkkPjBsEE9DJ34cKhrCiNuRWIxY4+DQmrrQPMzibgCvP+3unWelxwmzMRzmSQQDTm9Z+oBiHGCcqWXtz47H/b1uoC4T6ZXkTrtuYAOVlRDn+2xKPcO9qpq5gS+cU6SPSRcRP/cAthqnLQ0FJJjY2vOqsoKda5IStxLjRSJPXs5zmJFVH/ii7J/u1vp8R6sUUNLhJmahFlODgOoEPDTW50k6O5LS8MYniZLvI/Czj9bt1z850rXGl3wHvfwmhIWH8umR5NqaPJ8/kDJXGk5ejHoljRN2GJ4iL48hvJawsoCNHpktrlqRtE6geQF74gB5hLzSvY2ZUcRo1fx7DxpPnRqfx7ctf6m7nC0vohax4NvdYJ7TWnK+oDGCJFFJRNg+L/DJlcckjWmL3nGoFYgHSfVwZXfTLOcKOtx8Pvd2Udjx+9t2/T4DqJNmhVzBvX/tEqBlv+deAbk8DaGx4FcBWm1b5j2qMUqA33OVIYLOzgFFzdMF8OqEvAPwqyg1pHjt9iPzWXWVjzFA2Z1yVou2TwZ6Z9QqrjaGyK6KfpT+h241FgCVrZgbg8g/JWU7wFHQjiEjJTSTZu6FeweQpRUuUy/A8LS0Wabh0eZQ0hcPcRBwf2gGOlmbfCojrfZNHbjRkh0Rz6YAq3T5q5VdfsKXBUMJcTilfUGRzIivVAFmM5Lx5WzgV7LsPSIuEq5sNFEypk5rrKplTirq3qE6maI3+KKbUccAs2ak6zGLtfFnJasXivwYPrivUnTDz9cV1dVFYKe72/aGnNby2TxWvNpbDu60T8BlX1CFwFj+JQyDqFu+EvgBTQ==\n</code></pre>\n<p>对应的公钥：</p>\n<pre><code>-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCGhpgMD1okxLnUMCDNLCJwP/P0\nUHVlKQWLHPiPCbhgITZHcZim4mgxSWWb0SLDNZL9ta1HlErR6k02xrFyqtYzjDu2\nrGInUC0BCZOsln0a7wDwyOA43i5NO8LsNory6fEKbx7aT3Ji8TZCDAfDMbhxvxOf\ndPMBDjxP5X3zr7cWgwIDAQAB\n-----END PUBLIC KEY-----\n</code></pre>\n<p>如果解密出的结果像是下面这样，应该是对的：</p>\n<pre><code>{\"2658844581501957149\":{\"file_name\":\"wwdc2023-10117_hd.mp4\",\"file_size\":\"100597894\",\"pick_code\":\"b12x4iiejvkkq83a\",\"url\":{\"url\":\"http:\\/\\/xxx.xxx.com\\/xxx\\/wwdc2023-10117_hd.mp4?t=1690607362&amp;u=101248331&amp;s=1048576&amp;d=658578066-b12x4iiejvkkq83a-0&amp;c=2&amp;f=1&amp;k=ddb3d920081771b2f40ee75164c5bb1b&amp;us=52428800&amp;uc=10&amp;v=1\",\"client\":2,\"desc\":null,\"isp\":null,\"oss_id\":\"fhnfile\\/xxx\",\"ooid\":\"\"}}}\n</code></pre>\n<p>注意由于加密内容数据比较大，需要分段解密。</p>\n<p>不管用什么方法，python/go/java 还是网上的在线解密工具，只要能解密出来即可。</p>\n<p>我用 swift 写了分段解密，结果解密失败，用网上在线的解密工具也是失败，不知道网上的工具是不是由于不支持分段解密才失败的。</p>\n<p>下面是我用 Swift 写的方法：</p>\n<pre><code class=\"language-swift\">import Security\nfunc convertPublicKey(pemString: String) -&gt; SecKey? {\n    // 1. Remove headers, newlines and spaces\n    let keyString = pemString\n        .replacingOccurrences(of: \"-----BEGIN PUBLIC KEY-----\", with: \"\")\n        .replacingOccurrences(of: \"-----END PUBLIC KEY-----\", with: \"\")\n        .replacingOccurrences(of: \"\\n\", with: \"\")\n        .replacingOccurrences(of: \" \", with: \"\")\n\n    // 2. Convert base64 string to Data\n    guard let keyData = Data(base64Encoded: keyString) else {\n        return nil\n    }\n\n    // 3. Create key dictionary\n    let keyDict: [CFString: Any] = [\n        kSecAttrKeyType: kSecAttrKeyTypeRSA,\n        kSecAttrKeyClass: kSecAttrKeyClassPublic,\n        kSecAttrKeySizeInBits: NSNumber(value: 2048),\n        kSecReturnPersistentRef: true\n    ]\n\n    // 4. Create SecKey from Data\n    var error: Unmanaged&lt;CFError&gt;?\n    guard let key = SecKeyCreateWithData(keyData as CFData, keyDict as CFDictionary, &amp;error) else {\n        // Handle the error here\n        return nil\n    }\n\n    return key\n}\nlet rsaKeyInSwift = convertPublicKey(pemString: rsaPublicKey)\nfunc rsaDecrypt(data: Data) -&gt; Data? {\n    let blockSize = SecKeyGetBlockSize(rsaKeyInSwift!)\n    var decryptedData = Data()\n    for i in stride(from: 0, to: data.count, by: blockSize) {\n        let endIndex = min(i + blockSize, data.count)\n        let chunk = data[i..&lt;endIndex]\n        print(chunk)\n        var error: Unmanaged&lt;CFError&gt;?\n        guard let decryptedChunk = SecKeyCreateDecryptedData(\n            rsaKeyInSwift!,\n            .rsaEncryptionPKCS1,\n            chunk as CFData,\n            &amp;error\n        ) else {\n            print(\"Decryption error:\", error.debugDescription)\n            return nil\n        }\n        decryptedData.append(decryptedChunk as Data)\n    }\n\n    return decryptedData\n}\n</code></pre>\n<p>报错：</p>\n<pre><code>Decryption error: Optional(Swift.Unmanaged&lt;__C.CFErrorRef&gt;(_value: Error Domain=NSOSStatusErrorDomain Code=-50 \"RSAdecrypt wrong input (err -27)\" UserInfo={numberOfErrorsDeep=0, NSDescription=RSAdecrypt wrong input (err -27)}))\n\n</code></pre>\n<p>在网上找到了一个开源的项目，它用 go 语言自己实现了 rsa 解密算法，不清楚为什么它不用标准库来解密。我用标准库实现的（ Swift 版本）无法解密。所以不清楚是不是我的代码问题还是其他问题。</p>\n<p>下面是 go 语言开源版本：</p>\n<pre><code class=\"language-go\">func rsaDecrypt(input []byte) []byte {\n\toutput := make([]byte, 0)\n\tcipherSize, blockSize := len(input), rsaServerKey.Size()\n\tfor offset := 0; offset &lt; cipherSize; offset += blockSize {\n\t\tsliceSize := blockSize\n\t\tif offset+sliceSize &gt; cipherSize {\n\t\t\tsliceSize = cipherSize - offset\n\t\t}\n\n\t\tn := big.NewInt(0).SetBytes(input[offset : offset+sliceSize])\n\t\tm := big.NewInt(0).Exp(n, big.NewInt(int64(rsaServerKey.E)), rsaServerKey.N)\n\t\tb := m.Bytes()\n\t\tindex := bytes.IndexByte(b, '\\x00')\n\t\tif index &lt; 0 {\n\t\t\treturn nil\n\t\t}\n\t\toutput = append(output, b[index+1:]...)\n\t}\n\treturn output\n}\n</code></pre>\n<p>由于不熟悉 go 语言，大概看了下算法，也是计算 <code>(n^e) mod N</code>。</p>\n<p>所以请大家用这个公钥解密上面的内容，能否解密出来？</p>\n", "last_modified": 1690623316, "replies": 32, "id": 960808}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/677e/0972/824_large.png?m=1588961795", "name": "router", "avatar_normal": "https://cdn.v2ex.com/navatar/677e/0972/824_normal.png?m=1588961795", "title": "路由器", "url": "https://www.v2ex.com/go/router", "topics": 1548, "footer": "", "header": "数据包流动的乐趣", "title_alternative": "Router", "avatar_mini": "https://cdn.v2ex.com/navatar/677e/0972/824_mini.png?m=1588961795", "stars": 1929, "aliases": [], "root": false, "id": 824, "parent_node_name": "geek"}, "member": {"id": 206459, "username": "xiaopanzi", "url": "https://www.v2ex.com/u/xiaopanzi", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/a2a3/d5b8/206459_mini.png?m=1683524953", "avatar_normal": "https://cdn.v2ex.com/avatar/a2a3/d5b8/206459_normal.png?m=1683524953", "avatar_large": "https://cdn.v2ex.com/avatar/a2a3/d5b8/206459_large.png?m=1683524953", "created": 1481970782, "last_modified": 1683524953}, "last_reply_by": "huguotai", "last_touched": 1690625549, "title": "路由器不在弱电箱，如何实现全屋互联？", "url": "https://www.v2ex.com/t/960711", "created": 1690591851, "deleted": 0, "content": "最近在折腾装修，对网络知识了解很少，查阅了网上很多关于组网的信息，还是有很多疑问。\r\n\r\n为了实现 Wi-Fi 信号可用性更好，我计划把路由器放在客厅的电视柜，而不放在弱电箱。一个简单的方案如下：\r\n\r\n![img]( https://i.imgur.com/Lv8vN6l.png)\r\n\r\n但是这样的话，房间 1/2 通过有线连接的网络和路由器的 Wi-Fi 网络是不是就不在一个网段，从而无法实现互联？\r\n\r\n另外一个疑问是，这样的 Apple TV 要通过有线接入网络的话，是不是可以直接插到路由器的 Lan 口？\r\n\r\n针对全屋互联的问题，我看网上的方式是加两个交换机，一个在弱电箱，一个在路由器。它的原理是什么，如何布线？是否有更好的方案？\r\n\r\n----\r\n再查了一下网上的科普文章，发现  PoE AC 一体化路由器，这是不是比较好的方案？因为有线设备没有那么多，交换机感觉有点大材小用。", "content_rendered": "<p>最近在折腾装修，对网络知识了解很少，查阅了网上很多关于组网的信息，还是有很多疑问。</p>\n<p>为了实现 Wi-Fi 信号可用性更好，我计划把路由器放在客厅的电视柜，而不放在弱电箱。一个简单的方案如下：</p>\n<p><img alt=\"img\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.imgur.com/Lv8vN6l.png\"/></p>\n<p>但是这样的话，房间 1/2 通过有线连接的网络和路由器的 Wi-Fi 网络是不是就不在一个网段，从而无法实现互联？</p>\n<p>另外一个疑问是，这样的 Apple TV 要通过有线接入网络的话，是不是可以直接插到路由器的 Lan 口？</p>\n<p>针对全屋互联的问题，我看网上的方式是加两个交换机，一个在弱电箱，一个在路由器。它的原理是什么，如何布线？是否有更好的方案？</p>\n<hr/>\n<p>再查了一下网上的科普文章，发现  PoE AC 一体化路由器，这是不是比较好的方案？因为有线设备没有那么多，交换机感觉有点大材小用。</p>\n", "last_modified": 1690592256, "replies": 32, "id": 960711}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/70ef/df2e/17_large.png?m=1660301119", "name": "create", "avatar_normal": "https://cdn.v2ex.com/navatar/70ef/df2e/17_normal.png?m=1660301119", "title": "分享创造", "url": "https://www.v2ex.com/go/create", "topics": 20840, "footer": "", "header": "欢迎你在这里发布自己的最新作品！", "title_alternative": "Create", "avatar_mini": "https://cdn.v2ex.com/navatar/70ef/df2e/17_mini.png?m=1660301119", "stars": 4956, "aliases": [], "root": false, "id": 17, "parent_node_name": "geek"}, "member": {"id": 474551, "username": "lcandy", "url": "https://www.v2ex.com/u/lcandy", "website": "", "twitter": "serilcandy", "psn": "", "github": "lcandy2", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/3dddbd2962a28dc880ff23f9ef50e87a?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/3dddbd2962a28dc880ff23f9ef50e87a?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/3dddbd2962a28dc880ff23f9ef50e87a?s=73&d=retro", "created": 1583468828, "last_modified": 1690044722}, "last_reply_by": "shinyy", "last_touched": 1690630701, "title": "学生党福利🌏校园内网 WebVPN 转换：从此告别校园网访问限制！", "url": "https://www.v2ex.com/t/960716", "created": 1690593392, "deleted": 0, "content": "最近写了一个新项目：校园内网 Web VPN 网址转换工具\r\n\r\n这个工具的主要目标是简化学生和教师访问校园网络资源的过程。\r\n\r\n只需粘贴常规网址，这个工具就能即刻将其转化为学校的 Web VPN 网址。\r\n\r\n## **欢迎来用捏！ [https://wrdvpn.vercel.app/]( https://wrdvpn.vercel.app/)**\r\n\r\n![]( https://raw.githubusercontent.com/lcandy2/webvpn-converter/main/assests/main.png)\r\n\r\n---\r\n\r\n优势：\r\n- 简易操作：只需一次粘贴，无需繁琐的步骤和设置\r\n- 多学校支持：已预设近百所学校的 Web VPN 参数，可直接使用\r\n\r\n**目前支持的学校：**中国科学技术大学, 皖南医学院, 合肥工业大学, 铜陵学院, 皖西学院, 阜阳师范大学, 安徽医科大学, 北京农学院, 清华大学, 北京外国语大学, 中国人民大学, 北京邮电大学, 北京石油化工学院, 北京师范大学, 北京理工大学, 北京大学, 北京航空航天大学, 北京化工大学, 北京建筑大学, 中国青年政治学院, 中国传媒大学, 厦门大学, 福建中医药大学, 甘肃政法大学, 甘肃农业大学, 西北师范大学, 兰州工业学院, 广州医科大学, 肇庆学院, 广州大学, 韩山师范学院, 广东海洋大学, 桂林航天工业学院, 河池学院, 海南大学, 河北环境工程学院, 河北医科大学, 中国人民警察大学, 河北地质大学, 东北大学秦皇岛分校, 河北大学, 河北农业大学, 河北对外经贸职业学院, 洛阳师范学院, 郑州轻工业大学, 郑州航空工业管理学院, 黄冈师范学院, 汉江师范学院, 湖北警官学院, 武汉理工大学, 华中师范大学, 湖北大学, 邵阳学院, 湖南科技大学, 湖南农业大学, 吉首大学, 树达学院, 湖南大学, 南京工程学院, 江苏大学, 河海大学, 无锡学院, 常熟理工学院, 苏州城市学院, 扬州大学, 江苏海洋大学, 天平学院, 苏州科技大学, 吉林大学, 长春人文学院, 渤海大学, 大连理工大学, 沈阳工程学院, 大连工业大学, 沈阳农业大学, 沈阳建筑大学, 辽宁工程技术大学, 宁夏大学, 山东外国语职业技术大学, 枣庄学院, 济南大学, 山东青年政治学院, 山东科技大学, 济宁学院, 山东石油化工学院, 山东财经大学, 青岛大学, 烟台大学, 山东大学, 上海海事大学, 复旦大学, 东华大学, 上海工程技术大学, 上海交通大学医学院, 西安航空学院, 西安科技大学, 西安交通大学, 西安财经大学, 西安理工大学, 西安建筑科技大学, 西安欧亚学院, 西北大学, 安康学院, 西华师范大学, 四川师范大学, 四川传媒学院, 南开大学, 天津城建大学, 天津城建大学（教师）, 云南大学, 云南中医药大学, 玉溪师范学院, 保山学院, 温州医科大学, 嘉兴学院, 嘉兴南湖学院, 中国美术学院, 浙江学院\r\n\r\n同时，还有 加密 和 解密 的 API ，在 [lcandy2/webvpn-converter]( https://github.com/lcandy2/webvpn-converter) 可以看到！\r\n\r\n---\r\n\r\n### 想要改进和建议！谢谢大家！", "content_rendered": "<p>最近写了一个新项目：校园内网 Web VPN 网址转换工具</p>\n<p>这个工具的主要目标是简化学生和教师访问校园网络资源的过程。</p>\n<p>只需粘贴常规网址，这个工具就能即刻将其转化为学校的 Web VPN 网址。</p>\n<h2><strong>欢迎来用捏！ <a href=\"https://wrdvpn.vercel.app/\" rel=\"nofollow\">https://wrdvpn.vercel.app/</a></strong></h2>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://raw.githubusercontent.com/lcandy2/webvpn-converter/main/assests/main.png\"/></p>\n<hr/>\n<p>优势：</p>\n<ul>\n<li>简易操作：只需一次粘贴，无需繁琐的步骤和设置</li>\n<li>多学校支持：已预设近百所学校的 Web VPN 参数，可直接使用</li>\n</ul>\n<p><strong>目前支持的学校：</strong>中国科学技术大学, 皖南医学院, 合肥工业大学, 铜陵学院, 皖西学院, 阜阳师范大学, 安徽医科大学, 北京农学院, 清华大学, 北京外国语大学, 中国人民大学, 北京邮电大学, 北京石油化工学院, 北京师范大学, 北京理工大学, 北京大学, 北京航空航天大学, 北京化工大学, 北京建筑大学, 中国青年政治学院, 中国传媒大学, 厦门大学, 福建中医药大学, 甘肃政法大学, 甘肃农业大学, 西北师范大学, 兰州工业学院, 广州医科大学, 肇庆学院, 广州大学, 韩山师范学院, 广东海洋大学, 桂林航天工业学院, 河池学院, 海南大学, 河北环境工程学院, 河北医科大学, 中国人民警察大学, 河北地质大学, 东北大学秦皇岛分校, 河北大学, 河北农业大学, 河北对外经贸职业学院, 洛阳师范学院, 郑州轻工业大学, 郑州航空工业管理学院, 黄冈师范学院, 汉江师范学院, 湖北警官学院, 武汉理工大学, 华中师范大学, 湖北大学, 邵阳学院, 湖南科技大学, 湖南农业大学, 吉首大学, 树达学院, 湖南大学, 南京工程学院, 江苏大学, 河海大学, 无锡学院, 常熟理工学院, 苏州城市学院, 扬州大学, 江苏海洋大学, 天平学院, 苏州科技大学, 吉林大学, 长春人文学院, 渤海大学, 大连理工大学, 沈阳工程学院, 大连工业大学, 沈阳农业大学, 沈阳建筑大学, 辽宁工程技术大学, 宁夏大学, 山东外国语职业技术大学, 枣庄学院, 济南大学, 山东青年政治学院, 山东科技大学, 济宁学院, 山东石油化工学院, 山东财经大学, 青岛大学, 烟台大学, 山东大学, 上海海事大学, 复旦大学, 东华大学, 上海工程技术大学, 上海交通大学医学院, 西安航空学院, 西安科技大学, 西安交通大学, 西安财经大学, 西安理工大学, 西安建筑科技大学, 西安欧亚学院, 西北大学, 安康学院, 西华师范大学, 四川师范大学, 四川传媒学院, 南开大学, 天津城建大学, 天津城建大学（教师）, 云南大学, 云南中医药大学, 玉溪师范学院, 保山学院, 温州医科大学, 嘉兴学院, 嘉兴南湖学院, 中国美术学院, 浙江学院</p>\n<p>同时，还有 加密 和 解密 的 API ，在 <a href=\"https://github.com/lcandy2/webvpn-converter\" rel=\"nofollow\">lcandy2/webvpn-converter</a> 可以看到！</p>\n<hr/>\n<h3>想要改进和建议！谢谢大家！</h3>\n", "last_modified": 1690593596, "replies": 29, "id": 960716}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 207929, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3888, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 405428, "username": "zisen", "url": "https://www.v2ex.com/u/zisen", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "诗人即仁人", "bio": "UPS应用物理硕士在读", "avatar_mini": "https://cdn.v2ex.com/avatar/5c3b/d976/405428_mini.png?m=1687585836", "avatar_normal": "https://cdn.v2ex.com/avatar/5c3b/d976/405428_normal.png?m=1687585836", "avatar_large": "https://cdn.v2ex.com/avatar/5c3b/d976/405428_large.png?m=1687585836", "created": 1556068545, "last_modified": 1687585836}, "last_reply_by": "qiumaoyuan", "last_touched": 1690576762, "title": "求推荐千元以内双肩包🎒", "url": "https://www.v2ex.com/t/960658", "created": 1690546334, "deleted": 0, "content": "9 月开始读研, 第一年上课, 第二年跟着导师实习, 上课需要带 MacBook Air, iPad Pro, 纸质的讲义, 纸质笔记本, 一些文具, 移动电源......  \r\n要求是耐造, 可以随便丢地上, 然后要尽可能的轻, 最好还能有旅行属性, 性价比要高一点, 钱都花在实用性功能上.  \r\n怕花大钱买了质量不好的包, 特此前来问问 v 友, 提前谢谢大家🙏", "content_rendered": "<p>9 月开始读研, 第一年上课, 第二年跟着导师实习, 上课需要带 MacBook Air, iPad Pro, 纸质的讲义, 纸质笔记本, 一些文具, 移动电源......<br/>\n要求是耐造, 可以随便丢地上, 然后要尽可能的轻, 最好还能有旅行属性, 性价比要高一点, 钱都花在实用性功能上.<br/>\n怕花大钱买了质量不好的包, 特此前来问问 v 友, 提前谢谢大家🙏</p>\n", "last_modified": 1690546899, "replies": 28, "id": 960658}]