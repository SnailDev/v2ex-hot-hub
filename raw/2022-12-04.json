[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1659331259", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1659331259", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 52232, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1659331259", "stars": 8098, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 189191, "username": "hongchaodeng", "url": "https://www.v2ex.com/u/hongchaodeng", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/48af/a6c4/189191_mini.png?m=1669947437", "avatar_normal": "https://cdn.v2ex.com/avatar/48af/a6c4/189191_normal.png?m=1669947437", "avatar_large": "https://cdn.v2ex.com/avatar/48af/a6c4/189191_large.png?m=1669947437", "avatar_xlarge": "https://cdn.v2ex.com/avatar/48af/a6c4/189191_xlarge.png?m=1669947437", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/48af/a6c4/189191_xlarge.png?m=1669947437", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/48af/a6c4/189191_xlarge.png?m=1669947437", "created": 1472419141, "last_modified": 1669947437}, "last_reply_by": "pengtdyd", "last_touched": 1670083064, "title": "为什么大家这么讨厌 Electron?", "url": "https://www.v2ex.com/t/899773", "created": 1670039674, "deleted": 0, "content": "小弟最近搞了个新项目：[https://he3.app]( https://he3.app/)\r\n\r\n然后来 V2 发了一个贴： https://www.v2ex.com/t/899531#reply79\r\n\r\n然后发现下面好多人非常讨厌 Electron ，说要换 Tauri 。\r\n\r\n我在开发前也是了解 Tauri 的，而且自己也用 Tauri 写过项目。觉得 Tauri 挺好的，对 Tauri 也没有特别爱。觉得 Electron 也挺好的，技术成熟，跨平台兼容性好。但是发现好多人特别反感 Electron 。\r\n\r\n这是为什么呀？想听听大家的意见，弥补下自己认知的缺陷。", "content_rendered": "<p>小弟最近搞了个新项目：<a href=\"https://he3.app/\" rel=\"nofollow\">https://he3.app</a></p>\n<p>然后来 V2 发了一个贴： <a href=\"https://www.v2ex.com/t/899531#reply79\" rel=\"nofollow\">https://www.v2ex.com/t/899531#reply79</a></p>\n<p>然后发现下面好多人非常讨厌 Electron ，说要换 Tauri 。</p>\n<p>我在开发前也是了解 Tauri 的，而且自己也用 Tauri 写过项目。觉得 Tauri 挺好的，对 Tauri 也没有特别爱。觉得 Electron 也挺好的，技术成熟，跨平台兼容性好。但是发现好多人特别反感 Electron 。</p>\n<p>这是为什么呀？想听听大家的意见，弥补下自己认知的缺陷。</p>\n", "last_modified": 1670039674, "replies": 100, "id": 899773}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 193922, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3644, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 357208, "username": "codingAlex", "url": "https://www.v2ex.com/u/codingAlex", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/5968/1f49/357208_mini.png?m=1653824415", "avatar_normal": "https://cdn.v2ex.com/avatar/5968/1f49/357208_normal.png?m=1653824415", "avatar_large": "https://cdn.v2ex.com/avatar/5968/1f49/357208_large.png?m=1653824415", "created": 1539936382, "last_modified": 1653824415}, "last_reply_by": "pengtdyd", "last_touched": 1670080369, "title": "v 友们，头发偏软，有方法使得头发变硬吗？", "url": "https://www.v2ex.com/t/899768", "created": 1670037498, "deleted": 0, "content": "几乎每天都要洗一下头，然后喷一点啫喱水，这样感觉比较麻烦，睡觉起来还是容易乱，有使得头发变硬的方法或者经验吗？希望分享下。", "content_rendered": "几乎每天都要洗一下头，然后喷一点啫喱水，这样感觉比较麻烦，睡觉起来还是容易乱，有使得头发变硬的方法或者经验吗？希望分享下。", "last_modified": 1670037498, "replies": 49, "id": 899768}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 193922, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3644, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 599406, "username": "Hanson666", "url": "https://www.v2ex.com/u/Hanson666", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/57fe980b44819651b7fc5a264c766e19?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/57fe980b44819651b7fc5a264c766e19?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/57fe980b44819651b7fc5a264c766e19?s=73&d=retro", "created": 1666935138, "last_modified": 1666935138}, "last_reply_by": "Leviathann", "last_touched": 1670081165, "title": "南方朋友开地暖了么？", "url": "https://www.v2ex.com/t/899817", "created": 1670055251, "deleted": 0, "content": "江浙沪的南方朋友家里有地暖的话什么时候开啊？感觉今年还不是很冷。", "content_rendered": "<p>江浙沪的南方朋友家里有地暖的话什么时候开啊？感觉今年还不是很冷。</p>\n", "last_modified": 1670055251, "replies": 48, "id": 899817}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1659331259", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1659331259", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 52232, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1659331259", "stars": 8098, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 589481, "username": "edis0n0", "url": "https://www.v2ex.com/u/edis0n0", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/8acfb030e98c7c3f424344dfb6eb8512?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/8acfb030e98c7c3f424344dfb6eb8512?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/8acfb030e98c7c3f424344dfb6eb8512?s=73&d=retro", "created": 1659166771, "last_modified": 1669548713}, "last_reply_by": "shakukansp", "last_touched": 1670083521, "title": "API 不管操作成功还是失败都返回 200 状态码，自己在返回结果里又定义一个表示是否成功的属性是从哪里传开的坏习惯？", "url": "https://www.v2ex.com/t/899875", "created": 1670073745, "deleted": 0, "content": "一直以为是从阿里开始传到整个中国互联网企业的坏习惯，最近发现一些日本网站也都这样做。但欧美网站大部分不这样做，例如 stripe ( https://stripe.com/docs/api/errors) twitter 等，都是规范的使用 http 状态码表示操作成功或失败，但 google 一些没有公开文档的私有 api 返回状态也非常混乱", "content_rendered": "一直以为是从阿里开始传到整个中国互联网企业的坏习惯，最近发现一些日本网站也都这样做。但欧美网站大部分不这样做，例如 stripe ( <a target=\"_blank\" href=\"https://stripe.com/docs/api/errors\" rel=\"nofollow noopener\">https://stripe.com/docs/api/errors</a>) twitter 等，都是规范的使用 http 状态码表示操作成功或失败，但 google 一些没有公开文档的私有 api 返回状态也非常混乱", "last_modified": 1670073745, "replies": 46, "id": 899875}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c74d/97b0/16_large.png?m=1650127281", "name": "share", "avatar_normal": "https://cdn.v2ex.com/navatar/c74d/97b0/16_normal.png?m=1650127281", "title": "分享发现", "url": "https://www.v2ex.com/go/share", "topics": 36840, "footer": "", "header": "分享你看到的好玩的，有信息量的，欢迎从这里获取灵感。", "title_alternative": "Share", "avatar_mini": "https://cdn.v2ex.com/navatar/c74d/97b0/16_mini.png?m=1650127281", "stars": 5097, "aliases": [], "root": false, "id": 16, "parent_node_name": "v2ex"}, "member": {"id": 462024, "username": "muhuan", "url": "https://www.v2ex.com/u/muhuan", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/2a4b/bd32/462024_mini.png?m=1652408434", "avatar_normal": "https://cdn.v2ex.com/avatar/2a4b/bd32/462024_normal.png?m=1652408434", "avatar_large": "https://cdn.v2ex.com/avatar/2a4b/bd32/462024_large.png?m=1652408434", "avatar_xlarge": "https://cdn.v2ex.com/avatar/2a4b/bd32/462024_xlarge.png?m=1652408434", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/2a4b/bd32/462024_xlarge.png?m=1652408434", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/2a4b/bd32/462024_xlarge.png?m=1652408434", "created": 1577632503, "last_modified": 1652408434}, "last_reply_by": "ipcjs", "last_touched": 1670082488, "title": "pixel 手机闲鱼出手不了了", "url": "https://www.v2ex.com/t/899752", "created": 1670028706, "deleted": 0, "content": "有一个闲置的 pixel xl ，用不到，昨天挂在闲鱼上，今天早上提示出售违规商品，闲鱼上搜索 pixel ，没有任何结果了，这个也太。。。", "content_rendered": "<p>有一个闲置的 pixel xl ，用不到，昨天挂在闲鱼上，今天早上提示出售违规商品，闲鱼上搜索 pixel ，没有任何结果了，这个也太。。。</p>\n", "last_modified": 1670028706, "replies": 36, "id": 899752}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1659331259", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1659331259", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 52232, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1659331259", "stars": 8098, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 544840, "username": "Zzzsk8", "url": "https://www.v2ex.com/u/Zzzsk8", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/a65f/abe3/544840_mini.png?m=1645938019", "avatar_normal": "https://cdn.v2ex.com/avatar/a65f/abe3/544840_normal.png?m=1645938019", "avatar_large": "https://cdn.v2ex.com/avatar/a65f/abe3/544840_large.png?m=1645938019", "avatar_xlarge": "https://cdn.v2ex.com/avatar/a65f/abe3/544840_xlarge.png?m=1645938019", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/a65f/abe3/544840_xlarge.png?m=1645938019", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/a65f/abe3/544840_xlarge.png?m=1645938019", "created": 1620491796, "last_modified": 1645938019}, "last_reply_by": "bandian", "last_touched": 1670052203, "title": "有没有部署自己的 homelab，都跑了什么服务，硬件配置是什么", "url": "https://www.v2ex.com/t/899741", "created": 1670001914, "deleted": 0, "content": "突然想折腾台机器专门跑 Linux ，把公司的工作环境在家也复制一份，我的工作环境比较简单，想着装个 gitlib 管理代码，开发环境通过虚拟机或者 docker 部署。\r\n\r\n都专门搞个机器了，只跑这点东西有点太浪费了，想着问问我拿这台机器还能做出什么有意思或者有用的东西，各位大佬有没有成熟的方案给我抄一下作业。\r\n\r\n同时也给推荐下硬件配置吧，现在对电脑硬件也不了解，想通过虚拟机搭开发环境，内存尽量大点，32G 吧，价格 1000--5000 ，能满足需求尽量便宜。\r\n\r\n主要考虑的还是静音、功耗和稳定性。体积也尽量小一点", "content_rendered": "<p>突然想折腾台机器专门跑 Linux ，把公司的工作环境在家也复制一份，我的工作环境比较简单，想着装个 gitlib 管理代码，开发环境通过虚拟机或者 docker 部署。</p>\n<p>都专门搞个机器了，只跑这点东西有点太浪费了，想着问问我拿这台机器还能做出什么有意思或者有用的东西，各位大佬有没有成熟的方案给我抄一下作业。</p>\n<p>同时也给推荐下硬件配置吧，现在对电脑硬件也不了解，想通过虚拟机搭开发环境，内存尽量大点，32G 吧，价格 1000--5000 ，能满足需求尽量便宜。</p>\n<p>主要考虑的还是静音、功耗和稳定性。体积也尽量小一点</p>\n", "last_modified": 1670002025, "replies": 34, "id": 899741}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/d3d9/4468/10_large.png?m=1630643933", "name": "mbp", "avatar_normal": "https://cdn.v2ex.com/navatar/d3d9/4468/10_normal.png?m=1630643933", "title": "MacBook Pro", "url": "https://www.v2ex.com/go/mbp", "topics": 8333, "footer": "", "header": "State-of-the-art processors. All-new graphics. Breakthrough high-speed I/O. Three very big leaps forward.", "title_alternative": "MacBook Pro", "avatar_mini": "https://cdn.v2ex.com/navatar/d3d9/4468/10_mini.png?m=1630643933", "stars": 3176, "aliases": [], "root": false, "id": 10, "parent_node_name": "apple"}, "member": {"id": 45878, "username": "serenader", "url": "https://www.v2ex.com/u/serenader", "website": "https://blog.serenader.me", "twitter": "", "psn": "", "github": "serenader2014", "btc": "", "location": "", "tagline": "", "bio": "Do It Now Or Never!", "avatar_mini": "https://cdn.v2ex.com/avatar/f0d6/757d/45878_mini.png?m=1669998059", "avatar_normal": "https://cdn.v2ex.com/avatar/f0d6/757d/45878_normal.png?m=1669998059", "avatar_large": "https://cdn.v2ex.com/avatar/f0d6/757d/45878_large.png?m=1669998059", "created": 1380002093, "last_modified": 1669998059}, "last_reply_by": "billgong", "last_touched": 1670081711, "title": "13 寸 MacBook Pro M2 还是 14 寸 MacBook Pro M1？", "url": "https://www.v2ex.com/t/899737", "created": 1669999007, "deleted": 0, "content": "手头的 2016 款 13 寸 MacBook Pro 已经不太行了，电池不行，屏幕也挂了，键盘时好时坏。。现在外接个 iPad 当屏幕苟延残喘着，所以想着换台电脑。\r\n\r\n看了一下现在两个选择，13 寸的 MacBook Pro M2 芯片款，以及 14 寸 MacBook Pro M1 Pro 芯片款，自己的倾向是 13 寸的，原因是使用的是旧模具，比较轻薄好看，14 寸的太重太丑了。。\r\n性能上的话，两者都能满足我的需求，因为公司的电脑是 M1 芯片的 13 寸 MacBook Pro ，对这个机器非常满意，M2 的芯片应该更加不在话下。\r\n\r\n现在纠结的点在于，14 寸的机器多出来的那些新特性，实不实用？反正现在用的公司的 M1 MacBook Pro 是没发现有啥问题，所以一直不太清楚如果奔着新模具去的话，能给我带来什么好处？\r\n\r\n希望有使用过这两款电脑的朋友一起讨论一下。\r\n\r\n这里也贴一下我选择的两款具体型号配置：\r\n13 寸 MacBook Pro ，M2 芯片，8 核 CPU 10 核 GPU ，512G 硬盘，24G 内存\r\n14 寸 MacBook Pro ，M1 Pro 芯片，8 核 CPU ，14 核 GPU ，512G 硬盘，32G 内存", "content_rendered": "<p>手头的 2016 款 13 寸 MacBook Pro 已经不太行了，电池不行，屏幕也挂了，键盘时好时坏。。现在外接个 iPad 当屏幕苟延残喘着，所以想着换台电脑。</p>\n<p>看了一下现在两个选择，13 寸的 MacBook Pro M2 芯片款，以及 14 寸 MacBook Pro M1 Pro 芯片款，自己的倾向是 13 寸的，原因是使用的是旧模具，比较轻薄好看，14 寸的太重太丑了。。\n性能上的话，两者都能满足我的需求，因为公司的电脑是 M1 芯片的 13 寸 MacBook Pro ，对这个机器非常满意，M2 的芯片应该更加不在话下。</p>\n<p>现在纠结的点在于，14 寸的机器多出来的那些新特性，实不实用？反正现在用的公司的 M1 MacBook Pro 是没发现有啥问题，所以一直不太清楚如果奔着新模具去的话，能给我带来什么好处？</p>\n<p>希望有使用过这两款电脑的朋友一起讨论一下。</p>\n<p>这里也贴一下我选择的两款具体型号配置：\n13 寸 MacBook Pro ，M2 芯片，8 核 CPU 10 核 GPU ，512G 硬盘，24G 内存\n14 寸 MacBook Pro ，M1 Pro 芯片，8 核 CPU ，14 核 GPU ，512G 硬盘，32G 内存</p>\n", "last_modified": 1669999007, "replies": 32, "id": 899737}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 193922, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3644, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 457684, "username": "asanelder", "url": "https://www.v2ex.com/u/asanelder", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "保持理智\r\n相信现在", "avatar_mini": "https://cdn.v2ex.com/avatar/2d42/6424/457684_mini.png?m=1669650399", "avatar_normal": "https://cdn.v2ex.com/avatar/2d42/6424/457684_normal.png?m=1669650399", "avatar_large": "https://cdn.v2ex.com/avatar/2d42/6424/457684_large.png?m=1669650399", "created": 1575563857, "last_modified": 1669650399}, "last_reply_by": "autoxbc", "last_touched": 1670083459, "title": "为啥不见女生晒桌面", "url": "https://www.v2ex.com/t/899792", "created": 1670045757, "deleted": 0, "content": "youtube,b 站上各种 up 在教大家（ show) 如何打造一个工作区，娱乐区，影音区。但审美基本以男性为主。\r\n为啥很少有女生（女 up 主）？难道是她们不 care 么？", "content_rendered": "youtube,b 站上各种 up 在教大家（ show) 如何打造一个工作区，娱乐区，影音区。但审美基本以男性为主。<br />为啥很少有女生（女 up 主）？难道是她们不 care 么？", "last_modified": 1670045757, "replies": 32, "id": 899792}, {"node": {"avatar_large": "/static/img/node_default_large.png", "name": "ime", "avatar_normal": "/static/img/node_default_normal.png", "title": "输入法", "url": "https://www.v2ex.com/go/ime", "topics": 46, "footer": null, "header": null, "title_alternative": "IME", "avatar_mini": "/static/img/node_default_mini.png", "stars": 31, "aliases": [], "root": false, "id": 925, "parent_node_name": null}, "member": {"id": 55456, "username": "alexlee0728", "url": "https://www.v2ex.com/u/alexlee0728", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/4628/6f68/55456_mini.png?m=1514523756", "avatar_normal": "https://cdn.v2ex.com/avatar/4628/6f68/55456_normal.png?m=1514523756", "avatar_large": "https://cdn.v2ex.com/avatar/4628/6f68/55456_large.png?m=1514523756", "created": 1391785621, "last_modified": 1514523756}, "last_reply_by": "wfy0327", "last_touched": 1670083384, "title": "中文输入法用的全键盘还是 9 宫格？", "url": "https://www.v2ex.com/t/899861", "created": 1670070265, "deleted": 0, "content": "中文输入法用的全键盘还是 9 宫格？\n\n\n\n发现单手模式用滑动输入还是挺好的，双手还是 9 宫格快", "content_rendered": "<p>中文输入法用的全键盘还是 9 宫格？</p>\n<p>发现单手模式用滑动输入还是挺好的，双手还是 9 宫格快</p>\n", "last_modified": 1670079942, "replies": 31, "id": 899861}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1658910399", "name": "go", "avatar_normal": "https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1658910399", "title": "Go 编程语言", "url": "https://www.v2ex.com/go/go", "topics": 2525, "footer": "", "header": "Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。", "title_alternative": "The Go Programming Language", "avatar_mini": "https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1658910399", "stars": 3415, "aliases": [], "root": false, "id": 375, "parent_node_name": "programming"}, "member": {"id": 494632, "username": "bthulu", "url": "https://www.v2ex.com/u/bthulu", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/c87484c1062f990c6ef9e1a9c27bdc60?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/c87484c1062f990c6ef9e1a9c27bdc60?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/c87484c1062f990c6ef9e1a9c27bdc60?s=73&d=retro", "created": 1592099578, "last_modified": 1669598980}, "last_reply_by": "seakingii", "last_touched": 1670080569, "title": "golang 咋这么恶心，解压 zip 文件居然要一大串代码，这不应该是语言内置一行搞定的吗？", "url": "https://www.v2ex.com/t/899827", "created": 1670057008, "deleted": 0, "content": "这简直不能忍啊\r\n\r\nC#版\r\n```\r\nZipFile.ExtractToDirectory(\"source\", \"target\");\r\n```\r\n\r\nGolang 版\r\n```\r\nfunc Unzip(src, dest string) error {\r\n    r, err := zip.OpenReader(src)\r\n    if err != nil {\r\n        return err\r\n    }\r\n    defer func() {\r\n        if err := r.Close(); err != nil {\r\n            panic(err)\r\n        }\r\n    }()\r\n\r\n    os.MkdirAll(dest, 0755)\r\n\r\n    // Closure to address file descriptors issue with all the deferred .Close() methods\r\n    extractAndWriteFile := func(f *zip.File) error {\r\n        rc, err := f.Open()\r\n        if err != nil {\r\n            return err\r\n        }\r\n        defer func() {\r\n            if err := rc.Close(); err != nil {\r\n                panic(err)\r\n            }\r\n        }()\r\n\r\n        path := filepath.Join(dest, f.Name)\r\n\r\n        // Check for ZipSlip (Directory traversal)\r\n        if !strings.HasPrefix(path, filepath.Clean(dest) + string(os.PathSeparator)) {\r\n            return fmt.Errorf(\"illegal file path: %s\", path)\r\n        }\r\n\r\n        if f.FileInfo().IsDir() {\r\n            os.MkdirAll(path, f.Mode())\r\n        } else {\r\n            os.MkdirAll(filepath.Dir(path), f.Mode())\r\n            f, err := os.OpenFile(path, os.O_WRONLY|os.O_CREATE|os.O_TRUNC, f.Mode())\r\n            if err != nil {\r\n                return err\r\n            }\r\n            defer func() {\r\n                if err := f.Close(); err != nil {\r\n                    panic(err)\r\n                }\r\n            }()\r\n\r\n            _, err = io.Copy(f, rc)\r\n            if err != nil {\r\n                return err\r\n            }\r\n        }\r\n        return nil\r\n    }\r\n\r\n    for _, f := range r.File {\r\n        err := extractAndWriteFile(f)\r\n        if err != nil {\r\n            return err\r\n        }\r\n    }\r\n\r\n    return nil\r\n}\r\n```", "content_rendered": "<p>这简直不能忍啊</p>\n<p>C#版</p>\n<pre><code>ZipFile.ExtractToDirectory(\"source\", \"target\");\n</code></pre>\n<p>Golang 版</p>\n<pre><code>func Unzip(src, dest string) error {\n    r, err := zip.OpenReader(src)\n    if err != nil {\n        return err\n    }\n    defer func() {\n        if err := r.Close(); err != nil {\n            panic(err)\n        }\n    }()\n\n    os.MkdirAll(dest, 0755)\n\n    // Closure to address file descriptors issue with all the deferred .Close() methods\n    extractAndWriteFile := func(f *zip.File) error {\n        rc, err := f.Open()\n        if err != nil {\n            return err\n        }\n        defer func() {\n            if err := rc.Close(); err != nil {\n                panic(err)\n            }\n        }()\n\n        path := filepath.Join(dest, f.Name)\n\n        // Check for ZipSlip (Directory traversal)\n        if !strings.HasPrefix(path, filepath.Clean(dest) + string(os.PathSeparator)) {\n            return fmt.Errorf(\"illegal file path: %s\", path)\n        }\n\n        if f.FileInfo().IsDir() {\n            os.MkdirAll(path, f.Mode())\n        } else {\n            os.MkdirAll(filepath.Dir(path), f.Mode())\n            f, err := os.OpenFile(path, os.O_WRONLY|os.O_CREATE|os.O_TRUNC, f.Mode())\n            if err != nil {\n                return err\n            }\n            defer func() {\n                if err := f.Close(); err != nil {\n                    panic(err)\n                }\n            }()\n\n            _, err = io.Copy(f, rc)\n            if err != nil {\n                return err\n            }\n        }\n        return nil\n    }\n\n    for _, f := range r.File {\n        err := extractAndWriteFile(f)\n        if err != nil {\n            return err\n        }\n    }\n\n    return nil\n}\n</code></pre>\n", "last_modified": 1670057357, "replies": 31, "id": 899827}]