[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 525806, "username": "retrocode", "url": "https://www.v2ex.com/u/retrocode", "website": "retrocode.io", "twitter": null, "psn": null, "github": null, "btc": null, "location": "西安", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/0b15/0d66/525806_mini.png?m=1640667580", "avatar_normal": "https://cdn.v2ex.com/avatar/0b15/0d66/525806_normal.png?m=1640667580", "avatar_large": "https://cdn.v2ex.com/avatar/0b15/0d66/525806_large.png?m=1640667580", "created": 1609083919, "last_modified": 1640667580}, "last_reply_by": "WIN2333", "last_touched": 1651061390, "title": "[情感话题]如何找到一张疑似网图的照片出处？有人能给我个痛快的吗？ 5 年了 5 年！", "url": "https://www.v2ex.com/t/849472", "created": 1651013190, "deleted": 0, "content": "网恋 5 年的小女友照片出现在医美营销号的案例里，并且发帖时间比我看到图片早一个月。可以确定不是原出处，我的版本没有水印并且体积更大没有压图。\r\n\r\n我使用各种以图搜图软件查询了更多照片，只百度识图里查到了这张图片医美营销号这一个出处。\r\n\r\n从传播角度来讲，被营销号发出来的肯定是在别处有出处，并且不难找到的。那么有什么思路甚至社工能找到这个出处吗？\r\n\r\n女方意思是被盗图了，但是咬死是本人。我现在只想来个痛快的，是或者不是，有个结果就好。", "content_rendered": "<p>网恋 5 年的小女友照片出现在医美营销号的案例里，并且发帖时间比我看到图片早一个月。可以确定不是原出处，我的版本没有水印并且体积更大没有压图。</p>\n<p>我使用各种以图搜图软件查询了更多照片，只百度识图里查到了这张图片医美营销号这一个出处。</p>\n<p>从传播角度来讲，被营销号发出来的肯定是在别处有出处，并且不难找到的。那么有什么思路甚至社工能找到这个出处吗？</p>\n<p>女方意思是被盗图了，但是咬死是本人。我现在只想来个痛快的，是或者不是，有个结果就好。</p>\n", "last_modified": 1651013190, "replies": 355, "id": 849472}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 482785, "username": "zx125", "url": "https://www.v2ex.com/u/zx125", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/837ee6446c324b20766914c7e2897bb5?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/837ee6446c324b20766914c7e2897bb5?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/837ee6446c324b20766914c7e2897bb5?s=73&d=retro", "created": 1586492809, "last_modified": 1586492809}, "last_reply_by": "Chieh", "last_touched": 1651060962, "title": "同志们，你们下班之后一般干什么度过到睡觉前的那段时间，还有周末", "url": "https://www.v2ex.com/t/849477", "created": 1651019858, "deleted": 0, "content": "去年我还是打王者这些游戏度过，今年游戏也玩厌了，报了个拳击，买了滑板来混这段时间，如果实在累了就直接躺床上。\r\n周末一般就是去和朋友溜街和爬山", "content_rendered": "<p>去年我还是打王者这些游戏度过，今年游戏也玩厌了，报了个拳击，买了滑板来混这段时间，如果实在累了就直接躺床上。\n周末一般就是去和朋友溜街和爬山</p>\n", "last_modified": 1651019858, "replies": 126, "id": 849477}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 351870, "username": "gtchan13579", "url": "https://www.v2ex.com/u/gtchan13579", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/87de/42b6/351870_mini.png?m=1571127857", "avatar_normal": "https://cdn.v2ex.com/avatar/87de/42b6/351870_normal.png?m=1571127857", "avatar_large": "https://cdn.v2ex.com/avatar/87de/42b6/351870_large.png?m=1571127857", "created": 1537840903, "last_modified": 1571127857}, "last_reply_by": "sowish", "last_touched": 1651060777, "title": "决赛圈了，给老婆换一台手机，三选一。", "url": "https://www.v2ex.com/t/849511", "created": 1651027326, "deleted": 0, "content": "都是 3000 多价位的，目前犹豫不决，主要考虑拍照（后置用的比较多）、手感最好轻点、无线充电，求建议。\r\n1 、小米 12       拼多多 8+128  3039\r\n2 、oppo find x3 拼多多 8+256 3199\r\n3 、小米 11 ultra 拼多多 12+256 3719", "content_rendered": "都是 3000 多价位的，目前犹豫不决，主要考虑拍照（后置用的比较多）、手感最好轻点、无线充电，求建议。<br />1 、小米 12       拼多多 8+128  3039<br />2 、oppo find x3 拼多多 8+256 3199<br />3 、小米 11 ultra 拼多多 12+256 3719", "last_modified": 1651027326, "replies": 99, "id": 849511}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 535448, "username": "GCP", "url": "https://www.v2ex.com/u/GCP", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/916e/9d3e/535448_mini.png?m=1639999615", "avatar_normal": "https://cdn.v2ex.com/avatar/916e/9d3e/535448_normal.png?m=1639999615", "avatar_large": "https://cdn.v2ex.com/avatar/916e/9d3e/535448_large.png?m=1639999615", "created": 1614618074, "last_modified": 1639999615}, "last_reply_by": "bytesfold", "last_touched": 1651051559, "title": "大家会搞两个 WeChat，工作和生活分开吗？", "url": "https://www.v2ex.com/t/849475", "created": 1651018776, "deleted": 0, "content": "想搞两个，iPhone 不支持分身，WeChat 也不支持同时接收消息，又排斥 Android 和带两个 iPhone ，好难！", "content_rendered": "想搞两个，iPhone 不支持分身，WeChat 也不支持同时接收消息，又排斥 Android 和带两个 iPhone ，好难！", "last_modified": 1651018776, "replies": 95, "id": 849475}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 513007, "username": "zzzkkk", "url": "https://www.v2ex.com/u/zzzkkk", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/6e3e74eddd50888ba6210566f0669c97?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/6e3e74eddd50888ba6210566f0669c97?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/6e3e74eddd50888ba6210566f0669c97?s=73&d=retro", "created": 1602768889, "last_modified": 1640941121}, "last_reply_by": "wwti9", "last_touched": 1651056982, "title": "掌握技术机密 威胁贪婪资本家要走人 要到了 8 万美元一年", "url": "https://www.v2ex.com/t/849471", "created": 1651009125, "deleted": 0, "content": "从 11 年末开始接项目认识的这家小公司  是一家电商公司  ebay amazon 某个产品的几个头部大卖家  \r\n从前年开始 公司年利润达到了 200 万美元  \r\n而我上个月才开始威胁他 不给我 8 万美元就要走人 还好被我威胁成功了    \r\n即使第一次威胁后 还是不愿意付 8 万 年终只肯给 5000 美元  还让我报实际干的小时数 因为一天干不满 8 小时的工作量。  \r\n过几天后第二次威胁  一定要 8 万美元  不管有多少活  他才同意了   \r\n极度吝啬！！！一直以来把我当外包 时薪 35 虽然报双倍时间 一年才 2 万多美元， 这么多年被他捡了天大的便宜 ！  \r\n我能威胁的原因是因为系统都是我开发的 文档都没 别人进来要是我不教 连懂都不懂   \r\n我也绝不会教任何一个新进来的人！   \r\n我以后还要再威胁！   \r\n\r\n这几天马克思的几句话才在耳畔响起 ：  \r\n全世界无产阶级联合起来！   \r\n资本来到人间的每个毛孔都留着肮脏的血液！", "content_rendered": "从 11 年末开始接项目认识的这家小公司  是一家电商公司  ebay amazon 某个产品的几个头部大卖家  <br />从前年开始 公司年利润达到了 200 万美元  <br />而我上个月才开始威胁他 不给我 8 万美元就要走人 还好被我威胁成功了    <br />即使第一次威胁后 还是不愿意付 8 万 年终只肯给 5000 美元  还让我报实际干的小时数 因为一天干不满 8 小时的工作量。  <br />过几天后第二次威胁  一定要 8 万美元  不管有多少活  他才同意了   <br />极度吝啬！！！一直以来把我当外包 时薪 35 虽然报双倍时间 一年才 2 万多美元， 这么多年被他捡了天大的便宜 ！  <br />我能威胁的原因是因为系统都是我开发的 文档都没 别人进来要是我不教 连懂都不懂   <br />我也绝不会教任何一个新进来的人！   <br />我以后还要再威胁！   <br /><br />这几天马克思的几句话才在耳畔响起 ：  <br />全世界无产阶级联合起来！   <br />资本来到人间的每个毛孔都留着肮脏的血液！", "last_modified": 1651009137, "replies": 82, "id": 849471}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 23785, "username": "snoopyhai", "url": "https://www.v2ex.com/u/snoopyhai", "website": "https://github.com/nmtuan", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "前端组装工人", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/6953/aa78/23785_mini.png?m=1626654345", "avatar_normal": "https://cdn.v2ex.com/avatar/6953/aa78/23785_normal.png?m=1626654345", "avatar_large": "https://cdn.v2ex.com/avatar/6953/aa78/23785_large.png?m=1626654345", "created": 1342877681, "last_modified": 1626654345}, "last_reply_by": "xFrank", "last_touched": 1651059589, "title": "什么蔬菜, 可以冷冻?", "url": "https://www.v2ex.com/t/849478", "created": 1651020129, "deleted": 0, "content": "介于目前形势, 唯有囤货才能解决心慌.\r\n\r\n所以想增加冰箱冰柜增加食物保存期.\r\n\r\n但是大部分蔬菜, 特别是绿叶蔬菜依旧无法很好的保存.\r\n\r\n所以想了解一下, 有哪些蔬菜可以冷冻保存?\r\n\r\n好像西红柿可以冷冻.", "content_rendered": "<p>介于目前形势, 唯有囤货才能解决心慌.</p>\n<p>所以想增加冰箱冰柜增加食物保存期.</p>\n<p>但是大部分蔬菜, 特别是绿叶蔬菜依旧无法很好的保存.</p>\n<p>所以想了解一下, 有哪些蔬菜可以冷冻保存?</p>\n<p>好像西红柿可以冷冻.</p>\n", "last_modified": 1651020129, "replies": 69, "id": 849478}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/8613/985e/90_large.png?m=1648339948", "name": "python", "avatar_normal": "https://cdn.v2ex.com/navatar/8613/985e/90_normal.png?m=1648339948", "title": "Python", "url": "https://www.v2ex.com/go/python", "topics": 14925, "footer": "", "header": "这里讨论各种 Python 语言编程话题，也包括 Django，Tornado 等框架的讨论。这里是一个能够帮助你解决实际问题的地方。", "title_alternative": "Python", "avatar_mini": "https://cdn.v2ex.com/navatar/8613/985e/90_mini.png?m=1648339948", "stars": 9923, "aliases": [], "root": false, "id": 90, "parent_node_name": "programming"}, "member": {"id": 359442, "username": "a523", "url": "https://www.v2ex.com/u/a523", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/c973b1861615b3c8c1fb06f67666232f?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/c973b1861615b3c8c1fb06f67666232f?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/c973b1861615b3c8c1fb06f67666232f?s=73&d=retro", "created": 1540807057, "last_modified": 1540807057}, "last_reply_by": "bazingaQAQ", "last_touched": 1651060574, "title": "为什么面试官喜欢问某一门语言（比如 go 或者 Python ）的内存回收机制？", "url": "https://www.v2ex.com/t/849548", "created": 1651036233, "deleted": 0, "content": "我不明白的，如果不了解内存的回收机制，对写代码有什么影响吗？\r\n\r\n我已经写 python 8 年了，也不清楚 python 的 GC 具体细节， 但是还没有碰到内存泄露的问题。\r\n是不是有 GC 机制的语言，不会发生内存泄露？\r\n\r\n或者面试官仅仅只是依此来判断某个人对某门语言花了多少心思？", "content_rendered": "<p>我不明白的，如果不了解内存的回收机制，对写代码有什么影响吗？</p>\n<p>我已经写 python 8 年了，也不清楚 python 的 GC 具体细节， 但是还没有碰到内存泄露的问题。\n是不是有 GC 机制的语言，不会发生内存泄露？</p>\n<p>或者面试官仅仅只是依此来判断某个人对某门语言花了多少心思？</p>\n", "last_modified": 1651036329, "replies": 68, "id": 849548}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6512/bd43/11_large.png?m=1635654665", "name": "linux", "avatar_normal": "https://cdn.v2ex.com/navatar/6512/bd43/11_normal.png?m=1635654665", "title": "Linux", "url": "https://www.v2ex.com/go/linux", "topics": 6661, "footer": "", "header": "Linux is a Unix-like computer operating system assembled under the model of free and open source software development and distribution.", "title_alternative": "Linux", "avatar_mini": "https://cdn.v2ex.com/navatar/6512/bd43/11_mini.png?m=1635654665", "stars": 5779, "aliases": [], "root": false, "id": 11, "parent_node_name": "os"}, "member": {"id": 394396, "username": "zhanggg", "url": "https://www.v2ex.com/u/zhanggg", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/43da/8789/394396_mini.png?m=1553245962", "avatar_normal": "https://cdn.v2ex.com/avatar/43da/8789/394396_normal.png?m=1553245962", "avatar_large": "https://cdn.v2ex.com/avatar/43da/8789/394396_large.png?m=1553245962", "created": 1553243396, "last_modified": 1553245962}, "last_reply_by": "chengyiqun", "last_touched": 1651053305, "title": "求推荐个 Linux 桌面发行版", "url": "https://www.v2ex.com/t/849519", "created": 1651030006, "deleted": 0, "content": "家里有个电脑坏了，准备把自己淘汰的一台机器给老头子用\r\n\r\n以前用 windows ，过年回家看机器惨不忍睹，开机开半天，开了之看个爱奇艺都卡的不行，问了说是有个小表弟经常来家玩电脑，乱折腾又弄不好\r\n\r\n现在就想给装个 linux 发行版，求大家推荐一个\r\n\r\n期望.   \r\n- 比较像 windows ，界面友好，让老头子好上手\r\n- 软件诉求 浏览器 qq 爱奇艺 wps 小说（老头子是真的爱看网文小说，可以的推荐个在线小说阅读器吗\r\n- 别那么容易被安装垃圾软件（开机十几分钟跳出 N 个 XX 助手真的麻了", "content_rendered": "<p>家里有个电脑坏了，准备把自己淘汰的一台机器给老头子用</p>\n<p>以前用 windows ，过年回家看机器惨不忍睹，开机开半天，开了之看个爱奇艺都卡的不行，问了说是有个小表弟经常来家玩电脑，乱折腾又弄不好</p>\n<p>现在就想给装个 linux 发行版，求大家推荐一个</p>\n<p>期望.   </p>\n<ul>\n<li>比较像 windows ，界面友好，让老头子好上手</li>\n<li>软件诉求 浏览器 qq 爱奇艺 wps 小说（老头子是真的爱看网文小说，可以的推荐个在线小说阅读器吗</li>\n<li>别那么容易被安装垃圾软件（开机十几分钟跳出 N 个 XX 助手真的麻了</li>\n</ul>\n", "last_modified": 1651030116, "replies": 55, "id": 849519}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 184104, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3467, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 239621, "username": "fengfisher3", "url": "https://www.v2ex.com/u/fengfisher3", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "广东-广州", "tagline": "学习管理自己ing...", "bio": "技术菜鸟一枚，学习中...", "avatar_mini": "https://cdn.v2ex.com/avatar/7f08/422d/239621_mini.png?m=1499739210", "avatar_normal": "https://cdn.v2ex.com/avatar/7f08/422d/239621_normal.png?m=1499739210", "avatar_large": "https://cdn.v2ex.com/avatar/7f08/422d/239621_large.png?m=1499739210", "created": 1499738393, "last_modified": 1499739210}, "last_reply_by": "jfcai", "last_touched": 1651056600, "title": "求大家推荐一款靠谱的行车记录仪，优先无显示屏。", "url": "https://www.v2ex.com/t/849501", "created": 1651024775, "deleted": 0, "content": "最近在找行车记录仪，但搜索发现，真的没有好的产品。\r\n需求：\r\n想要一个简单，安静，清晰，稳定，功能正常的行车记录仪，但网上看不同品种的坑都不少。\r\n有说电池鼓包的，有说 360 的 2-3 年就坏的，有说不清晰的，有说视频断的。\r\n不想要那么多花里胡哨的非刚需的功能，有也不排斥，但核心功能（清晰、稳定、正确，耐用）不出问题即可。\r\n价格：300-1200 之间都可以接受，只要靠谱。\r\n这个人的帖子说出了我的心声： https://www.v2ex.com/t/787022\r\n行车记录仪从何时起变味了？互联网的一些风气蔓延到了硬件产业里去了？", "content_rendered": "最近在找行车记录仪，但搜索发现，真的没有好的产品。<br />需求：<br />想要一个简单，安静，清晰，稳定，功能正常的行车记录仪，但网上看不同品种的坑都不少。<br />有说电池鼓包的，有说 360 的 2-3 年就坏的，有说不清晰的，有说视频断的。<br />不想要那么多花里胡哨的非刚需的功能，有也不排斥，但核心功能（清晰、稳定、正确，耐用）不出问题即可。<br />价格：300-1200 之间都可以接受，只要靠谱。<br />这个人的帖子说出了我的心声： <a target=\"_blank\" href=\"https://www.v2ex.com/t/787022\" rel=\"nofollow noopener\">https://www.v2ex.com/t/787022</a><br />行车记录仪从何时起变味了？互联网的一些风气蔓延到了硬件产业里去了？", "last_modified": 1651024775, "replies": 54, "id": 849501}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/8613/985e/90_large.png?m=1648339948", "name": "python", "avatar_normal": "https://cdn.v2ex.com/navatar/8613/985e/90_normal.png?m=1648339948", "title": "Python", "url": "https://www.v2ex.com/go/python", "topics": 14925, "footer": "", "header": "这里讨论各种 Python 语言编程话题，也包括 Django，Tornado 等框架的讨论。这里是一个能够帮助你解决实际问题的地方。", "title_alternative": "Python", "avatar_mini": "https://cdn.v2ex.com/navatar/8613/985e/90_mini.png?m=1648339948", "stars": 9923, "aliases": [], "root": false, "id": 90, "parent_node_name": "programming"}, "member": {"id": 469082, "username": "LeeReamond", "url": "https://www.v2ex.com/u/LeeReamond", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/f481/5f03/469082_mini.png?m=1621264130", "avatar_normal": "https://cdn.v2ex.com/avatar/f481/5f03/469082_normal.png?m=1621264130", "avatar_large": "https://cdn.v2ex.com/avatar/f481/5f03/469082_large.png?m=1621264130", "created": 1581577538, "last_modified": 1621264130}, "last_reply_by": "so1n", "last_touched": 1651060218, "title": "不得不吐槽一下 Python 的任务队列，异步支持太差了", "url": "https://www.v2ex.com/t/849494", "created": 1651024069, "deleted": 0, "content": "今天带着学习的目的花了半天时间看了一下 python 广泛使用的任务队列 celery ，看完感觉不少地方挺奇怪。我们部门任务因为削峰一直用的是自己写的任务队列，所以说实话其实一直也没用过 rabbitmq 这些。\r\n\r\n网上相关信息很少不提了，stackoverflow 能找到几个问题基本都是好多年前的。\r\n\r\n这些都是小问题，我感觉其他几个需要吐槽的地方\r\n\r\n1 、2202 年了，asyncio 居然不是被原生支持的。\r\n\r\n追踪最新任务 issue ，[https://github.com/celery/celery/issues/6552]( https://github.com/celery/celery/issues/6552)，显然异步支持不在当前官方列表里，甚至不在官方发布计划中，可以说是遥遥无期。社区当然是有一些曲折迂回的方法的，比如我看到 so 上有人说用`async_to_sync`做奇怪的封装\r\n```python\r\nfrom asgiref.sync import sync_to_async\r\n\r\ndef task_to_async(task):\r\n    async def wrapper(*args, **kwargs):\r\n        delay = 0.1\r\n        async_result = await sync_to_async(task.delay)(*args, **kwargs)\r\n        while not async_result.ready():\r\n            await asyncio.sleep(delay)\r\n            delay = min(delay * 1.5, 2)  \r\n        return async_result.get()\r\n    return wrapper\r\n```\r\n只能缓缓打出一个问号？且不提这 while not ready: sleep & try ，看了一下依赖的第三方库里实现是基于一个最大线程数为 1 的线程池维护事件循环，这又带来更多衍生问题，比如我如何在 task 间共享连接状态，比如 mysql 连接池？如果我要在异步任务里使用多线程又该如何管理？总之是问题多多。\r\n\r\n再者不提消费者不能异步消费，生产者也不能异步生产，添加任务到任务队列的过程是同步的，也许这带来的延迟非常短暂，但是也许设计者认为该延迟应该忽略？看了看 celery 基于的通信模块是基于 socket 自己搞了个 selector ，自行维护的事件循环没有享受到任何现有生态的好处，纯 py 编写无法享受社区 libuv 版的好处，性能和可靠性都让人质疑。。总之这一个设计让用户代码整个又被拖回同步宇宙，也是问题多多。\r\n\r\n2 、生产者不支持任务完成回调\r\n\r\n对于一些常见的短任务的需求（处理时间小于 1s ），短的任务就不需要加入任务队列了吗？我觉得显然不是的，但是同样的，段任务的处理规范是否应该是返回一个任务状态，再由前端轮询执行结果？我感觉也未必，毕竟任务很短。所以我们部门网关调用时可以选择用异步通知，await 等待执行结果。而 celery 目前看起来网关想获取任务成功状态的话只能轮询，或者是在 worker 那边定义任务完成后再向队列加入一个子任务，你可以在子任务里用自定义的方式给网关一个回调。。。", "content_rendered": "<p>今天带着学习的目的花了半天时间看了一下 python 广泛使用的任务队列 celery ，看完感觉不少地方挺奇怪。我们部门任务因为削峰一直用的是自己写的任务队列，所以说实话其实一直也没用过 rabbitmq 这些。</p>\n<p>网上相关信息很少不提了，stackoverflow 能找到几个问题基本都是好多年前的。</p>\n<p>这些都是小问题，我感觉其他几个需要吐槽的地方</p>\n<p>1 、2202 年了，asyncio 居然不是被原生支持的。</p>\n<p>追踪最新任务 issue ，<a href=\"https://github.com/celery/celery/issues/6552\" rel=\"nofollow\">https://github.com/celery/celery/issues/6552</a>，显然异步支持不在当前官方列表里，甚至不在官方发布计划中，可以说是遥遥无期。社区当然是有一些曲折迂回的方法的，比如我看到 so 上有人说用<code>async_to_sync</code>做奇怪的封装</p>\n<pre><code class=\"language-python\">from asgiref.sync import sync_to_async\n\ndef task_to_async(task):\n    async def wrapper(*args, **kwargs):\n        delay = 0.1\n        async_result = await sync_to_async(task.delay)(*args, **kwargs)\n        while not async_result.ready():\n            await asyncio.sleep(delay)\n            delay = min(delay * 1.5, 2)  \n        return async_result.get()\n    return wrapper\n</code></pre>\n<p>只能缓缓打出一个问号？且不提这 while not ready: sleep &amp; try ，看了一下依赖的第三方库里实现是基于一个最大线程数为 1 的线程池维护事件循环，这又带来更多衍生问题，比如我如何在 task 间共享连接状态，比如 mysql 连接池？如果我要在异步任务里使用多线程又该如何管理？总之是问题多多。</p>\n<p>再者不提消费者不能异步消费，生产者也不能异步生产，添加任务到任务队列的过程是同步的，也许这带来的延迟非常短暂，但是也许设计者认为该延迟应该忽略？看了看 celery 基于的通信模块是基于 socket 自己搞了个 selector ，自行维护的事件循环没有享受到任何现有生态的好处，纯 py 编写无法享受社区 libuv 版的好处，性能和可靠性都让人质疑。。总之这一个设计让用户代码整个又被拖回同步宇宙，也是问题多多。</p>\n<p>2 、生产者不支持任务完成回调</p>\n<p>对于一些常见的短任务的需求（处理时间小于 1s ），短的任务就不需要加入任务队列了吗？我觉得显然不是的，但是同样的，段任务的处理规范是否应该是返回一个任务状态，再由前端轮询执行结果？我感觉也未必，毕竟任务很短。所以我们部门网关调用时可以选择用异步通知，await 等待执行结果。而 celery 目前看起来网关想获取任务成功状态的话只能轮询，或者是在 worker 那边定义任务完成后再向队列加入一个子任务，你可以在子任务里用自定义的方式给网关一个回调。。。</p>\n", "last_modified": 1651024077, "replies": 50, "id": 849494}]