[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1739135407", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1739135407", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 229757, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1739135407", "stars": 4340, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 581812, "username": "jackma0571", "url": "https://www.v2ex.com/u/jackma0571", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/60216da797eab5dfd20013557fe9a270?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/60216da797eab5dfd20013557fe9a270?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/60216da797eab5dfd20013557fe9a270?s=73&d=retro", "created": 1652672376, "last_modified": 1652672376}, "last_reply_by": "isc", "last_touched": 1746149531, "title": "自己创业负债 200 万，不知道怎么翻身", "url": "https://www.v2ex.com/t/1129321", "created": 1746099850, "deleted": 0, "content": "23 年开始做电商，到现在亏了 200 万，还是没有起色\n\n有在找工作，找不到，除非去送外卖\n\n31 了，单了好多年，去年谈了个女朋友，也因为我负债太高不想拖累别人分手了\n\n焦虑，抑郁，不敢体检\n\n我的时间真不多了，如何能翻盘？\n\n数字货币？有想过跟单一些大 v 比如某兮，但是看了下别人是无限子弹。甚至想自己发个……\n\n不是程序员，打工月薪最高也就一两万，根本看不到希望，何况还找不到工作\n\n债务全面逾期，每天大量催收电话\n\n不知道怎么活", "content_rendered": "23 年开始做电商，到现在亏了 200 万，还是没有起色<br /><br />有在找工作，找不到，除非去送外卖<br /><br />31 了，单了好多年，去年谈了个女朋友，也因为我负债太高不想拖累别人分手了<br /><br />焦虑，抑郁，不敢体检<br /><br />我的时间真不多了，如何能翻盘？<br /><br />数字货币？有想过跟单一些大 v 比如某兮，但是看了下别人是无限子弹。甚至想自己发个……<br /><br />不是程序员，打工月薪最高也就一两万，根本看不到希望，何况还找不到工作<br /><br />债务全面逾期，每天大量催收电话<br /><br />不知道怎么活", "last_modified": 1746099850, "replies": 53, "id": 1129321}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/a3c6/5c29/108_large.png?m=1691642161", "name": "bb", "avatar_normal": "https://cdn.v2ex.com/navatar/a3c6/5c29/108_normal.png?m=1691642161", "title": "宽带症候群", "url": "https://www.v2ex.com/go/bb", "topics": 17324, "footer": "", "header": "网速很重要。比快更快。", "title_alternative": "Broadband Symptom Complex", "avatar_mini": "https://cdn.v2ex.com/navatar/a3c6/5c29/108_mini.png?m=1691642161", "stars": 7859, "aliases": [], "root": false, "id": 108, "parent_node_name": "geek"}, "member": {"id": 284520, "username": "netjacky", "url": "https://www.v2ex.com/u/netjacky", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/900c9725ce10d459cfe2b6ca8b403b43?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/900c9725ce10d459cfe2b6ca8b403b43?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/900c9725ce10d459cfe2b6ca8b403b43?s=73&d=retro", "created": 1516355932, "last_modified": 1516355932}, "last_reply_by": "465456", "last_touched": 1746136123, "title": "各位网络达人，大家觉得现在家用局域网有必要上万兆吗？", "url": "https://www.v2ex.com/t/1129276", "created": 1746068021, "deleted": 0, "content": "如果有的话，是铺设光纤好，还是网线好？\n\n2.5G 就不考虑了。谢谢大家，🙏", "content_rendered": "如果有的话，是铺设光纤好，还是网线好？<br /><br />2.5G 就不考虑了。谢谢大家，🙏", "last_modified": 1746140806, "replies": 46, "id": 1129276}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/9c3b/1830/1113_large.png?m=1727245099", "name": "crypto", "avatar_normal": "https://cdn.v2ex.com/navatar/9c3b/1830/1113_normal.png?m=1727245099", "title": "加密货币", "url": "https://www.v2ex.com/go/crypto", "topics": 280, "footer": "", "header": "", "title_alternative": "Crypto", "avatar_mini": "https://cdn.v2ex.com/navatar/9c3b/1830/1113_mini.png?m=1727245099", "stars": 774, "aliases": [], "root": false, "id": 1113, "parent_node_name": "blockchain"}, "member": {"id": 589835, "username": "gheiisiei", "url": "https://www.v2ex.com/u/gheiisiei", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/750b6db5a4ecae0914b0b795210b21e5?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/750b6db5a4ecae0914b0b795210b21e5?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/750b6db5a4ecae0914b0b795210b21e5?s=73&d=retro", "created": 1659327760, "last_modified": 1746086957}, "last_reply_by": "NewMoorj", "last_touched": 1746123712, "title": "失业程序员，回家养鸡。不甘现状，想挣钱。", "url": "https://www.v2ex.com/t/1129301", "created": 1746087134, "deleted": 0, "content": "初级程序员失业了，好久都找不到工作，直接回农村老家种地养鸡。但我不甘于现状，了解到了币圈，发现各个都是人才很挣钱，想问大佬真的可以挣到钱吗。", "content_rendered": "初级程序员失业了，好久都找不到工作，直接回农村老家种地养鸡。但我不甘于现状，了解到了币圈，发现各个都是人才很挣钱，想问大佬真的可以挣到钱吗。", "last_modified": 1746087134, "replies": 37, "id": 1129301}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 7809, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1824, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 569830, "username": "clocean", "url": "https://www.v2ex.com/u/clocean", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/1fdf/3ece/569830_mini.png?m=1729740892", "avatar_normal": "https://cdn.v2ex.com/avatar/1fdf/3ece/569830_normal.png?m=1729740892", "avatar_large": "https://cdn.v2ex.com/avatar/1fdf/3ece/569830_large.png?m=1729740892", "avatar_xlarge": "https://cdn.v2ex.com/avatar/1fdf/3ece/569830_xlarge.png?m=1729740892", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/1fdf/3ece/569830_xlarge.png?m=1729740892", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/1fdf/3ece/569830_xlarge.png?m=1729740892", "created": 1642818912, "last_modified": 1729740892}, "last_reply_by": "iamqk", "last_touched": 1746126558, "title": "如何与犟种的父母相处？", "url": "https://www.v2ex.com/t/1129294", "created": 1746079441, "deleted": 0, "content": "农村人，父母年纪都上来了，身体自我初中开始就一直不好，家里最常见的东西就是药瓶，每次在外地接电话都胆战心惊，以至于我每隔几天主动打电话回家，杜绝他们主动电话找我这样我才安心。永远忘不了大学有一年放假回家，我爸杵着拐杖站在村口等我回家，原来长时间生病无法出门挣钱，导致精神出了问题，连沟通能力都快失去了，刷牙的时候刷着刷着去喝刷牙的水，过马路不看车站在路中间发呆，加上腰的问题走路都困难，每次回想那个场景，都觉得是上天给我开的一个大玩笑，可能会成为我这辈子抹不掉的梦魇。回家当天饭还没吃就带着我爸出门看病，后来好转了很多，但是因为犟种的脾气身体一直无法彻底好转（爱喝酒抽烟，每餐必喝酒），兜兜转转，今年他都 60 了。\n\n时间回到现在，明知道腰不行非要逞能去茶山摘茶叶，两天的时候发作，忍着到第四天，疼得在床上直哭，带他去治疗好不容易好了不少，没几天又被邻居喊去打麻将，昨天坐了一下午，今天又开始唉声叹气，下午邻居又来喊他，忍着从床上爬起来又去了，怎么说都没用，实在是想不明白，怎么会有这种脑回路，到底图什么呢？问他为什么去，他就说没办法，我寻思这不过就是凑个局，身体不行为什么要去？这一年多我都看在眼里，因为腰不行，我和我妈也不让他干活，每天吃完饭就出去打牌，这还要怎么样？\n\n我妈是个苦命的女人，我因为工作一直不顺没赚到什么钱，最近还生病（现在好的差不多，马上出门上班），我爸和她自己一直都是病痛不断，但是不知道从哪年开始她感觉到我爸是指望不上的，变得格外的坚强，我是很敬佩她的，我和我妈说不要一直去茶山，因为最近茶价下来了没必要再去拼了，她也没听，我对于我妈来说，不是气她犟脾气，就是心疼她不要命，说到底是我没给她安全感，她没什么办法只能靠自己拼命。\n\n因为家里一直生病的原因，我这 20 多年一直没有安全感，哪怕工作了我一直担心父母的身体，担心他们又会怎么样了，劝他们吧根本也劝不动，不劝的话随他门折腾又觉得自己狠心，别人都说老人比小孩难照顾我现在慢慢是有体会了，父母的观念已经形成，又是父母的身份，根本听不进去你的话，哪怕掰开了揉碎了说都没用。\n\n稀里糊涂说了好多，不知道论坛里的朋友们有没有什么建议，我知道这种情况有一部分原因是家里经济条件不行，这是我接下来要解决的问题，其他方面我是真没有什么头绪。放假期间聊这种问题，看到的朋友们如果打扰了你们假期休息，先道一声抱歉。", "content_rendered": "农村人，父母年纪都上来了，身体自我初中开始就一直不好，家里最常见的东西就是药瓶，每次在外地接电话都胆战心惊，以至于我每隔几天主动打电话回家，杜绝他们主动电话找我这样我才安心。永远忘不了大学有一年放假回家，我爸杵着拐杖站在村口等我回家，原来长时间生病无法出门挣钱，导致精神出了问题，连沟通能力都快失去了，刷牙的时候刷着刷着去喝刷牙的水，过马路不看车站在路中间发呆，加上腰的问题走路都困难，每次回想那个场景，都觉得是上天给我开的一个大玩笑，可能会成为我这辈子抹不掉的梦魇。回家当天饭还没吃就带着我爸出门看病，后来好转了很多，但是因为犟种的脾气身体一直无法彻底好转（爱喝酒抽烟，每餐必喝酒），兜兜转转，今年他都 60 了。<br /><br />时间回到现在，明知道腰不行非要逞能去茶山摘茶叶，两天的时候发作，忍着到第四天，疼得在床上直哭，带他去治疗好不容易好了不少，没几天又被邻居喊去打麻将，昨天坐了一下午，今天又开始唉声叹气，下午邻居又来喊他，忍着从床上爬起来又去了，怎么说都没用，实在是想不明白，怎么会有这种脑回路，到底图什么呢？问他为什么去，他就说没办法，我寻思这不过就是凑个局，身体不行为什么要去？这一年多我都看在眼里，因为腰不行，我和我妈也不让他干活，每天吃完饭就出去打牌，这还要怎么样？<br /><br />我妈是个苦命的女人，我因为工作一直不顺没赚到什么钱，最近还生病（现在好的差不多，马上出门上班），我爸和她自己一直都是病痛不断，但是不知道从哪年开始她感觉到我爸是指望不上的，变得格外的坚强，我是很敬佩她的，我和我妈说不要一直去茶山，因为最近茶价下来了没必要再去拼了，她也没听，我对于我妈来说，不是气她犟脾气，就是心疼她不要命，说到底是我没给她安全感，她没什么办法只能靠自己拼命。<br /><br />因为家里一直生病的原因，我这 20 多年一直没有安全感，哪怕工作了我一直担心父母的身体，担心他们又会怎么样了，劝他们吧根本也劝不动，不劝的话随他门折腾又觉得自己狠心，别人都说老人比小孩难照顾我现在慢慢是有体会了，父母的观念已经形成，又是父母的身份，根本听不进去你的话，哪怕掰开了揉碎了说都没用。<br /><br />稀里糊涂说了好多，不知道论坛里的朋友们有没有什么建议，我知道这种情况有一部分原因是家里经济条件不行，这是我接下来要解决的问题，其他方面我是真没有什么头绪。放假期间聊这种问题，看到的朋友们如果打扰了你们假期休息，先道一声抱歉。", "last_modified": 1746150575, "replies": 32, "id": 1129294}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1739135407", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1739135407", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 229757, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1739135407", "stars": 4340, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 452997, "username": "neochen13", "url": "https://www.v2ex.com/u/neochen13", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/874d/5702/452997_mini.png?m=1739705170", "avatar_normal": "https://cdn.v2ex.com/avatar/874d/5702/452997_normal.png?m=1739705170", "avatar_large": "https://cdn.v2ex.com/avatar/874d/5702/452997_large.png?m=1739705170", "avatar_xlarge": "https://cdn.v2ex.com/avatar/874d/5702/452997_xlarge.png?m=1739705170", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/874d/5702/452997_xlarge.png?m=1739705170", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/874d/5702/452997_xlarge.png?m=1739705170", "created": 1573702369, "last_modified": 1739705170}, "last_reply_by": "Hyschtaxjh", "last_touched": 1746149733, "title": "请问一下老哥们，纯小白，旱鸭子，想学习游泳，是看 B 站视频自学好，还是报班好？", "url": "https://www.v2ex.com/t/1129327", "created": 1746107045, "deleted": 0, "content": "本身有些社恐，不知道去哪里报班\r\n\r\n小红书上很多所谓的私教 1v1 不知道靠不靠谱\r\n\r\n想着能不能 B 站自学呢，但是没有一点经验，好迷茫", "content_rendered": "<p>本身有些社恐，不知道去哪里报班</p>\n<p>小红书上很多所谓的私教 1v1 不知道靠不靠谱</p>\n<p>想着能不能 B 站自学呢，但是没有一点经验，好迷茫</p>\n", "last_modified": 1746107045, "replies": 29, "id": 1129327}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/70ef/df2e/17_large.png?m=1660301119", "name": "create", "avatar_normal": "https://cdn.v2ex.com/navatar/70ef/df2e/17_normal.png?m=1660301119", "title": "分享创造", "url": "https://www.v2ex.com/go/create", "topics": 27349, "footer": "", "header": "欢迎你在这里发布自己的最新作品！", "title_alternative": "Create", "avatar_mini": "https://cdn.v2ex.com/navatar/70ef/df2e/17_mini.png?m=1660301119", "stars": 5668, "aliases": [], "root": false, "id": 17, "parent_node_name": "geek"}, "member": {"id": 645343, "username": "dhuzbb", "url": "https://www.v2ex.com/u/dhuzbb", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/b0a5/8c1f/645343_mini.png?m=1746074870", "avatar_normal": "https://cdn.v2ex.com/avatar/b0a5/8c1f/645343_normal.png?m=1746074870", "avatar_large": "https://cdn.v2ex.com/avatar/b0a5/8c1f/645343_large.png?m=1746074870", "avatar_xlarge": "https://cdn.v2ex.com/avatar/b0a5/8c1f/645343_xlarge.png?m=1746074870", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/b0a5/8c1f/645343_xlarge.png?m=1746074870", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/b0a5/8c1f/645343_xlarge.png?m=1746074870", "created": 1692929299, "last_modified": 1746074870}, "last_reply_by": "dhuzbb", "last_touched": 1746118165, "title": "斗地主记牌器的开发", "url": "https://www.v2ex.com/t/1129288", "created": 1746074964, "deleted": 0, "content": "## 起源\r\n\r\n周末经常和同事一起玩 JJ 斗地主，每局输赢不大，主要以娱乐为主。由于经常输，所以萌生了开发一款记牌器来偷偷提升斗地主水平的想法。\r\n\r\n我的本职工作是 Java 后端开发，没有接触过安卓开发，再加上最近 AI 编程的火热，让我萌生了使用 Cursor 开发一款安卓应用的想法。\r\n\r\n## 思路\r\n\r\n主要思路：如果能够每隔 1 秒截取到当前手机屏幕的内容，然后识别出截图中的所有牌张的点数及花色，那么用 54 张牌直接减去对应的牌张及花色即可得到剩余的牌张。\r\n\r\n***实现的困难点在于，不仅要识别牌的点数，还需要识别牌的花色。***\r\n\r\n因为如果只是单纯的识别牌的点数而不考虑花色，那么会产生 Bug 。\r\n\r\n例如：先出黑桃 2 ，再出红桃 2 ，等了 3 秒后再出其它牌。由于出牌时间不是固定的，在这期间每隔 1 秒识别截图会重复识别多次牌张 2 ，导致剩余牌张数不准确。\r\n\r\n如果同时识别牌的点数及花色，则不会出现重复多次扣减同样牌张的问题。\r\n\r\n## UI 设计\r\n\r\n记牌器 UI 的主体借鉴了 JJ 斗地主自身的记牌器。\r\n\r\n应用主界面如下：\r\n\r\n![]( https://img.binhome.cn/card_wizard/1.png)\r\n\r\n由于是自己使用，所以界面做得比较简单，主界面只有一个 [开启记牌器] 按钮。点击后该按钮会变成 [结束记牌器] 。\r\n\r\n点击 [开启记牌器] 按钮，会弹出系统屏幕录制权限，可以只录制单个应用，也可以全局录制整个屏幕。如下所示：\r\n\r\n![]( https://img.binhome.cn/card_wizard/2.png)\r\n\r\n点击 [开始] 按钮，会在当前页面显示记牌器悬浮窗，如下所示：\r\n\r\n![]( https://img.binhome.cn/card_wizard/3.png)\r\n\r\n整个悬浮窗由三部分组成：\r\n\r\n+ 左侧： [隐] 按钮点击可以控制悬浮窗的显示和隐藏。点击后变为 [显] 按钮。\r\n+ 中间：记牌器的主体分为上下两排，下面是 3 到大王的剩余牌张数，如果有炸弹，文字会显示为红色。\r\n+ 右侧： [开始] 按钮点击后可以开始新一局的录制，同时按钮会变为 [结束] 按钮。\r\n\r\n点击右侧 [开始] 按钮后，开始一局的录制，同时按钮会变为 [结束] 按钮。\r\n![]( https://img.binhome.cn/card_wizard/5.png)\r\n\r\n整个悬浮窗可以全局灵活的自由拖动：\r\n![]( https://img.binhome.cn/card_wizard/4.png)\r\n\r\n悬浮窗还可以显示和隐藏：\r\n![]( https://img.binhome.cn/card_wizard/6.png)\r\n\r\n记牌器显示在桌面的效果如下：\r\n![]( https://img.binhome.cn/card_wizard/7.png)\r\n\r\n记牌器在 JJ 斗地主游戏界面显示如下：\r\n![]( https://img.binhome.cn/card_wizard/8.png)\r\n\r\n\r\n## UI 开发\r\n\r\n期间一共开发了三个版本：\r\n\r\n+ 第一个版本由 Cursor 的 Agent 模式开发，使用 Claude 3.7 Sonnet 模型。由于个人知识的局限性，对于安卓全局悬浮窗和屏幕录制权限完全不了解。当提出的问题本身可能都不完全正确的情况下，让 AI 去实现相应的功能以及修改 Bug 的时候，AI 往往会陷入死循环，结果就是 Cursor 消耗了 200 左右的对话次数都无法修改正确一个在我个人看来非常简单的问题。令人失望的是，最后并没有达到想要的效果，以失败告终。\r\n\r\n+ 第二次尝试使用免费的 Trae 来开发同样的 UI 部分，同样使用 Claude 3.7 Sonnet 模型。有了第一次的经验，使用 Trae 开发的前期比较顺畅，但是当对话次数多了之后需要排队，由于等待时间较长，严重影响写代码的体验，最终还是放弃了。\r\n\r\n+ 前面两次 AI 生成的 UI 代码也不是完全没有用处。有了前面两次的经验，还是让我学习到了不少安卓 UI 开发的相关知识。最后还是通过搜索相关实现例子，手写大部分 UI 代码再加上 AI 的辅助，最终才搞定 UI 的部分。\r\n\r\n## 图像识别\r\n\r\n记牌器的技术难点在于图像识别。\r\n\r\n前期通过调研，得知 OpenCV 可以实现图像识别，并且网上可以搜索到相应的代码示例，再加上 OpenCV 有对应的 Java 包，所以优先选择了 OpenCV 来开发图像识别功能。\r\n\r\n通过 ChatGPT 以及 DeepSeek 的辅助，花费了不少时间开发出了第一版的 OpenCV 识别算法。\r\n\r\n核心思路大致是：\r\n\r\n+ 通过手动截取出 54 张牌的左上角的数字以及花色区域，得到 54 张截图模板。\r\n+ 对模版和待识别的截图进行各种预处理（转为灰度图、高斯模糊、二值化等）。\r\n+ 最后使用 OpenCV 的模板匹配，将 54 张模板和待识别的截图依次做相似度匹配，取匹配相似度最高的结果，并且丢掉低于设定阈值的匹配结果。\r\n\r\n测试过程中发现 OpenCV 的识别效果不太理想，容易出现识别错误以及漏识别的问题。\r\n\r\n`对于记牌器应用来说，是不能容忍任何的漏记以及错误识别的，必须想办法提高识别的精度。`\r\n\r\n## 深度学习\r\n\r\nOpenCV 的模版匹配方案还有另外 2 个致命的问题：\r\n\r\n+ 不同手机的分辨率可能不一样，势必会影响识别的准确度。\r\n+ 无法适配其它斗地主游戏。\r\n\r\n既然 OpenCV 存在致命的缺陷，所以不得不推倒重来。\r\n\r\n又是新的一轮咨询 ChatGPT 以及 DeepSeek ，得到了可以通过基于深度学习框架 YOLO 来提高图像识别的准确度。\r\n\r\n大致看了一下官网文档，看上去比较容易上手。\r\n\r\n整体大致流程：\r\n\r\n+ 先手动截取一些包含所有 54 种牌张的截图\r\n+ 使用 `LabelImg` 对截图进行类别的标注\r\n+ 将截图按照 `8:2` 的比例分为训练集和验证集\r\n+ 使用 YOLO 进行训练\r\n+ 最后导出训练的最佳模型\r\n\r\n有了 AI 的详细指导，整个过程基本上都比较顺畅。使用 Google 免费的 Colab 很快就训练出了第一版模型。然而最终验证的识别效果还是不太理想，还是存在漏记和错记的情况。\r\n\r\n最后得知原因在于训练的数据集太小（手动截图并标注了几十张训练图）。想要识别效果比较理想，一般的 YOLO 训练集的大小规模在几千到上万张左右。\r\n\r\n由于手动一张张截取手机屏幕并标注，消耗的时间实在是太长了。为了解决训练集不足的问题，最后不得不写了一个程序，根据截图模版随机生成了一万张图片以及对应的 YOLO 标注文件用于训练。\r\n\r\n当训练集规模到了一万张的时候，预计模型训练花费的时间会达到几个小时，Google 免费的 Colab 有运行时间的限制条件，无法再满足训练的需求，不得不考虑租用 GPU 服务器。\r\n\r\n综合对比之下，最后采用了阿里云的 GPU 服务器。配置为 16G 显存的 V100 显卡。非常幸运的是，新用户前 100 个小时有很大的优惠折扣，折合 2 块/小时左右，实在是太划算了。\r\n\r\n在阿里云上总共的训练时长不到 3 个小时。最后，识别精度意外的好，每张牌都能到达 0.98-0.99 的准确度，实际体验下来没有遇到过错记或漏记的情况。\r\n\r\n## 整合\r\n\r\n将训练好的图像识别模型与 UI 整合起来有两种方式：\r\n\r\n+ 通过 Python 调用训练好的模型并部署 API 接口供安卓 UI 调用。\r\n+ 将模型转换为适用于移动端的模型格式，安卓自身通过代码直接调用模型进行图像识别。\r\n\r\n方案 1 的缺点就是需要额外的服务器进行部署，且依赖网络传输截图数据。\r\n\r\n方案 2 我个人没有尝试过，但看 ChatGPT 给出来的代码示例，感觉也许应该是可行的吧。有空会尝试一下方案 2 ，不清楚移动设备的识别效率会怎样。\r\n\r\n由于难易程度的关系，我采用了方案 1 。通过 ChatGPT 给出的 Python 调用模型进行识别的方式，很容易就对外暴露了一个识别 API 接口供安卓 UI 调用。\r\n\r\n最后在家里的 M4 Mac Mini 上部署之后，达到了非常完美的识别效果。\r\n\r\n## 思考和总结\r\n\r\n经常在网上看到一些所谓的`完全不懂编程，我竟然 4 小时靠 AI 复刻出月入$600k 的 APP 的同款`的营销文章和视频。说实话，我个人是非常反感这类文章和视频的。\r\n\r\n从我个人的亲身体验来看，现阶段的 AI 还只能用于辅助开发。AI 的知识储备确实非常丰富，能够带领你尝试你从未涉及的领域。但是，往往由于个人本身所掌握的知识的局限性，遇到特定的问题的时候，依靠 AI 往往很难解决。\r\n\r\n另一个方面，AI 很容易犯错。我记得让 ChatGPT 给出使用 SpringBoot 实现直接调用训练好的 YOLO 模型的时候，AI 很快给出了一段看上去像模像样的 Java 代码并贴心的给出了 Maven 依赖包。当你按照 AI 的指导写好所有代码的时候，你会惊奇的发现，Maven 包实际上并不存在，完全是 AI 瞎编造出来的，包括那些像模像样的实现代码也是一样。当你质问 AI 给出的 Maven 依赖包为何不存在的时候，只会得到 一句抱歉。\r\n\r\n然而即使现阶段的 AI 在使用上还有着各种各样的缺陷，我对未来的 AI 编程还是抱有期望的。对比几年前，AI 的提升无疑是巨大的。这些改进和提升在往后的几十年中还会不断的上演，甚至呈现指数级的增长，直到实现普通人都能够轻松使用的真正的 AI 。", "content_rendered": "<h2>起源</h2>\n<p>周末经常和同事一起玩 JJ 斗地主，每局输赢不大，主要以娱乐为主。由于经常输，所以萌生了开发一款记牌器来偷偷提升斗地主水平的想法。</p>\n<p>我的本职工作是 Java 后端开发，没有接触过安卓开发，再加上最近 AI 编程的火热，让我萌生了使用 Cursor 开发一款安卓应用的想法。</p>\n<h2>思路</h2>\n<p>主要思路：如果能够每隔 1 秒截取到当前手机屏幕的内容，然后识别出截图中的所有牌张的点数及花色，那么用 54 张牌直接减去对应的牌张及花色即可得到剩余的牌张。</p>\n<p><em><strong>实现的困难点在于，不仅要识别牌的点数，还需要识别牌的花色。</strong></em></p>\n<p>因为如果只是单纯的识别牌的点数而不考虑花色，那么会产生 Bug 。</p>\n<p>例如：先出黑桃 2 ，再出红桃 2 ，等了 3 秒后再出其它牌。由于出牌时间不是固定的，在这期间每隔 1 秒识别截图会重复识别多次牌张 2 ，导致剩余牌张数不准确。</p>\n<p>如果同时识别牌的点数及花色，则不会出现重复多次扣减同样牌张的问题。</p>\n<h2>UI 设计</h2>\n<p>记牌器 UI 的主体借鉴了 JJ 斗地主自身的记牌器。</p>\n<p>应用主界面如下：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/1.png\"/></p>\n<p>由于是自己使用，所以界面做得比较简单，主界面只有一个 [开启记牌器] 按钮。点击后该按钮会变成 [结束记牌器] 。</p>\n<p>点击 [开启记牌器] 按钮，会弹出系统屏幕录制权限，可以只录制单个应用，也可以全局录制整个屏幕。如下所示：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/2.png\"/></p>\n<p>点击 [开始] 按钮，会在当前页面显示记牌器悬浮窗，如下所示：</p>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/3.png\"/></p>\n<p>整个悬浮窗由三部分组成：</p>\n<ul>\n<li>左侧： [隐] 按钮点击可以控制悬浮窗的显示和隐藏。点击后变为 [显] 按钮。</li>\n<li>中间：记牌器的主体分为上下两排，下面是 3 到大王的剩余牌张数，如果有炸弹，文字会显示为红色。</li>\n<li>右侧： [开始] 按钮点击后可以开始新一局的录制，同时按钮会变为 [结束] 按钮。</li>\n</ul>\n<p>点击右侧 [开始] 按钮后，开始一局的录制，同时按钮会变为 [结束] 按钮。\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/5.png\"/></p>\n<p>整个悬浮窗可以全局灵活的自由拖动：\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/4.png\"/></p>\n<p>悬浮窗还可以显示和隐藏：\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/6.png\"/></p>\n<p>记牌器显示在桌面的效果如下：\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/7.png\"/></p>\n<p>记牌器在 JJ 斗地主游戏界面显示如下：\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img.binhome.cn/card_wizard/8.png\"/></p>\n<h2>UI 开发</h2>\n<p>期间一共开发了三个版本：</p>\n<ul>\n<li>\n<p>第一个版本由 Cursor 的 Agent 模式开发，使用 Claude 3.7 Sonnet 模型。由于个人知识的局限性，对于安卓全局悬浮窗和屏幕录制权限完全不了解。当提出的问题本身可能都不完全正确的情况下，让 AI 去实现相应的功能以及修改 Bug 的时候，AI 往往会陷入死循环，结果就是 Cursor 消耗了 200 左右的对话次数都无法修改正确一个在我个人看来非常简单的问题。令人失望的是，最后并没有达到想要的效果，以失败告终。</p>\n</li>\n<li>\n<p>第二次尝试使用免费的 Trae 来开发同样的 UI 部分，同样使用 Claude 3.7 Sonnet 模型。有了第一次的经验，使用 Trae 开发的前期比较顺畅，但是当对话次数多了之后需要排队，由于等待时间较长，严重影响写代码的体验，最终还是放弃了。</p>\n</li>\n<li>\n<p>前面两次 AI 生成的 UI 代码也不是完全没有用处。有了前面两次的经验，还是让我学习到了不少安卓 UI 开发的相关知识。最后还是通过搜索相关实现例子，手写大部分 UI 代码再加上 AI 的辅助，最终才搞定 UI 的部分。</p>\n</li>\n</ul>\n<h2>图像识别</h2>\n<p>记牌器的技术难点在于图像识别。</p>\n<p>前期通过调研，得知 OpenCV 可以实现图像识别，并且网上可以搜索到相应的代码示例，再加上 OpenCV 有对应的 Java 包，所以优先选择了 OpenCV 来开发图像识别功能。</p>\n<p>通过 ChatGPT 以及 DeepSeek 的辅助，花费了不少时间开发出了第一版的 OpenCV 识别算法。</p>\n<p>核心思路大致是：</p>\n<ul>\n<li>通过手动截取出 54 张牌的左上角的数字以及花色区域，得到 54 张截图模板。</li>\n<li>对模版和待识别的截图进行各种预处理（转为灰度图、高斯模糊、二值化等）。</li>\n<li>最后使用 OpenCV 的模板匹配，将 54 张模板和待识别的截图依次做相似度匹配，取匹配相似度最高的结果，并且丢掉低于设定阈值的匹配结果。</li>\n</ul>\n<p>测试过程中发现 OpenCV 的识别效果不太理想，容易出现识别错误以及漏识别的问题。</p>\n<p><code>对于记牌器应用来说，是不能容忍任何的漏记以及错误识别的，必须想办法提高识别的精度。</code></p>\n<h2>深度学习</h2>\n<p>OpenCV 的模版匹配方案还有另外 2 个致命的问题：</p>\n<ul>\n<li>不同手机的分辨率可能不一样，势必会影响识别的准确度。</li>\n<li>无法适配其它斗地主游戏。</li>\n</ul>\n<p>既然 OpenCV 存在致命的缺陷，所以不得不推倒重来。</p>\n<p>又是新的一轮咨询 ChatGPT 以及 DeepSeek ，得到了可以通过基于深度学习框架 YOLO 来提高图像识别的准确度。</p>\n<p>大致看了一下官网文档，看上去比较容易上手。</p>\n<p>整体大致流程：</p>\n<ul>\n<li>先手动截取一些包含所有 54 种牌张的截图</li>\n<li>使用 <code>LabelImg</code> 对截图进行类别的标注</li>\n<li>将截图按照 <code>8:2</code> 的比例分为训练集和验证集</li>\n<li>使用 YOLO 进行训练</li>\n<li>最后导出训练的最佳模型</li>\n</ul>\n<p>有了 AI 的详细指导，整个过程基本上都比较顺畅。使用 Google 免费的 Colab 很快就训练出了第一版模型。然而最终验证的识别效果还是不太理想，还是存在漏记和错记的情况。</p>\n<p>最后得知原因在于训练的数据集太小（手动截图并标注了几十张训练图）。想要识别效果比较理想，一般的 YOLO 训练集的大小规模在几千到上万张左右。</p>\n<p>由于手动一张张截取手机屏幕并标注，消耗的时间实在是太长了。为了解决训练集不足的问题，最后不得不写了一个程序，根据截图模版随机生成了一万张图片以及对应的 YOLO 标注文件用于训练。</p>\n<p>当训练集规模到了一万张的时候，预计模型训练花费的时间会达到几个小时，Google 免费的 Colab 有运行时间的限制条件，无法再满足训练的需求，不得不考虑租用 GPU 服务器。</p>\n<p>综合对比之下，最后采用了阿里云的 GPU 服务器。配置为 16G 显存的 V100 显卡。非常幸运的是，新用户前 100 个小时有很大的优惠折扣，折合 2 块/小时左右，实在是太划算了。</p>\n<p>在阿里云上总共的训练时长不到 3 个小时。最后，识别精度意外的好，每张牌都能到达 0.98-0.99 的准确度，实际体验下来没有遇到过错记或漏记的情况。</p>\n<h2>整合</h2>\n<p>将训练好的图像识别模型与 UI 整合起来有两种方式：</p>\n<ul>\n<li>通过 Python 调用训练好的模型并部署 API 接口供安卓 UI 调用。</li>\n<li>将模型转换为适用于移动端的模型格式，安卓自身通过代码直接调用模型进行图像识别。</li>\n</ul>\n<p>方案 1 的缺点就是需要额外的服务器进行部署，且依赖网络传输截图数据。</p>\n<p>方案 2 我个人没有尝试过，但看 ChatGPT 给出来的代码示例，感觉也许应该是可行的吧。有空会尝试一下方案 2 ，不清楚移动设备的识别效率会怎样。</p>\n<p>由于难易程度的关系，我采用了方案 1 。通过 ChatGPT 给出的 Python 调用模型进行识别的方式，很容易就对外暴露了一个识别 API 接口供安卓 UI 调用。</p>\n<p>最后在家里的 M4 Mac Mini 上部署之后，达到了非常完美的识别效果。</p>\n<h2>思考和总结</h2>\n<p>经常在网上看到一些所谓的<code>完全不懂编程，我竟然 4 小时靠 AI 复刻出月入$600k 的 APP 的同款</code>的营销文章和视频。说实话，我个人是非常反感这类文章和视频的。</p>\n<p>从我个人的亲身体验来看，现阶段的 AI 还只能用于辅助开发。AI 的知识储备确实非常丰富，能够带领你尝试你从未涉及的领域。但是，往往由于个人本身所掌握的知识的局限性，遇到特定的问题的时候，依靠 AI 往往很难解决。</p>\n<p>另一个方面，AI 很容易犯错。我记得让 ChatGPT 给出使用 SpringBoot 实现直接调用训练好的 YOLO 模型的时候，AI 很快给出了一段看上去像模像样的 Java 代码并贴心的给出了 Maven 依赖包。当你按照 AI 的指导写好所有代码的时候，你会惊奇的发现，Maven 包实际上并不存在，完全是 AI 瞎编造出来的，包括那些像模像样的实现代码也是一样。当你质问 AI 给出的 Maven 依赖包为何不存在的时候，只会得到 一句抱歉。</p>\n<p>然而即使现阶段的 AI 在使用上还有着各种各样的缺陷，我对未来的 AI 编程还是抱有期望的。对比几年前，AI 的提升无疑是巨大的。这些改进和提升在往后的几十年中还会不断的上演，甚至呈现指数级的增长，直到实现普通人都能够轻松使用的真正的 AI 。</p>\n", "last_modified": 1746075144, "replies": 25, "id": 1129288}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/1fc2/1400/864_large.png?m=1658911802", "name": "promotions", "avatar_normal": "https://cdn.v2ex.com/navatar/1fc2/1400/864_normal.png?m=1658911802", "title": "推广", "url": "https://www.v2ex.com/go/promotions", "topics": 9119, "footer": "", "header": "来自厂商的推广活动类主题，会被归类到这个节点。希望有情怀的产商们在发布推广内容时，主动选择发布到本节点下。点击 <a href=\"/help/node\">这里</a> 阅读 V2EX 的节点使用指南。", "title_alternative": "Promotions", "avatar_mini": "https://cdn.v2ex.com/navatar/1fc2/1400/864_mini.png?m=1658911802", "stars": 1006, "aliases": [], "root": false, "id": 864, "parent_node_name": ""}, "member": {"id": 319833, "username": "Fiery123", "url": "https://www.v2ex.com/u/Fiery123", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/cfddfdff382f438fa5c4b7f50bbfb4d1?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/cfddfdff382f438fa5c4b7f50bbfb4d1?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/cfddfdff382f438fa5c4b7f50bbfb4d1?s=73&d=retro", "created": 1527817756, "last_modified": 1709817143}, "last_reply_by": "dif", "last_touched": 1746125542, "title": "还没开始，尴尬住了。。", "url": "https://www.v2ex.com/t/1129316", "created": 1746095178, "deleted": 0, "content": "失业在家。。\r\n家乡这边只有柑橘产业。。自己搞了个简单展示柑橘，像外卖一样下单柑橘的网站。完了去腾讯开通网站。。实名个人备案没通过。回复不是个人分享性质的网站，只能注册个体工商户才能完成备案。。\r\n放香港又怕不能解析，访问的问题。。。\r\n尴尬住了。还没开始。注册个体工商会 一套下来估计要 3 4 千。。\r\n我还是想先看下效果，，再看要不要加大投入的。", "content_rendered": "失业在家。。<br />家乡这边只有柑橘产业。。自己搞了个简单展示柑橘，像外卖一样下单柑橘的网站。完了去腾讯开通网站。。实名个人备案没通过。回复不是个人分享性质的网站，只能注册个体工商户才能完成备案。。<br />放香港又怕不能解析，访问的问题。。。<br />尴尬住了。还没开始。注册个体工商会 一套下来估计要 3 4 千。。<br />我还是想先看下效果，，再看要不要加大投入的。", "last_modified": 1746095178, "replies": 21, "id": 1129316}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1739135407", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1739135407", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 229757, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1739135407", "stars": 4340, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 298066, "username": "kissyuer", "url": "https://www.v2ex.com/u/kissyuer", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/21f7/f3fb/298066_mini.png?m=1745291245", "avatar_normal": "https://cdn.v2ex.com/avatar/21f7/f3fb/298066_normal.png?m=1745291245", "avatar_large": "https://cdn.v2ex.com/avatar/21f7/f3fb/298066_large.png?m=1745291245", "avatar_xlarge": "https://cdn.v2ex.com/avatar/21f7/f3fb/298066_xlarge.png?m=1745291245", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/21f7/f3fb/298066_xlarge.png?m=1745291245", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/21f7/f3fb/298066_xlarge.png?m=1745291245", "created": 1520486724, "last_modified": 1745291245}, "last_reply_by": "Lowlife", "last_touched": 1746152615, "title": "请教，有大佬知道如何在国内使用 WhatsApp 吗？", "url": "https://www.v2ex.com/t/1129337", "created": 1746109799, "deleted": 0, "content": "最近有海外客户问我有没有 WhatsApp ，我去下载后才发现这个软件好难注册，挂了梯子也不行，换了其他国家电话卡也不行，一直报“目前无法登录，出于安全考虑，我们目前无法让您登录”，有没有什么好的解决办法啊", "content_rendered": "<p>最近有海外客户问我有没有 WhatsApp ，我去下载后才发现这个软件好难注册，挂了梯子也不行，换了其他国家电话卡也不行，一直报“目前无法登录，出于安全考虑，我们目前无法让您登录”，有没有什么好的解决办法啊</p>\n", "last_modified": 1746109799, "replies": 20, "id": 1129337}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6512/bd43/11_large.png?m=1724399301", "name": "linux", "avatar_normal": "https://cdn.v2ex.com/navatar/6512/bd43/11_normal.png?m=1724399301", "title": "Linux", "url": "https://www.v2ex.com/go/linux", "topics": 8162, "footer": "", "header": "Linux is a Unix-like computer operating system assembled under the model of free and open source software development and distribution.", "title_alternative": "Linux", "avatar_mini": "https://cdn.v2ex.com/navatar/6512/bd43/11_mini.png?m=1724399301", "stars": 6476, "aliases": [], "root": false, "id": 11, "parent_node_name": "os"}, "member": {"id": 597700, "username": "wniming", "url": "https://www.v2ex.com/u/wniming", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/708d900c4d23d905941b0c2cf38b7565?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/708d900c4d23d905941b0c2cf38b7565?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/708d900c4d23d905941b0c2cf38b7565?s=73&d=retro", "created": 1665981873, "last_modified": 1712815526}, "last_reply_by": "yinmin", "last_touched": 1746113919, "title": "有没有办法在 lxc 特权容器中用普通用户运行 podman？", "url": "https://www.v2ex.com/t/1129319", "created": 1746097700, "deleted": 0, "content": "有这个需求是因为有时会把一台 linux 服务器(服务器 A)的硬盘全部拆下来装到另一台 linux 服务器（服务器 B ）上临时使用（比如服务器 A 的有些硬件坏了要送去售后)，又不想影响服务器 B 现有的功能，所以想到在服务器 B 上手动把服务器 A 的文件系统树 mount 到特定的目录，然后用特权 lxc 容器来运行服务器 A 的所有服务（直接指定特权 lxc 容器的 rootfs path 为自己手动挂载的服务器 A 的文件系统树），这种做法是可以做到服务器 A 的大部分服务都能在特权 lxc 容器内运行的（甚至包括用 libvirt 管理的虚拟机），但是服务器 A 上的用非特权 podman 运行的服务无法在特权 lxc 容器内运行，下面有个简单的例子：\r\n\r\n```\r\nd@server:~$ podman run -it --rm fedora:42\r\nError: crun: mount `proc` to `proc`: Operation not permitted: OCI permission denied\r\n\r\n```\r\n其实也不仅仅是 podman ，非特权的 docker 和非特权的 lxc 也都无法在特权 lxc 容器内运行。\r\n\r\n估计很少有人有类似的需求，不过我确实很想这么用，自己研究大半天了没解决，希望有 v 友知道这个要怎么实现。", "content_rendered": "<p>有这个需求是因为有时会把一台 linux 服务器(服务器 A)的硬盘全部拆下来装到另一台 linux 服务器（服务器 B ）上临时使用（比如服务器 A 的有些硬件坏了要送去售后)，又不想影响服务器 B 现有的功能，所以想到在服务器 B 上手动把服务器 A 的文件系统树 mount 到特定的目录，然后用特权 lxc 容器来运行服务器 A 的所有服务（直接指定特权 lxc 容器的 rootfs path 为自己手动挂载的服务器 A 的文件系统树），这种做法是可以做到服务器 A 的大部分服务都能在特权 lxc 容器内运行的（甚至包括用 libvirt 管理的虚拟机），但是服务器 A 上的用非特权 podman 运行的服务无法在特权 lxc 容器内运行，下面有个简单的例子：</p>\n<pre><code>d@server:~$ podman run -it --rm fedora:42\nError: crun: mount `proc` to `proc`: Operation not permitted: OCI permission denied\n\n</code></pre>\n<p>其实也不仅仅是 podman ，非特权的 docker 和非特权的 lxc 也都无法在特权 lxc 容器内运行。</p>\n<p>估计很少有人有类似的需求，不过我确实很想这么用，自己研究大半天了没解决，希望有 v 友知道这个要怎么实现。</p>\n", "last_modified": 1746097968, "replies": 19, "id": 1129319}]