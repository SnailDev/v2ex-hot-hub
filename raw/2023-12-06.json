[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/dc56/8979/804_large.png?m=1643850384", "name": "mmm", "avatar_normal": "https://cdn.v2ex.com/navatar/dc56/8979/804_normal.png?m=1643850384", "title": "买买买", "url": "https://www.v2ex.com/go/mmm", "topics": 615, "footer": "", "header": "如果你最近买了某个有点点奢侈，但是又非常酷的东西，那就发到这个节点来交（xia）流（du）一下吧", "title_alternative": "Buy Buy Buy", "avatar_mini": "https://cdn.v2ex.com/navatar/dc56/8979/804_mini.png?m=1643850384", "stars": 374, "aliases": [], "root": false, "id": 804, "parent_node_name": "internet"}, "member": {"id": 336568, "username": "fzzff", "url": "https://www.v2ex.com/u/fzzff", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/c5ffee591d08700fb493f32b081bdd52?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/c5ffee591d08700fb493f32b081bdd52?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/c5ffee591d08700fb493f32b081bdd52?s=73&d=retro", "created": 1532682811, "last_modified": 1532682811}, "last_reply_by": "Bichat", "last_touched": 1701827713, "title": "决赛圈 iqoo12/魅族 20pro/魅族 21 怎么选", "url": "https://www.v2ex.com/t/997747", "created": 1701754449, "deleted": 0, "content": "目前在用华为 p30pro, sim2 卡槽损坏不读卡了, 想了想也该换个手机了, 研究了下今年发售的新机器最终决定从 iqoo12/魅族 20pro/魅族 21 选择一款, 有点纠结有没有大兄弟给点意见", "content_rendered": "<p>目前在用华为 p30pro, sim2 卡槽损坏不读卡了, 想了想也该换个手机了, 研究了下今年发售的新机器最终决定从 iqoo12/魅族 20pro/魅族 21 选择一款, 有点纠结有没有大兄弟给点意见</p>\n", "last_modified": 1701827032, "replies": 97, "id": 997747}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 213009, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 4047, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 404790, "username": "Mrealy", "url": "https://www.v2ex.com/u/Mrealy", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/aa64bb8b7366c9519f678a0e2d6c4aa2?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/aa64bb8b7366c9519f678a0e2d6c4aa2?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/aa64bb8b7366c9519f678a0e2d6c4aa2?s=73&d=retro", "created": 1555987830, "last_modified": 1555987830}, "last_reply_by": "ramdava", "last_touched": 1701827002, "title": "年会特等奖 15000 奖品推荐？", "url": "https://www.v2ex.com/t/997755", "created": 1701755566, "deleted": 0, "content": "年会特等奖预算 15000 以内，奖品什么好？可以三选一的\r\n目前只想到 macbook m3 pro\r\niphone 15PRO MAX+APPLE WATCH 或者 Airpods\r\n还有什么程序员比较喜欢的奖品？", "content_rendered": "年会特等奖预算 15000 以内，奖品什么好？可以三选一的<br />目前只想到 macbook m3 pro<br />iphone 15PRO MAX+APPLE WATCH 或者 Airpods<br />还有什么程序员比较喜欢的奖品？", "last_modified": 1701755566, "replies": 91, "id": 997755}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 5239, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1303, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 486401, "username": "hanlin85", "url": "https://www.v2ex.com/u/hanlin85", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/092b/2f95/486401_mini.png?m=1691552862", "avatar_normal": "https://cdn.v2ex.com/avatar/092b/2f95/486401_normal.png?m=1691552862", "avatar_large": "https://cdn.v2ex.com/avatar/092b/2f95/486401_large.png?m=1691552862", "avatar_xlarge": "https://cdn.v2ex.com/avatar/092b/2f95/486401_xlarge.png?m=1691552862", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/092b/2f95/486401_xlarge.png?m=1691552862", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/092b/2f95/486401_xlarge.png?m=1691552862", "created": 1587910852, "last_modified": 1691552862}, "last_reply_by": "Bigglesworth", "last_touched": 1701796394, "title": "最近在纠结是否要多买一套开发区的房", "url": "https://www.v2ex.com/t/997706", "created": 1701744929, "deleted": 0, "content": "情况是这样的，现在自己已经有一套房（公积金还贷中，没有还款压力），父母也有一套房（无贷），但是现在有机会在本地的开发区买一套房的名额（类似单位的集资福利房），房屋总面积 152 ，四房两厅，设计得挺合理的，房间大，客厅小，单价要比市场价便宜大约 1150 左右。房子我去看过，环境绿化各方面在开发区算是比较好的。\r\n    现在就在犹豫要不要把这套房也买了，买的动机单纯是有价格优惠，能比市场价便宜 1150 左右，买来了也不会搬去住。家庭内部讨论了一下，父母这边是觉得单价低建议我们买，还可以资助我们一部分首付。我自己觉得是不太想买，现在的房已经够住了，而且开发区离我们现在住的地方有 30 公里，工作生活都不方便，好像确实没有必要买。但是我也觉得这个价格和环境有点让我心动，想买了倒手都能赚个价差。现在开发商又在催着要在 12 月底签合同（前期交了 2 万认筹金，不要可以退），现在非常犹豫。", "content_rendered": "<p>情况是这样的，现在自己已经有一套房（公积金还贷中，没有还款压力），父母也有一套房（无贷），但是现在有机会在本地的开发区买一套房的名额（类似单位的集资福利房），房屋总面积 152 ，四房两厅，设计得挺合理的，房间大，客厅小，单价要比市场价便宜大约 1150 左右。房子我去看过，环境绿化各方面在开发区算是比较好的。\n现在就在犹豫要不要把这套房也买了，买的动机单纯是有价格优惠，能比市场价便宜 1150 左右，买来了也不会搬去住。家庭内部讨论了一下，父母这边是觉得单价低建议我们买，还可以资助我们一部分首付。我自己觉得是不太想买，现在的房已经够住了，而且开发区离我们现在住的地方有 30 公里，工作生活都不方便，好像确实没有必要买。但是我也觉得这个价格和环境有点让我心动，想买了倒手都能赚个价差。现在开发商又在催着要在 12 月底签合同（前期交了 2 万认筹金，不要可以退），现在非常犹豫。</p>\n", "last_modified": 1701745291, "replies": 85, "id": 997706}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/e7b2/4b11/360_large.png?m=1670319927", "name": "windows", "avatar_normal": "https://cdn.v2ex.com/navatar/e7b2/4b11/360_normal.png?m=1670319927", "title": "Windows", "url": "https://www.v2ex.com/go/windows", "topics": 3603, "footer": "", "header": "Windows, not walls.", "title_alternative": "Windows", "avatar_mini": "https://cdn.v2ex.com/navatar/e7b2/4b11/360_mini.png?m=1670319927", "stars": 1168, "aliases": [], "root": false, "id": 360, "parent_node_name": "os"}, "member": {"id": 258839, "username": "yakun4566", "url": "https://www.v2ex.com/u/yakun4566", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/ca76de478cd25672ae1023f079bd743a?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/ca76de478cd25672ae1023f079bd743a?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/ca76de478cd25672ae1023f079bd743a?s=73&d=retro", "created": 1507690350, "last_modified": 1701741169}, "last_reply_by": "7inFen", "last_touched": 1701814668, "title": "Win11 切换回 Win10 风格 UI，浑身都带劲了", "url": "https://www.v2ex.com/t/997686", "created": 1701742876, "deleted": 0, "content": "上周忍不住从用了很多年的 win10 升级到 11 ，UI 风格变化实在有点大，各种用不习惯。\r\n吐槽几点不能接受的地方\r\n1. 开始按钮不是斜的，开始菜单的磁贴也没有 win10 好用好看。甚至为了给广告留空，下面有单独留白，简直不能忍。\r\n2. 右键菜单简单是简单了，其实就是把原来的藏起来了，要用的话还得单独找，我解压个文件能难受死。11 的右键菜单我不明白有什么意义，不仅 UI 看着累，操作也是最不常用的，审美+便利他现在是一样不占。包括桌面跟文件夹。\r\n3. 任务栏，默认任务栏是白色的，任务栏来消息一点也不明显，不是看到右下角有图标闪，我都不知道来新消息了，极度影响工作效率。还有一些不太好的，折叠托盘展开跟任务栏不贴近，软件图标间距很大很占空，笔记本本来就小，右下角托盘图标能给我顶到中间去。\r\n其他的都不说了，win11 底层我不评价，这个 UI 真是够垃圾的。\r\n\r\n然后！！！昨天我发现一个软件\r\n- https://github.com/valinet/ExplorerPatcher  这个软件一安装，UI 风格全变回 win10 了，任务栏也能右键了（ win11 在任务栏右键就两个按钮，一直像是感觉没右键准似得\r\n），右键菜单默认也变回 win10 了，浑身带劲儿~。\r\n- 还有一个软件：win11 轻松设置，这个据说是作者发布在远景论坛，网上也能搜到，也是可以把一些 win11 设置变回 win10 。", "content_rendered": "<p>上周忍不住从用了很多年的 win10 升级到 11 ，UI 风格变化实在有点大，各种用不习惯。\n吐槽几点不能接受的地方</p>\n<ol>\n<li>开始按钮不是斜的，开始菜单的磁贴也没有 win10 好用好看。甚至为了给广告留空，下面有单独留白，简直不能忍。</li>\n<li>右键菜单简单是简单了，其实就是把原来的藏起来了，要用的话还得单独找，我解压个文件能难受死。11 的右键菜单我不明白有什么意义，不仅 UI 看着累，操作也是最不常用的，审美+便利他现在是一样不占。包括桌面跟文件夹。</li>\n<li>任务栏，默认任务栏是白色的，任务栏来消息一点也不明显，不是看到右下角有图标闪，我都不知道来新消息了，极度影响工作效率。还有一些不太好的，折叠托盘展开跟任务栏不贴近，软件图标间距很大很占空，笔记本本来就小，右下角托盘图标能给我顶到中间去。\n其他的都不说了，win11 底层我不评价，这个 UI 真是够垃圾的。</li>\n</ol>\n<p>然后！！！昨天我发现一个软件</p>\n<ul>\n<li><a href=\"https://github.com/valinet/ExplorerPatcher\" rel=\"nofollow\">https://github.com/valinet/ExplorerPatcher</a>  这个软件一安装，UI 风格全变回 win10 了，任务栏也能右键了（ win11 在任务栏右键就两个按钮，一直像是感觉没右键准似得\n），右键菜单默认也变回 win10 了，浑身带劲儿~。</li>\n<li>还有一个软件：win11 轻松设置，这个据说是作者发布在远景论坛，网上也能搜到，也是可以把一些 win11 设置变回 win10 。</li>\n</ul>\n", "last_modified": 1701752260, "replies": 73, "id": 997686}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/301a/d0e3/834_large.png?m=1584400459", "name": "xiaomi", "avatar_normal": "https://cdn.v2ex.com/navatar/301a/d0e3/834_normal.png?m=1584400459", "title": "小米", "url": "https://www.v2ex.com/go/xiaomi", "topics": 887, "footer": "", "header": "关于小米公司出品的各种智能硬件的使用讨论", "title_alternative": "Xiaomi", "avatar_mini": "https://cdn.v2ex.com/navatar/301a/d0e3/834_mini.png?m=1584400459", "stars": 356, "aliases": [], "root": false, "id": 834, "parent_node_name": "android"}, "member": {"id": 592779, "username": "tntin", "url": "https://www.v2ex.com/u/tntin", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/2d4c/9a3d/592779_mini.png?m=1700578649", "avatar_normal": "https://cdn.v2ex.com/avatar/2d4c/9a3d/592779_normal.png?m=1700578649", "avatar_large": "https://cdn.v2ex.com/avatar/2d4c/9a3d/592779_large.png?m=1700578649", "avatar_xlarge": "https://cdn.v2ex.com/avatar/2d4c/9a3d/592779_xlarge.png?m=1700578649", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/2d4c/9a3d/592779_xlarge.png?m=1700578649", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/2d4c/9a3d/592779_xlarge.png?m=1700578649", "created": 1661794997, "last_modified": 1700578649}, "last_reply_by": "yybhf", "last_touched": 1701808726, "title": "消费降级： 8 年三星用户入手红米 K70pro", "url": "https://www.v2ex.com/t/997722", "created": 1701747318, "deleted": 0, "content": "不是三星买不起，而是红米更有性价比。\r\n\r\n最近被红米 k70 的营销广告洗脑，加上手持三星 s21 实在太卡了，跟朋友开黑秒表暖手宝。\r\n\r\n新款 s23+的价格让我望而却步，这年头工作难找 钱更难挣，让我不得不承认一个事实 我的消费能力下降了。\r\n\r\n上手 k70 pro 三天了，最大的感触就是指纹太快了，目测比 s21 快大约三倍。\r\n\r\n其次就是小米的系统广告真是有点多，虽然能关闭 但也是查了很久的教程。\r\n\r\n存储：我买的是 12+256 的配置，s21 的 128G 用了两年没满，所以存储对我来说不太重要。\r\n\r\n拍照：我最不需要的功能，我顶多就扫码，如果三个摄像头去掉两个还能再将降价那最好。\r\n\r\n屏幕：网上很多人说屏幕泛黄，我看不出来，应该是需要对比吧。\r\n\r\n手感：裸机手感不错，尺寸和重量还没适应。\r\n\r\n电池：昨晚特意充满电开始看电池用量，看视频看了 5 个小时，总待机时长 12 小时 39 分，还有 20%的点。\r\n\r\n反诈：已经发现又反诈的开关了，底层估计不干净了。\r\n\r\n系统：放在最后说 我只想说雷总干的漂亮，用魔法打败魔法了属于。以前都叫 UI 但有人开先河 非要叫 OS  还要叫国产 那就都改名吧。\r\n\r\n\r\n\r\n\r\n总结：性价比高", "content_rendered": "不是三星买不起，而是红米更有性价比。<br /><br />最近被红米 k70 的营销广告洗脑，加上手持三星 s21 实在太卡了，跟朋友开黑秒表暖手宝。<br /><br />新款 s23+的价格让我望而却步，这年头工作难找 钱更难挣，让我不得不承认一个事实 我的消费能力下降了。<br /><br />上手 k70 pro 三天了，最大的感触就是指纹太快了，目测比 s21 快大约三倍。<br /><br />其次就是小米的系统广告真是有点多，虽然能关闭 但也是查了很久的教程。<br /><br />存储：我买的是 12+256 的配置，s21 的 128G 用了两年没满，所以存储对我来说不太重要。<br /><br />拍照：我最不需要的功能，我顶多就扫码，如果三个摄像头去掉两个还能再将降价那最好。<br /><br />屏幕：网上很多人说屏幕泛黄，我看不出来，应该是需要对比吧。<br /><br />手感：裸机手感不错，尺寸和重量还没适应。<br /><br />电池：昨晚特意充满电开始看电池用量，看视频看了 5 个小时，总待机时长 12 小时 39 分，还有 20%的点。<br /><br />反诈：已经发现又反诈的开关了，底层估计不干净了。<br /><br />系统：放在最后说 我只想说雷总干的漂亮，用魔法打败魔法了属于。以前都叫 UI 但有人开先河 非要叫 OS  还要叫国产 那就都改名吧。<br /><br /><br /><br /><br />总结：性价比高", "last_modified": 1701775138, "replies": 73, "id": 997722}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 5239, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1303, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 26400, "username": "twoz", "url": "https://www.v2ex.com/u/twoz", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/37eada3bb64a69636b31a98827fa805c?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/37eada3bb64a69636b31a98827fa805c?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/37eada3bb64a69636b31a98827fa805c?s=73&d=retro", "created": 1346938522, "last_modified": 1346938522}, "last_reply_by": "xujianxing", "last_touched": 1701829202, "title": "相亲后续，性格真的决定命运，感觉要凉凉", "url": "https://www.v2ex.com/t/997941", "created": 1701824377, "deleted": 0, "content": "https://www.v2ex.com/t/980952\n\nhttps://www.v2ex.com/t/990465\n\nhttps://www.v2ex.com/t/995067\n\n\n\n昨天送她一家去南京办事，然后她妈拉着我聊了很久，说我在她面前唯唯诺诺没有主见，什么都说好，怎么能获取她的芳心呢？\n\n然后她妈说他觉得我很老实本分忠厚，婚后不会有乱七八糟的事情，就是希望我勇敢一些。不要让她女儿觉得没意思 。\n\n我感觉她妈有点在 PUA 我，我无所谓 。\n\n大概就是用受气小媳妇来形容我吧。\n\n然后说她以前对一个富二代同事有好感，但她家怕嫁过去受欺负之类之类 。。\n\n我现在就是觉得原生家庭的带来的影响真的很大。\n\n但我这个性格就是蔫了吧唧，没有攻击性，凉了也不出意料。", "content_rendered": "<a target=\"_blank\" href=\"https://www.v2ex.com/t/980952\" rel=\"nofollow noopener\">https://www.v2ex.com/t/980952</a><br /><br /><a target=\"_blank\" href=\"https://www.v2ex.com/t/990465\" rel=\"nofollow noopener\">https://www.v2ex.com/t/990465</a><br /><br /><a target=\"_blank\" href=\"https://www.v2ex.com/t/995067\" rel=\"nofollow noopener\">https://www.v2ex.com/t/995067</a><br /><br /><br /><br />昨天送她一家去南京办事，然后她妈拉着我聊了很久，说我在她面前唯唯诺诺没有主见，什么都说好，怎么能获取她的芳心呢？<br /><br />然后她妈说他觉得我很老实本分忠厚，婚后不会有乱七八糟的事情，就是希望我勇敢一些。不要让她女儿觉得没意思 。<br /><br />我感觉她妈有点在 PUA 我，我无所谓 。<br /><br />大概就是用受气小媳妇来形容我吧。<br /><br />然后说她以前对一个富二代同事有好感，但她家怕嫁过去受欺负之类之类 。。<br /><br />我现在就是觉得原生家庭的带来的影响真的很大。<br /><br />但我这个性格就是蔫了吧唧，没有攻击性，凉了也不出意料。", "last_modified": 1701824377, "replies": 67, "id": 997941}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/71ad/16ad/815_large.png?m=1409406525", "name": "tesla", "avatar_normal": "https://cdn.v2ex.com/navatar/71ad/16ad/815_normal.png?m=1409406525", "title": "Tesla", "url": "https://www.v2ex.com/go/tesla", "topics": 45, "footer": "", "header": "Premium Electric Vehicles", "title_alternative": "特斯拉", "avatar_mini": "https://cdn.v2ex.com/navatar/71ad/16ad/815_mini.png?m=1409406525", "stars": 91, "aliases": [], "root": false, "id": 815, "parent_node_name": "car"}, "member": {"id": 276715, "username": "minglanyu", "url": "https://www.v2ex.com/u/minglanyu", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/d5c42d6747a3bdad245ae3cf15a9b319?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/d5c42d6747a3bdad245ae3cf15a9b319?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/d5c42d6747a3bdad245ae3cf15a9b319?s=73&d=retro", "created": 1514168699, "last_modified": 1677203371}, "last_reply_by": "Felldeadbird", "last_touched": 1701802831, "title": "特斯拉的前大灯有什么特别吗？为啥总感觉开了远光灯？", "url": "https://www.v2ex.com/t/997685", "created": 1701742851, "deleted": 0, "content": "经常遇到对向车道的特斯拉，那俩大灯晃得我眼睛快瞎了。\r\n有同感的小伙伴吗？科普科普。", "content_rendered": "<p>经常遇到对向车道的特斯拉，那俩大灯晃得我眼睛快瞎了。\n有同感的小伙伴吗？科普科普。</p>\n", "last_modified": 1701771660, "replies": 60, "id": 997685}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/7f39/f831/61_large.png?m=1659331290", "name": "mysql", "avatar_normal": "https://cdn.v2ex.com/navatar/7f39/f831/61_normal.png?m=1659331290", "title": "MySQL", "url": "https://www.v2ex.com/go/mysql", "topics": 1909, "footer": "", "header": "地球上最流行的关系数据库。被大量的互联网企业运用在网站项目中。具有非常丰富的生态系统。", "title_alternative": "MySQL", "avatar_mini": "https://cdn.v2ex.com/navatar/7f39/f831/61_mini.png?m=1659331290", "stars": 2175, "aliases": [], "root": false, "id": 61, "parent_node_name": "db"}, "member": {"id": 31303, "username": "Aluhao", "url": "https://www.v2ex.com/u/Aluhao", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/2fd8/8827/31303_mini.png?m=1699846122", "avatar_normal": "https://cdn.v2ex.com/avatar/2fd8/8827/31303_normal.png?m=1699846122", "avatar_large": "https://cdn.v2ex.com/avatar/2fd8/8827/31303_large.png?m=1699846122", "created": 1356505471, "last_modified": 1699846122}, "last_reply_by": "TUNGH", "last_touched": 1701812287, "title": "MYSQL 高并发下，记录变动后余额怎么统计才能更准确？", "url": "https://www.v2ex.com/t/997702", "created": 1701744672, "deleted": 0, "content": "-- 积分总表\r\nCREATE TABLE `api_credits` (\r\n  `uid` bigint unsigned NOT NULL COMMENT '用户 ID',\r\n  `names` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户姓名',\r\n  `credits1` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分 1 余额',\r\n  `credits2` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分 2 余额',\r\n  `credits3` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分 3 余额',\r\n  `time` int NOT NULL DEFAULT '0' COMMENT '更新时间',\r\n  PRIMARY KEY (`uid`)\r\n) ENGINE=InnoDB COMMENT='积分总表';\r\n\r\n-- 积分记录表\r\nCREATE TABLE `api_credits_log` (\r\n  `id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '记录 ID',\r\n  `uid` bigint unsigned NOT NULL DEFAULT '0' COMMENT '用户 ID',\r\n  `credits` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分变动',\r\n  `balance` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '变动后余额',\r\n  `cid` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '操作类型',\r\n  `time` int unsigned NOT NULL DEFAULT '0' COMMENT '记录时间',\r\n  PRIMARY KEY (`id`),\r\n  KEY `uid_time` (`uid`,`time`)\r\n) ENGINE=InnoDB COMMENT='积分记录表';\r\n\r\n消费 100 积分，向 积分总表 api_credits 减去用户总积分，并向积分记录表 api_credits_log 写入一条记录，\r\nbalance 用户余额计算是 api_credits 表中 credits1 - 100 （即 80000 - 100 = 79900 ）\r\n\r\n消费事务会产生 SQL 数据：\r\nSELECT * FROM `api_credits` WHERE `uid`='22' LIMIT 1\r\nUPDATE `api_credits` SET `credits1`=`credits1`-'100' WHERE `uid`='22' AND `credits1`>='100'\r\nINSERT INTO `api_credits_log` SET `uid`='22', `cid`='3',  `credits`='100', `balance`='79900', `time`='1701001020'\r\n\r\n但是在高并发场景下 SELECT 读出来的值不是最新，如，在同一时间段这个用户同时几条消费记录，这个变动后余额统计的就不是这么准确了，有没有什么好点的解决方案?\r\n\r\n系统用了主从架构，读写分离，但是在这条事务中 SELECT 查的是主库\r\n\r\n欢迎大家一起探讨一下。", "content_rendered": "-- 积分总表<br />CREATE TABLE `api_credits` (<br />  `uid` bigint unsigned NOT NULL COMMENT '用户 ID',<br />  `names` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户姓名',<br />  `credits1` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分 1 余额',<br />  `credits2` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分 2 余额',<br />  `credits3` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分 3 余额',<br />  `time` int NOT NULL DEFAULT '0' COMMENT '更新时间',<br />  PRIMARY KEY (`uid`)<br />) ENGINE=InnoDB COMMENT='积分总表';<br /><br />-- 积分记录表<br />CREATE TABLE `api_credits_log` (<br />  `id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '记录 ID',<br />  `uid` bigint unsigned NOT NULL DEFAULT '0' COMMENT '用户 ID',<br />  `credits` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '积分变动',<br />  `balance` decimal(15,2) NOT NULL DEFAULT '0.00' COMMENT '变动后余额',<br />  `cid` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '操作类型',<br />  `time` int unsigned NOT NULL DEFAULT '0' COMMENT '记录时间',<br />  PRIMARY KEY (`id`),<br />  KEY `uid_time` (`uid`,`time`)<br />) ENGINE=InnoDB COMMENT='积分记录表';<br /><br />消费 100 积分，向 积分总表 api_credits 减去用户总积分，并向积分记录表 api_credits_log 写入一条记录，<br />balance 用户余额计算是 api_credits 表中 credits1 - 100 （即 80000 - 100 = 79900 ）<br /><br />消费事务会产生 SQL 数据：<br />SELECT * FROM `api_credits` WHERE `uid`='22' LIMIT 1<br />UPDATE `api_credits` SET `credits1`=`credits1`-'100' WHERE `uid`='22' AND `credits1`&gt;='100'<br />INSERT INTO `api_credits_log` SET `uid`='22', `cid`='3',  `credits`='100', `balance`='79900', `time`='1701001020'<br /><br />但是在高并发场景下 SELECT 读出来的值不是最新，如，在同一时间段这个用户同时几条消费记录，这个变动后余额统计的就不是这么准确了，有没有什么好点的解决方案?<br /><br />系统用了主从架构，读写分离，但是在这条事务中 SELECT 查的是主库<br /><br />欢迎大家一起探讨一下。", "last_modified": 1701744694, "replies": 60, "id": 997702}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 5239, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1303, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 459870, "username": "miaeLKK", "url": "https://www.v2ex.com/u/miaeLKK", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/f58634e88e35cd83341614d958bfe388?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/f58634e88e35cd83341614d958bfe388?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/f58634e88e35cd83341614d958bfe388?s=73&d=retro", "created": 1576633868, "last_modified": 1693533848}, "last_reply_by": "revlis7", "last_touched": 1701829145, "title": "新生儿奶粉推荐？", "url": "https://www.v2ex.com/t/997942", "created": 1701825200, "deleted": 0, "content": "孩子即将出生，应该是男孩，网上各种视频，还刷到了艾老说安利产品也不好的，就觉得还是国产好？可又想到三聚氰胺。。。奶爸们说说都给喝的啥？", "content_rendered": "孩子即将出生，应该是男孩，网上各种视频，还刷到了艾老说安利产品也不好的，就觉得还是国产好？可又想到三聚氰胺。。。奶爸们说说都给喝的啥？", "last_modified": 1701825200, "replies": 55, "id": 997942}]