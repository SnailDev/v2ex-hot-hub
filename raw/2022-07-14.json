[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 187304, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3509, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 373523, "username": "shitouyu", "url": "https://www.v2ex.com/u/shitouyu", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/e2f5/7cc7/373523_mini.png?m=1650340583", "avatar_normal": "https://cdn.v2ex.com/avatar/e2f5/7cc7/373523_normal.png?m=1650340583", "avatar_large": "https://cdn.v2ex.com/avatar/e2f5/7cc7/373523_large.png?m=1650340583", "created": 1545952911, "last_modified": 1650340583}, "last_reply_by": "klo424", "last_touched": 1657723955, "title": "换了 3 个枕头了还睡的不舒服，请问应该如何正确选枕头？", "url": "https://www.v2ex.com/t/865815", "created": 1657674186, "deleted": 0, "content": "1. 请大家传授一点生活经验吧\r\n2. 买了 3 个枕头\r\n3. 第一个京造的乳胶枕，高度 9-11cm 睡了几天，感觉有点高不舒服，味道有点能接受\r\n4. 第二个，亚朵酒店同款的记忆枕，大平层行的，高度 8cm ，感觉自己可能睡不惯波浪形的所以特意买这种，睡了两天，奶香味味道特别大比乳胶枕的还大，而且睡着并不舒服，感觉有点硬，不知道为什么都说是睡的最舒服的。\r\n5. 第三个，京造的记忆枕，高度 7-9cm,7cm 的侧枕比较舒服，但是我习惯平躺睡，平躺总感觉脖子处硬，看评论说要把波浪处太低了，添点东西就好，还没尝试，这几天睡的有时候舒服有时候难受跟没睡觉似的。\r\n6. 是不是要换个软管枕试试了！\r\n7.大佬们推荐几个枕头？", "content_rendered": "<ol>\n<li>请大家传授一点生活经验吧</li>\n<li>买了 3 个枕头</li>\n<li>第一个京造的乳胶枕，高度 9-11cm 睡了几天，感觉有点高不舒服，味道有点能接受</li>\n<li>第二个，亚朵酒店同款的记忆枕，大平层行的，高度 8cm ，感觉自己可能睡不惯波浪形的所以特意买这种，睡了两天，奶香味味道特别大比乳胶枕的还大，而且睡着并不舒服，感觉有点硬，不知道为什么都说是睡的最舒服的。</li>\n<li>第三个，京造的记忆枕，高度 7-9cm,7cm 的侧枕比较舒服，但是我习惯平躺睡，平躺总感觉脖子处硬，看评论说要把波浪处太低了，添点东西就好，还没尝试，这几天睡的有时候舒服有时候难受跟没睡觉似的。</li>\n<li>是不是要换个软管枕试试了！\n7.大佬们推荐几个枕头？</li>\n</ol>\n", "last_modified": 1657674186, "replies": 109, "id": 865815}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/e4da/3b7f/5_large.png?m=1584385880", "name": "movie", "avatar_normal": "https://cdn.v2ex.com/navatar/e4da/3b7f/5_normal.png?m=1584385880", "title": "电影", "url": "https://www.v2ex.com/go/movie", "topics": 1241, "footer": "", "header": "用 90 分钟去体验另外一个世界。", "title_alternative": "Movie", "avatar_mini": "https://cdn.v2ex.com/navatar/e4da/3b7f/5_mini.png?m=1584385880", "stars": 1816, "aliases": [], "root": false, "id": 5, "parent_node_name": "life"}, "member": {"id": 557150, "username": "2696284032", "url": "https://www.v2ex.com/u/2696284032", "website": "www.ilovey.live", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/76332638c8d106ffa5558cf852b152e5?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/76332638c8d106ffa5558cf852b152e5?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/76332638c8d106ffa5558cf852b152e5?s=73&d=retro", "created": 1632817727, "last_modified": 1655952283}, "last_reply_by": "Mavious", "last_touched": 1657632162, "title": "昨晚上熬夜看了部《教父》真的绝了", "url": "https://www.v2ex.com/t/865821", "created": 1657675542, "deleted": 0, "content": "迈克餐馆开枪那段心都跟着加速了，代入感太强了，真的是部好电影，推荐大家看看", "content_rendered": "<p>迈克餐馆开枪那段心都跟着加速了，代入感太强了，真的是部好电影，推荐大家看看</p>\n", "last_modified": 1657675542, "replies": 84, "id": 865821}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/093f/65e0/59_large.png?m=1615956453", "name": "random", "avatar_normal": "https://cdn.v2ex.com/navatar/093f/65e0/59_normal.png?m=1615956453", "title": "随想", "url": "https://www.v2ex.com/go/random", "topics": 3227, "footer": "", "header": "有的时候，可以停下来找找灵感，然后再继续。", "title_alternative": "Random", "avatar_mini": "https://cdn.v2ex.com/navatar/093f/65e0/59_mini.png?m=1615956453", "stars": 1051, "aliases": [], "root": false, "id": 59, "parent_node_name": "v2ex"}, "member": {"id": 433860, "username": "pangpre", "url": "https://www.v2ex.com/u/pangpre", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/0ba2d2085c33f4e18dd02a40e3652286?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/0ba2d2085c33f4e18dd02a40e3652286?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/0ba2d2085c33f4e18dd02a40e3652286?s=73&d=retro", "created": 1564919999, "last_modified": 1564919999}, "last_reply_by": "jackantony", "last_touched": 1657757427, "title": "有没有 35➕的码农，一起组团", "url": "https://www.v2ex.com/t/865877", "created": 1657685231, "deleted": 0, "content": "有没有 35➕的码农，一起组团去日本或者其他国家的？\r\n\r\n几十个人一起，找一个大一点的公司一起入职，先过去工作，直接讲中文\r\n\r\n等以后人数多了，可以一起组建一个类似魁北克省那样的华语省？", "content_rendered": "<p>有没有 35➕的码农，一起组团去日本或者其他国家的？</p>\n<p>几十个人一起，找一个大一点的公司一起入职，先过去工作，直接讲中文</p>\n<p>等以后人数多了，可以一起组建一个类似魁北克省那样的华语省？</p>\n", "last_modified": 1657685231, "replies": 64, "id": 865877}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 187304, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3509, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 467600, "username": "lutian", "url": "https://www.v2ex.com/u/lutian", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/1d2fe356b70b841de28feab3e6da1d07?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/1d2fe356b70b841de28feab3e6da1d07?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/1d2fe356b70b841de28feab3e6da1d07?s=73&d=retro", "created": 1580678934, "last_modified": 1647390569}, "last_reply_by": "y051313", "last_touched": 1656722940, "title": "想挑战自己装修房子，可行性有多大，", "url": "https://www.v2ex.com/t/865810", "created": 1657673400, "deleted": 0, "content": "有个房子，装修公司报价 300 ， 调查了一下市场，这个就是行价， 超出我的预算， 想花最少的钱，\r\n\r\n有没有经验可以借鉴的,", "content_rendered": "有个房子，装修公司报价 300 ， 调查了一下市场，这个就是行价， 超出我的预算， 想花最少的钱，<br /><br />有没有经验可以借鉴的,", "last_modified": 1657673400, "replies": 61, "id": 865810}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1656605007", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1656605007", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 49754, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1656605007", "stars": 7895, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 492986, "username": "v2exblog", "url": "https://www.v2ex.com/u/v2exblog", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/dfcf47be8f6541f56f6b6efd5650ed51?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/dfcf47be8f6541f56f6b6efd5650ed51?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/dfcf47be8f6541f56f6b6efd5650ed51?s=73&d=retro", "created": 1591176794, "last_modified": 1650896686}, "last_reply_by": "codingbody", "last_touched": 1657759233, "title": "北京的各位，请问平时都怎么挂号啊，我用北医三院 APP 基本都挂不到号，最近颈椎疼想周六日去医院看看", "url": "https://www.v2ex.com/t/865846", "created": 1657680245, "deleted": 0, "content": "如题，各位有经验没？取取经", "content_rendered": "<p>如题，各位有经验没？取取经</p>\n", "last_modified": 1657680406, "replies": 56, "id": 865846}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/f4be/0027/528_large.png?m=1587114721", "name": "ruofan", "avatar_normal": "https://cdn.v2ex.com/navatar/f4be/0027/528_normal.png?m=1587114721", "title": "若饭", "url": "https://www.v2ex.com/go/ruofan", "topics": 6, "footer": "", "header": "程序员与营养师的跨界合作，依照太空食品理念，打造可持续代替一日三餐的未来食物。", "title_alternative": "若饭", "avatar_mini": "https://cdn.v2ex.com/navatar/f4be/0027/528_mini.png?m=1587114721", "stars": 4, "aliases": [], "root": false, "id": 528, "parent_node_name": ""}, "member": {"id": 584150, "username": "7RTDKSAK", "url": "https://www.v2ex.com/u/7RTDKSAK", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/9921/7ac7/584150_mini.png?m=1654676459", "avatar_normal": "https://cdn.v2ex.com/avatar/9921/7ac7/584150_normal.png?m=1654676459", "avatar_large": "https://cdn.v2ex.com/avatar/9921/7ac7/584150_large.png?m=1654676459", "avatar_xlarge": "https://cdn.v2ex.com/avatar/9921/7ac7/584150_xlarge.png?m=1654676459", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/9921/7ac7/584150_xlarge.png?m=1654676459", "created": 1654676181, "last_modified": 1654676459}, "last_reply_by": "PlsDontStop", "last_touched": 1657735531, "title": "懒人适合若饭吗?", "url": "https://www.v2ex.com/t/865897", "created": 1657691750, "deleted": 0, "content": "居家办公,煮饭炒菜太费时费力,出门下馆子又热出人命,而且进出一趟家门还断了思绪  \r\n\r\n所以想试试若饭?或者同类竞品有什么推荐?  \r\n\r\n有没有 V 友现身说法?体验如何?", "content_rendered": "<p>居家办公,煮饭炒菜太费时费力,出门下馆子又热出人命,而且进出一趟家门还断了思绪  </p>\n<p>所以想试试若饭?或者同类竞品有什么推荐?  </p>\n<p>有没有 V 友现身说法?体验如何?</p>\n", "last_modified": 1657711251, "replies": 50, "id": 865897}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1656605007", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1656605007", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 49754, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1656605007", "stars": 7895, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 517389, "username": "wangyu17455", "url": "https://www.v2ex.com/u/wangyu17455", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/b015/b720/517389_mini.png?m=1657675387", "avatar_normal": "https://cdn.v2ex.com/avatar/b015/b720/517389_normal.png?m=1657675387", "avatar_large": "https://cdn.v2ex.com/avatar/b015/b720/517389_large.png?m=1657675387", "created": 1605323871, "last_modified": 1657675387}, "last_reply_by": "wangyu17455", "last_touched": 1657730451, "title": "使用支持 websocket 的 cdn 保护 mc 服务器", "url": "https://www.v2ex.com/t/865848", "created": 1657680578, "deleted": 0, "content": "前言：朋友的 mc server(java 版,1.12.2,日均玩家 10-15 人，mod 服)，在多次遭受 ddos 攻击之后，朋友找到我，询问有没有一种方法可以以较低的成本保护他的 mc 服务器。\r\n\r\n最开始考虑的方案是高防 ip ，高防 ip 的**好处**是操作简便，无需任何多余的设置，**缺点**则是价格贵，防御和机器配置绑定，若是购买通用高防服务器，想要获得足够的防御，需要购买对于 mc 开服来说过多核心(比如 8 核 e5)的服务器，若是购买 mc 专用的高防 ip ，则面临着超售严重和价格昂贵的问题。\r\n\r\n随后又考虑了 cdn 方案(在玩家的客户端架设正向代理将 tcp 连接转为 websocket 连接经过 cdn 传输到 mc server)，我最先想到了经常被 mjj 拿来拯救被墙机器的 cloudflare(下文将简称为 cf)，通过 cf 的边缘节点走 cf 的内网回源到 mc 服务器，期间尝试了优选 ip 等一系列骚操作，但是最终因为延迟问题被迫放弃。\r\n\r\n随后我将视角转向了国内 cdn ，国内 cdn 厂商相比 cf 有两大不足，一是需要备案，二是不免费+只能后付费，可以被有心人很轻易地刷出天价账单，但是胜在**延迟低**。可选的加速方式有全站加速(可以加速任意基于 tcp 的协议)和 http 加速，在价格上，全站加速的价格远高于普通的 cdn 的 1g0.2 元的均价，不考虑，最终决定使用支持 websocket 的 http 加速。此时只剩最后一个问题需要解决，如何避免被有心人刷出天价流量账单，经过我的多番寻找，最终找到了一个接近完美的方案：**域前置**。若是使用明文的 http 方案，攻击者可以加群下载客户端之后抓包获得加速域名，若是使用默认的 https 方案，会在两个地方暴露连接的域名，一是 dns 解析，二是 tls 握手中客户端发送的 sni ，对于 dns 解析，我们可以使用一种叫做 cname 拉平(对 cname 类型的 dns 查询直接在服务端进行递归的解析直到最终获得 ip)的方案，假设我们使用某 cdn 加速域名 example.com ，cdn 提供者会返回给我们一个 cname 域名，类似这种格式：example.com.xxx.yycdn.com ，对此域名进行递归的解析，一般来说会解析到 yycdn.com ，因此我们可以直接对 yycdn.com 建立 https 连接，而不必对带有我们域名 example.com 信息的的加速域名进行连接。对于 sni ，我们可以使用域前置技术，域前置技术简单地说就是 tls 握手中发送的 host A 和 http header 中发送的 host B 不一致，host A 放入 sni 中明文发送，而 host B 则是被 tls 连接保护，不会泄露。决定回源到哪个域名的是的是 host B,决定连接安全性的则是 host A ，只要 host A 的私钥或者百度的日志不泄露，那么 host B 就不会被解密出来(当然二进制文件里的 host B 字段也需要通过混淆 /加密 /加壳等方式保护好)。经过测试，距离较劲的玩家延迟增加了小于 20ms ，而较远的玩家延迟没有明显增加，日均玩家 10-15 人，一个月流量 500g 。以下是 demo\r\n\r\n[yu1745/websocket_tunnel: 将 tcp 连接转为 websocket 连接使其可以通过 cdn 传输 支持域前置技术以隐藏域名 (github.com)]( https://github.com/yu1745/websocket_tunnel)", "content_rendered": "<p>前言：朋友的 mc server(java 版,1.12.2,日均玩家 10-15 人，mod 服)，在多次遭受 ddos 攻击之后，朋友找到我，询问有没有一种方法可以以较低的成本保护他的 mc 服务器。</p>\n<p>最开始考虑的方案是高防 ip ，高防 ip 的<strong>好处</strong>是操作简便，无需任何多余的设置，<strong>缺点</strong>则是价格贵，防御和机器配置绑定，若是购买通用高防服务器，想要获得足够的防御，需要购买对于 mc 开服来说过多核心(比如 8 核 e5)的服务器，若是购买 mc 专用的高防 ip ，则面临着超售严重和价格昂贵的问题。</p>\n<p>随后又考虑了 cdn 方案(在玩家的客户端架设正向代理将 tcp 连接转为 websocket 连接经过 cdn 传输到 mc server)，我最先想到了经常被 mjj 拿来拯救被墙机器的 cloudflare(下文将简称为 cf)，通过 cf 的边缘节点走 cf 的内网回源到 mc 服务器，期间尝试了优选 ip 等一系列骚操作，但是最终因为延迟问题被迫放弃。</p>\n<p>随后我将视角转向了国内 cdn ，国内 cdn 厂商相比 cf 有两大不足，一是需要备案，二是不免费+只能后付费，可以被有心人很轻易地刷出天价账单，但是胜在<strong>延迟低</strong>。可选的加速方式有全站加速(可以加速任意基于 tcp 的协议)和 http 加速，在价格上，全站加速的价格远高于普通的 cdn 的 1g0.2 元的均价，不考虑，最终决定使用支持 websocket 的 http 加速。此时只剩最后一个问题需要解决，如何避免被有心人刷出天价流量账单，经过我的多番寻找，最终找到了一个接近完美的方案：<strong>域前置</strong>。若是使用明文的 http 方案，攻击者可以加群下载客户端之后抓包获得加速域名，若是使用默认的 https 方案，会在两个地方暴露连接的域名，一是 dns 解析，二是 tls 握手中客户端发送的 sni ，对于 dns 解析，我们可以使用一种叫做 cname 拉平(对 cname 类型的 dns 查询直接在服务端进行递归的解析直到最终获得 ip)的方案，假设我们使用某 cdn 加速域名 <a href=\"http://example.com\" rel=\"nofollow\">example.com</a> ，cdn 提供者会返回给我们一个 cname 域名，类似这种格式：<a href=\"http://example.com.xxx.yycdn.com\" rel=\"nofollow\">example.com.xxx.yycdn.com</a> ，对此域名进行递归的解析，一般来说会解析到 <a href=\"http://yycdn.com\" rel=\"nofollow\">yycdn.com</a> ，因此我们可以直接对 <a href=\"http://yycdn.com\" rel=\"nofollow\">yycdn.com</a> 建立 https 连接，而不必对带有我们域名 <a href=\"http://example.com\" rel=\"nofollow\">example.com</a> 信息的的加速域名进行连接。对于 sni ，我们可以使用域前置技术，域前置技术简单地说就是 tls 握手中发送的 host A 和 http header 中发送的 host B 不一致，host A 放入 sni 中明文发送，而 host B 则是被 tls 连接保护，不会泄露。决定回源到哪个域名的是的是 host B,决定连接安全性的则是 host A ，只要 host A 的私钥或者百度的日志不泄露，那么 host B 就不会被解密出来(当然二进制文件里的 host B 字段也需要通过混淆 /加密 /加壳等方式保护好)。经过测试，距离较劲的玩家延迟增加了小于 20ms ，而较远的玩家延迟没有明显增加，日均玩家 10-15 人，一个月流量 500g 。以下是 demo</p>\n<p><a href=\"https://github.com/yu1745/websocket_tunnel\" rel=\"nofollow\">yu1745/websocket_tunnel: 将 tcp 连接转为 websocket 连接使其可以通过 cdn 传输 支持域前置技术以隐藏域名 (github.com)</a></p>\n", "last_modified": 1657680578, "replies": 48, "id": 865848}]